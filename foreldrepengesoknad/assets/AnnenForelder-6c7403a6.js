import{j as o,a as v}from"./jsx-runtime-670450c2.js";import{h as i,d as B,b as $}from"./validationUtils-67294d5c.js";import{i as l,F as N,u as L}from"./IntlProvider-dc729df9.js";import"./index-7e4e529b.js";import{B as p}from"./Block-01b0ab76.js";import{u as z,a as J,S as X,g as Z,s as ee}from"./useFortsettSøknadSenere-e3f0df02.js";import{U as I}from"./UtvidetInformasjon-33c789c9.js";import{r as re}from"./index-f1f749bf.js";import{l as s,ao as y,ap as ne,y as oe,aq as W,ar as te,I as ae}from"./periodeUtils-f04fe3f4.js";import{F as se}from"./FormikFileUploader-235a07ed.js";import{a as R,f as M}from"./mapSøkerinfoDTO-f7746f82.js";import{b as P,u as le,g as de,k as ie,l as pe}from"./useSøknad-e0725e39.js";import{A as w}from"./FormikFileInput-1aab3cd0.js";import{S as T}from"./Skjemanummer-77149054.js";import{c as u,a as F}from"./formUtils-05ec5f16.js";import{l as me}from"./index-feafd352.js";import{u as ge}from"./useOnValidSubmit-cccef928.js";import{i as Q,a as Oe}from"./AnnenForelder-5c5d4f7f.js";import{l as ue}from"./vedleggUtils-7804bea0.js";import{Q as fe}from"./index-47edccfa.js";import{V as _}from"./VeilederNormal-911fc82a.js";import{_ as j}from"./veilederpanel-a75452fb.js";import{l as ce}from"./index-c489149c.js";import{l as ke}from"./index-781d69e8.js";import{R as ve}from"./RegistrertePersonalia-7c5e16ba.js";import{u as Ne}from"./useSøkerinfo-2468b7ec.js";import{u as Fe,s as Se}from"./useSaveLoadedRoute-c343dcd2.js";var r=(e=>(e.kanIkkeOppgis="kanIkkeOppgis",e.harRettPåForeldrepengerINorge="harRettPåForeldrepengerINorge",e.harOppholdtSegIEØS="harOppholdtSegIEØS",e.harRettPåForeldrepengerIEØS="harRettPåForeldrepengerIEØS",e.erInformertOmSøknaden="erInformertOmSøknaden",e.fornavn="fornavn",e.etternavn="etternavn",e.fnr="fnr",e.utenlandskFnr="utenlandskFnr",e.aleneOmOmsorg="aleneOmOmsorg",e.erMorUfør="erMorUfør",e.datoForAleneomsorg="datoForAleneomsorg",e.bostedsland="bostedsland",e.dokumentasjonAvAleneomsorg="dokumentasjonAvAleneomsorg",e))(r||{});const g=s.getTypedFormComponents(),b={[r.kanIkkeOppgis]:!1,[r.harRettPåForeldrepengerINorge]:s.YesOrNo.UNANSWERED,[r.harOppholdtSegIEØS]:s.YesOrNo.UNANSWERED,[r.harRettPåForeldrepengerIEØS]:s.YesOrNo.UNANSWERED,[r.erInformertOmSøknaden]:s.YesOrNo.UNANSWERED,[r.fornavn]:"",[r.etternavn]:"",[r.fnr]:"",[r.utenlandskFnr]:!1,[r.aleneOmOmsorg]:s.YesOrNo.UNANSWERED,[r.erMorUfør]:s.YesOrNo.UNANSWERED,[r.datoForAleneomsorg]:"",[r.bostedsland]:"",[r.dokumentasjonAvAleneomsorg]:[]},Ie=(e,n,t)=>{const d={aleneOmOmsorg:n.isVisible(r.aleneOmOmsorg)?e.aleneOmOmsorg:s.YesOrNo.UNANSWERED,bostedsland:n.isVisible(r.bostedsland)?e.bostedsland:"",datoForAleneomsorg:n.isVisible(r.datoForAleneomsorg)?e.datoForAleneomsorg:"",dokumentasjonAvAleneomsorg:n.isVisible(r.dokumentasjonAvAleneomsorg)?ue(e.dokumentasjonAvAleneomsorg,w.ALENEOMSORG,T.DOK_AV_ALENEOMSORG):[],erInformertOmSøknaden:n.isVisible(r.erInformertOmSøknaden)?e.erInformertOmSøknaden:s.YesOrNo.UNANSWERED,erMorUfør:n.isVisible(r.erMorUfør)?e.erMorUfør:s.YesOrNo.UNANSWERED,etternavn:n.isVisible(r.etternavn)?e.etternavn:"",fnr:n.isVisible(r.fnr)?e.fnr:"",fornavn:n.isVisible(r.fornavn)?e.fornavn:"",harRettPåForeldrepengerINorge:n.isVisible(r.harRettPåForeldrepengerINorge)?e.harRettPåForeldrepengerINorge:s.YesOrNo.UNANSWERED,harOppholdtSegIEØS:n.isVisible(r.harOppholdtSegIEØS)?e.harOppholdtSegIEØS:s.YesOrNo.UNANSWERED,harRettPåForeldrepengerIEØS:n.isVisible(r.harRettPåForeldrepengerIEØS)?e.harRettPåForeldrepengerIEØS:s.YesOrNo.UNANSWERED,kanIkkeOppgis:n.isVisible(r.kanIkkeOppgis)?e.kanIkkeOppgis:!1,utenlandskFnr:n.isVisible(r.utenlandskFnr)?e.utenlandskFnr:!1};return t!==void 0?{...d,fornavn:t.fornavn,etternavn:t.etternavn,fnr:t.fnr}:d},he=e=>{if(e.kanIkkeOppgis===!1){const n=u(e.harOppholdtSegIEØS),t=n?u(e.harRettPåForeldrepengerIEØS):!1;return{etternavn:i(e.etternavn)?y(e.etternavn):void 0,fornavn:i(e.fornavn)?y(e.fornavn):void 0,fnr:i(e.fnr)&&e.fnr!==void 0?e.fnr.trim():void 0,bostedsland:i(e.bostedsland)?e.bostedsland:void 0,utenlandskFnr:i(e.utenlandskFnr)?e.utenlandskFnr:void 0,erUfør:u(e.erMorUfør),kanIkkeOppgis:e.kanIkkeOppgis,harRettPåForeldrepengerINorge:u(e.harRettPåForeldrepengerINorge),harOppholdtSegIEØS:n,harRettPåForeldrepengerIEØS:t,erInformertOmSøknaden:u(e.erInformertOmSøknaden)}}return{kanIkkeOppgis:!0}},Ae=(e,n,t,d,f)=>e!==void 0&&Q(e)&&i(e.fornavn)?{...b,harRettPåForeldrepengerINorge:F(e.harRettPåForeldrepengerINorge),harOppholdtSegIEØS:F(e.harOppholdtSegIEØS),harRettPåForeldrepengerIEØS:F(e.harRettPåForeldrepengerIEØS),bostedsland:e.bostedsland||"",erInformertOmSøknaden:F(e.erInformertOmSøknaden),erMorUfør:F(e.erUfør),dokumentasjonAvAleneomsorg:n.dokumentasjonAvAleneomsorg||[],etternavn:e.etternavn,fornavn:e.fornavn===l(f,"annen.forelder")?"":e.fornavn,kanIkkeOppgis:e.kanIkkeOppgis,fnr:e.fnr,aleneOmOmsorg:F(t.erAleneOmOmsorg),datoForAleneomsorg:s.dateToISOString(n.datoForAleneomsorg)||"",utenlandskFnr:e.utenlandskFnr||!1}:d!==void 0?{...b,fornavn:d.fornavn,etternavn:d.etternavn,fnr:d.fnr}:e!==void 0&&Oe(e)?{...b,kanIkkeOppgis:e.kanIkkeOppgis}:{...b},be=(e,n)=>!(n||e==="medmor"),Ee={[r.fornavn]:{isAnswered:({fornavn:e})=>i(e),isIncluded:({skalOppgiPersonalia:e})=>e,isOptional:({kanIkkeOppgis:e})=>e===!0},[r.etternavn]:{isAnswered:({etternavn:e})=>i(e),isIncluded:({skalOppgiPersonalia:e})=>e,isOptional:({kanIkkeOppgis:e})=>e===!0},[r.kanIkkeOppgis]:{isAnswered:({kanIkkeOppgis:e})=>i(e),isOptional:()=>!0,isIncluded:({skalOppgiPersonalia:e,søkerRolle:n,gjelderStebarnsadopsjon:t})=>e&&be(n,t)},[r.fnr]:{isAnswered:({fnr:e,utenlandskFnr:n})=>i(e)||n===!0&&i(e),isIncluded:({skalOppgiPersonalia:e,kanIkkeOppgis:n})=>e&&n!==!0,visibilityFilter:({fornavn:e,etternavn:n})=>i(e)&&i(n)},[r.utenlandskFnr]:{isAnswered:({utenlandskFnr:e})=>i(e),visibilityFilter:({kanIkkeOppgis:e,fornavn:n,etternavn:t})=>e!==!0&&i(n)&&i(t),isIncluded:({skalOppgiPersonalia:e})=>e,isOptional:()=>!0},[r.aleneOmOmsorg]:{isAnswered:({aleneOmOmsorg:e})=>e!==s.YesOrNo.UNANSWERED,isIncluded:({kanIkkeOppgis:e})=>e===!1,visibilityFilter:({skalOppgiPersonalia:e,fnr:n,utenlandskFnr:t,bostedsland:d})=>!e||e&&i(n)&&t===!1||e&&i(d)&&t===!0},[r.dokumentasjonAvAleneomsorg]:{isAnswered:()=>!0,isIncluded:({aleneOmOmsorg:e,søkerRolle:n})=>e===s.YesOrNo.YES&&n!=="mor",visibilityFilter:({aleneOmOmsorg:e,datoForAleneomsorg:n})=>e===s.YesOrNo.YES||i(n)},[r.harRettPåForeldrepengerINorge]:{parentQuestion:r.aleneOmOmsorg,isAnswered:({harRettPåForeldrepengerINorge:e})=>e!==s.YesOrNo.UNANSWERED,visibilityFilter:({aleneOmOmsorg:e})=>e===s.YesOrNo.NO},[r.harOppholdtSegIEØS]:{parentQuestion:r.harRettPåForeldrepengerINorge,isAnswered:({harOppholdtSegIEØS:e})=>e!==s.YesOrNo.UNANSWERED,visibilityFilter:({aleneOmOmsorg:e})=>e===s.YesOrNo.NO,isIncluded:({harRettPåForeldrepengerINorge:e})=>e===s.YesOrNo.NO},[r.harRettPåForeldrepengerIEØS]:{parentQuestion:r.harOppholdtSegIEØS,isAnswered:({harRettPåForeldrepengerIEØS:e})=>e!==s.YesOrNo.UNANSWERED,visibilityFilter:({aleneOmOmsorg:e})=>e===s.YesOrNo.NO,isIncluded:({harOppholdtSegIEØS:e})=>e===s.YesOrNo.YES},[r.erInformertOmSøknaden]:{parentQuestion:r.harRettPåForeldrepengerINorge,isAnswered:({erInformertOmSøknaden:e})=>e!==s.YesOrNo.UNANSWERED,visibilityFilter:({aleneOmOmsorg:e,harRettPåForeldrepengerINorge:n})=>e===s.YesOrNo.NO&&n===s.YesOrNo.YES},[r.erMorUfør]:{parentQuestion:r.harRettPåForeldrepengerINorge,isAnswered:({erMorUfør:e})=>e!==s.YesOrNo.UNANSWERED,visibilityFilter:({aleneOmOmsorg:e,harRettPåForeldrepengerINorge:n,harRettPåForeldrepengerIEØS:t,harOppholdtSegIEØS:d,søkerRolle:f})=>e===s.YesOrNo.NO&&n===s.YesOrNo.NO&&(d===s.YesOrNo.NO||t===s.YesOrNo.NO)&&P(f)},[r.datoForAleneomsorg]:{isAnswered:({datoForAleneomsorg:e})=>i(e),isIncluded:({aleneOmOmsorg:e,søkerRolle:n})=>e===s.YesOrNo.YES&&P(n)},[r.bostedsland]:{isAnswered:({bostedsland:e})=>i(e),isIncluded:({utenlandskFnr:e})=>e===!0,visibilityFilter:({fnr:e})=>i(e)}},Re=fe(Ee);const Y=({visible:e,annenForelderNavn:n})=>e?o("div",{className:"annenForelderVeileder",children:o(j,{fargetema:"normal",svg:o(_,{transparentBackground:!0}),children:o(N,{id:"annenForelder.veileder.aleneOmsorg.forBarnet",values:{navn:n}})})}):null;try{Y.displayName="AvtaleAtFarTarUtForeldrepengerVeileder",Y.__docgenInfo={description:"",displayName:"AvtaleAtFarTarUtForeldrepengerVeileder",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},annenForelderNavn:{defaultValue:null,description:"",name:"annenForelderNavn",required:!0,type:{name:"string"}}}}}catch{}const U=()=>o("div",{className:"annenForelderVeileder",children:o(j,{fargetema:"normal",svg:o(_,{transparentBackground:!0}),children:o(N,{id:"annenForelder.farMedmor.dokumentasjonAvAleneomsorg.veileder"})})});try{U.displayName="FarDokumentasjonAleneomsorgVeileder",U.__docgenInfo={description:"",displayName:"FarDokumentasjonAleneomsorgVeileder",props:{}}}catch{}const Pe=({visible:e,annenForelderNavn:n})=>e?o("div",{className:"annenForelderVeileder",children:o(j,{fargetema:"normal",svg:o(_,{transparentBackground:!0}),children:o(N,{id:"annenForelder.erAnnenForelderInformert.veileder",values:{navn:n}})})}):null;try{MOrientereAnnenForelderVeileder.displayName="MOrientereAnnenForelderVeileder",MOrientereAnnenForelderVeileder.__docgenInfo={description:"",displayName:"MOrientereAnnenForelderVeileder",props:{visible:{defaultValue:null,description:"",name:"visible",required:!0,type:{name:"boolean"}},annenForelderNavn:{defaultValue:null,description:"",name:"annenForelderNavn",required:!0,type:{name:"string"}}}}}catch{}const Ye=(e,n)=>t=>{if(!i(t))return l(e,"valideringsfeil.annenForelder.datoForAleneomsorg.duMåOppgi");if(!ne.isISODateString(t))return l(e,"valideringsfeil.annenForelder.datoForAleneomsorg.ugyldigDatoFormat");if(B(t).isBefore(n,"day"))return l(e,"valideringsfeil.annenForelder.datoForAleneomsorg.førFamiliehendelsedato",{dato:oe(n.toDate())})},Ue=(e,n,t)=>d=>!t&&(!i(d)||d.trim()==="")?l(e,"valideringsfeil.annenForelder.fornavnPåkrevd"):W(d,n,e),Ve=(e,n,t)=>d=>!t&&(!i(d)||d.trim()==="")?l(e,"valideringsfeil.annenForelder.etternavnPåkrevd"):W(d,n,e);const V=({fornavn:e,erUtenlandskFnr:n,kanIkkeOppgis:t,visibility:d,gjelderAdopsjon:f,søkersFødselsnummer:h})=>{const m=L(),c=$("oppgiPersonalia"),S=l(m,"annenForelder.spørsmål.fornavn"),k=l(m,"annenForelder.spørsmål.etternavn");return v("div",{className:c.block,children:[v(ce.SkjemaGruppe,{legend:o(ke.Element,{children:l(m,"annenForelder.spørsmål.navn")}),children:[o(p,{visible:d.isVisible(r.fornavn),children:v("div",{className:c.element("nameInputsWrapper"),children:[o(g.Input,{className:c.element("nameInput"),name:r.fornavn,label:S,disabled:t,validate:Ue(m,S,t)}),o(g.Input,{className:c.element("nameInput"),name:r.etternavn,label:l(m,"annenForelder.spørsmål.etternavn"),disabled:t,validate:Ve(m,k,t)})]})}),o(p,{visible:d.isVisible(r.kanIkkeOppgis),children:o(g.Checkbox,{name:r.kanIkkeOppgis,label:f?l(m,"annenForelder.spørsmål.adoptererAlene"):l(m,"annenForelder.spørsmål.kanOppgis")})})]}),o(p,{padBottom:"l",visible:d.isVisible(r.fnr),children:o(g.Input,{name:r.fnr,label:l(m,"annenForelder.spørsmål.fnr",{navn:e}),validate:te(m,h,n)})}),o(p,{padBottom:"l",visible:d.isVisible(r.utenlandskFnr),children:o(g.Checkbox,{name:r.utenlandskFnr,label:l(m,"annenForelder.spørsmål.utenlandskFnr",{navn:e})})}),o(p,{padBottom:"l",visible:d.isVisible(r.bostedsland),children:o(g.CountrySelect,{name:r.bostedsland,label:l(m,"annenForelder.bostedsland",{navn:e}),useAlpha3Code:!1})})]})};try{V.displayName="OppgiPersonalia",V.__docgenInfo={description:"",displayName:"OppgiPersonalia",props:{fornavn:{defaultValue:null,description:"",name:"fornavn",required:!0,type:{name:"string | undefined"}},kanIkkeOppgis:{defaultValue:null,description:"",name:"kanIkkeOppgis",required:!0,type:{name:"boolean | undefined"}},erUtenlandskFnr:{defaultValue:null,description:"",name:"erUtenlandskFnr",required:!0,type:{name:"boolean | undefined"}},visibility:{defaultValue:null,description:"",name:"visibility",required:!0,type:{name:"QuestionVisibility<AnnenForelderFormField, undefined>"}},gjelderAdopsjon:{defaultValue:null,description:"",name:"gjelderAdopsjon",required:!0,type:{name:"boolean"}},søkersFødselsnummer:{defaultValue:null,description:"",name:"søkersFødselsnummer",required:!0,type:{name:"string"}}}}}catch{}const _e=()=>{const e=L(),{annenForelder:n,barn:t,søker:d,søkersituasjon:{rolle:f}}=le(),h=B(de(t)),m=Ne(),c=ie(t,m.registrerteBarn),S=c===void 0||c.length===0?void 0:c.find(a=>a.annenForelder!==void 0),k=S!==void 0?S.annenForelder:void 0,A=k===void 0||n!==void 0&&Q(n)&&n.fnr!==k.fnr,C=re.useCallback(a=>{const O={...d,erAleneOmOmsorg:a.kanIkkeOppgis?!0:!!u(a.aleneOmOmsorg)},E={...t,datoForAleneomsorg:i(a.datoForAleneomsorg)?ae(a.datoForAleneomsorg):void 0,dokumentasjonAvAleneomsorg:a.dokumentasjonAvAleneomsorg&&a.dokumentasjonAvAleneomsorg.length>0?a.dokumentasjonAvAleneomsorg:void 0};return[R.setAnnenForelder(he(a)),R.setSøker(O),R.setOmBarnet(E)]},[d,t]),{handleSubmit:x,isSubmitting:D}=ge(C,M.UTTAKSPLAN_INFO,a=>Se(a)),q=z(),G=J();return Fe(M.ANNEN_FORELDER),o(g.FormikWrapper,{initialValues:Ae(n,t,d,k,e),onSubmit:x,renderForm:({values:a})=>{const O=Re.getVisbility({...a,skalOppgiPersonalia:A,søkerRolle:f,gjelderStebarnsadopsjon:!!pe(t)}),E=u(a.aleneOmOmsorg)||!u(a.harRettPåForeldrepengerINorge)||u(a.harRettPåForeldrepengerINorge)&&u(a.erInformertOmSøknaden),H=O.areAllQuestionsAnswered()&&E;return o(X,{bannerTitle:l(e,"søknad.pageheading"),backLinkHref:Z("annenForelder"),activeStepId:"annenForelder",pageTitle:l(e,"søknad.annenForelder"),stepTitle:l(e,"søknad.annenForelder"),onCancel:q,onContinueLater:G,steps:ee(e),kompakt:!0,children:v(g.Form,{includeButtons:!1,cleanup:K=>Ie(K,O,k),includeValidationSummary:!0,children:[A&&o(p,{padBottom:"xl",children:o(V,{fornavn:a.fornavn,erUtenlandskFnr:a.utenlandskFnr,kanIkkeOppgis:a.kanIkkeOppgis,visibility:O,gjelderAdopsjon:!1,søkersFødselsnummer:m.person.fnr})}),!A&&o(p,{padBottom:"l",children:o(ve,{person:k,fødselsnummerForVisning:k.fnr,visEtternavn:!0})}),v(p,{visible:O.isVisible(r.aleneOmOmsorg)||!A,padBottom:"l",children:[o(g.YesOrNoQuestion,{name:r.aleneOmOmsorg,description:o(I,{apneLabel:l(e,"annenForelder.aleneOmOmsorg.veileder.apneLabel"),children:l(e,"annenForelder.aleneOmOmsorg.veileder")}),legend:l(e,"annenForelder.aleneOmOmsorg")}),o(Y,{visible:!P(f)&&a.aleneOmOmsorg===s.YesOrNo.YES,annenForelderNavn:a.fornavn})]}),!a.kanIkkeOppgis&&v(p,{padBottom:"l",visible:O.isVisible(r.datoForAleneomsorg),children:[o(p,{children:o(g.DatePicker,{name:r.datoForAleneomsorg,label:l(e,"annenForelder.datoForAleneomsorg"),minDate:h.toDate(),validate:Ye(e,h),placeholder:"dd.mm.åååå"})}),o(U,{}),o(se,{label:l(e,"annenForelder.farMedmor.dokumentasjonAvAleneomsorg.lastOpp"),name:r.dokumentasjonAvAleneomsorg,attachments:a.dokumentasjonAvAleneomsorg||[],attachmentType:w.ALENEOMSORG,skjemanummer:T.DOK_AV_ALENEOMSORG})]}),o(p,{padBottom:"l",visible:O.isVisible(r.harRettPåForeldrepengerINorge),children:o(g.YesOrNoQuestion,{name:r.harRettPåForeldrepengerINorge,description:v(I,{apneLabel:l(e,"annenForelder.harRettPåForeldrepengerINorge.veileder.apneLabel"),children:[o(N,{id:"annenForelder.harRettPåForeldrepengerINorge.veileder.del1",values:{navn:a.fornavn}}),o("br",{}),o(N,{id:"annenForelder.harRettPåForeldrepengerINorge.veileder.del2",values:{navn:a.fornavn}})]}),legend:l(e,"annenForelder.harRettPåForeldrepengerINorge",{navn:a.fornavn})})}),o(p,{padBottom:"l",visible:O.isVisible(r.harOppholdtSegIEØS),children:o(g.YesOrNoQuestion,{name:r.harOppholdtSegIEØS,description:o(I,{apneLabel:l(e,"annenForelder.harOppholdtSegIEØS.veileder.apneLabel"),children:o(N,{id:"annenForelder.harOppholdtSegIEØS.veileder",values:{navn:a.fornavn}})}),legend:l(e,"annenForelder.harOppholdtSegIEØS",{navn:a.fornavn})})}),o(p,{padBottom:"l",visible:O.isVisible(r.harRettPåForeldrepengerIEØS),children:o(g.YesOrNoQuestion,{name:r.harRettPåForeldrepengerIEØS,description:o(I,{apneLabel:l(e,"annenForelder.harRettPåForeldrepengerIEØS.veileder.apneLabel"),children:o(N,{id:"annenForelder.harRettPåForeldrepengerIEØS.veileder",values:{navn:a.fornavn}})}),legend:l(e,"annenForelder.harRettPåForeldrepengerIEØS",{navn:a.fornavn})})}),v(p,{padBottom:"l",visible:O.isVisible(r.erInformertOmSøknaden),children:[o(g.YesOrNoQuestion,{name:r.erInformertOmSøknaden,legend:l(e,"annenForelder.spørsmål.erAnnenForelderInformert",{navn:a.fornavn})}),o(Pe,{visible:a.erInformertOmSøknaden===s.YesOrNo.NO,annenForelderNavn:a.fornavn})]}),o(p,{padBottom:"l",visible:O.isVisible(r.erMorUfør),children:o(g.YesOrNoQuestion,{name:r.erMorUfør,description:o(I,{apneLabel:l(e,"annenForelder.erMorUfør.veileder.apneLabel"),children:l(e,"annenForelder.erMorUfør.veileder",{navn:a.fornavn})}),legend:l(e,"annenForelder.erMorUfør",{navn:a.fornavn})})}),o(p,{visible:H,textAlignCenter:!0,children:o(me.Hovedknapp,{disabled:D,spinner:D,children:l(e,"søknad.gåVidere")})})]})})}})},sr=_e;export{sr as A};
//# sourceMappingURL=AnnenForelder-6c7403a6.js.map
