import{l as A,d as E}from"./validationUtils-67294d5c.js";import{u as v,S as p,T as F,b as Me,i as Le,_ as ce,A as G,L as X,aA as _e,M as ge,o as ye,G as H,f as B,O as z,P as R,d as x,aj as W,v as V,Y as ne,aZ as P,aY as Ee,E as ee,F as b,U as h,a_ as O,R as je,l as C,I,a$ as ie,aM as Q}from"./periodeUtils-f04fe3f4.js";import{D as J}from"./Dekningsgrad-fced8842.js";import{P as T,s as Z}from"./mapSøkerinfoDTO-f7746f82.js";import{a as se,c as Ge,i as He,B as _}from"./useSøknad-e0725e39.js";import"./jsx-runtime-670450c2.js";import{i as Y}from"./IntlProvider-dc729df9.js";import"./index-7e4e529b.js";import"./index-f1f749bf.js";import{f as Ve}from"./velkommenUtils-1673046b.js";var te=(e=>(e.ORDINÆRT_ARBEID="ORDINÆRT_ARBEID",e.SELVSTENDIG_NÆRINGSDRIVENDE="SELVSTENDIG_NÆRINGSDRIVENDE",e.FRILANS="FRILANS",e.ANNET="ANNET",e))(te||{}),D=(e=>(e.UttakFellesperiodeAnnenForelder="FELLESPERIODE_ANNEN_FORELDER",e.UttakFedrekvoteAnnenForelder="FEDREKVOTE_ANNEN_FORELDER",e.UttakMødrekvoteAnnenForelder="MØDREKVOTE_ANNEN_FORELDER",e.UttakForeldrepengerAnnenForelder="FORELDREPENGER_ANNEN_FORELDER",e.Ingen="INGEN",e))(D||{}),N=(e=>(e.ADOPSJON="ADPSJN",e.OMSORGSOVERTAKELSE="OMSRGO",e.FØDSEL="FODSL",e.TERM="TERM",e))(N||{});const ve=(e,t,r)=>{if(r!==void 0)return N.ADOPSJON;if(e!==void 0)return N.FØDSEL;if(t!==void 0)return N.TERM;throw new Error("Fødselsdato/ termindato/ omsorgsovertakelsedato mangler")};var U=(e=>(e.Ferie="LOVBESTEMT_FERIE",e.Arbeid="ARBEID",e.Sykdom="SØKER_SYKDOM",e.InstitusjonSøker="SØKER_INNLAGT",e.InstitusjonBarnet="BARN_INNLAGT",e.HvØvelse="HV_ØVELSE",e.NavTiltak="NAV_TILTAK",e.Fri="FRI",e))(U||{}),ke=(e=>(e.AVSLAG_HULL_MELLOM_FORELDRENES_PERIODER="AVSLAG_HULL_MELLOM_FORELDRENES_PERIODER",e.ANNET="ANNET",e))(ke||{}),Fe=(e=>(e.fridag="fridag",e.avslåttPeriode="avslåttPeriode",e))(Fe||{});const Ke=(e,t)=>{const r=F(e.tidsperiode).getAntallUttaksdager(),o={...e,tidsperiode:{fom:e.tidsperiode.fom,tom:v(t.tidsperiode.fom).forrige()}},n=F(o.tidsperiode).getAntallUttaksdager(),i=r-n,s=v(t.tidsperiode.tom).neste();if(ce(e)){const d={...e,id:A.guid(),tidsperiode:{fom:t.tidsperiode.fom,tom:e.tidsperiode.tom}};return[o,t,d]}else{const d={...e,id:A.guid(),tidsperiode:{fom:s,tom:v(s).leggTil(i-1)}};return[o,t,d]}},pe=(e,t)=>{const r={...e,tidsperiode:{fom:e.tidsperiode.fom,tom:v(t).forrige()}},o={...e,id:A.guid(),tidsperiode:{fom:v(r.tidsperiode.tom).neste(),tom:e.tidsperiode.tom}};return[r,o]},Be=(e,t)=>{const r={...e,konto:e.konto==p.Foreldrepenger?p.AktivitetsfriKvote:e.konto,morsAktivitetIPerioden:e.konto==p.Foreldrepenger?void 0:e.morsAktivitetIPerioden,erMorForSyk:e.konto==p.Foreldrepenger?void 0:e.erMorForSyk,tidsperiode:{fom:e.tidsperiode.fom,tom:v(t).forrige()}},o={...e,id:A.guid(),tidsperiode:{fom:v(r.tidsperiode.tom).neste(),tom:e.tidsperiode.tom}};return[r,o]},be=(e,t)=>{if(T([e]).finnOverlappendePerioder(t).length>0){const r=[E(e.tidsperiode.fom),E(e.tidsperiode.tom),E(t.tidsperiode.fom),E(t.tidsperiode.tom)],o=E.min(r),n=E.max(r),i=r.filter(s=>s!==o&&s!==n);return F({fom:E.min(i).toDate(),tom:E.max(i).toDate()}).getAntallUttaksdager()}return 0},Tt=({perioder:e,nyPeriode:t,familiehendelsesdato:r,harAktivitetskravIPeriodeUtenUttak:o,erAdopsjon:n,bareFarHarRett:i,erFarEllerMedmor:s,førsteUttaksdagNesteBarnsSak:d})=>{if(e.length===0)return[t];const a=t.tidsperiode.fom,u=t.tidsperiode.tom;if(E(a).isBefore(r,"day")&&E(u).isSameOrAfter(r,"day"))return[...e];const l=e.find(f=>F(f.tidsperiode).inneholderDato(a));if(l){if(Me(l)||Le(l))return[...e];const f=T(e).finnAlleForegåendePerioder(l),m=T(e).finnAllePåfølgendePerioder(l),c=F(t.tidsperiode).getAntallUttaksdager();if(E(l.tidsperiode.fom).isSame(a))return[...f,t,...T([l,...m]).forskyvPerioder(c)];const g=Ke(l,t);return ce(l)?[...f,g[0],g[1],...T([g[2],...m]).forskyvPerioder(c)]:[...f,...g,...T(m).forskyvPerioder(c)]}else{const f=e[0],m=e[e.length-1],c=E(t.tidsperiode.fom),g=E(t.tidsperiode.tom);if(c.isBefore(f.tidsperiode.fom,"day")){const k=de(t.tidsperiode,f.tidsperiode);if(g.isSameOrAfter(f.tidsperiode.fom,"day")){if(c.isBefore(r,"day"))return[...e];const S=be(f,t);return[t,...T(e).forskyvPerioder(S)]}return k?[t,...$(k,o,r,n,i,s,d),...e]:[t,...e]}else{const k=de(m.tidsperiode,t.tidsperiode);return k?[...e,...$(k,o,r,n,i,s,d),t]:[...e,t].sort(Z)}}},we=(e,t,r,o)=>{if(e.length<=1)return e;const n=[];let i={...e[0]};return e.forEach((s,d)=>{if(d!==0){if(i===void 0){i=s;return}if(H(i).erLik(s,!1,!0)&&H(i).erSammenhengende(s)){if(o&&G(s)&&s.ønskerSamtidigUttak&&G(i)&&i.ønskerSamtidigUttak){const u=T(o).finnOverlappendePerioder(i),l=T(o).finnOverlappendePerioder(s);if(l.length===0&&u.length>0||l.length>0&&u.length===0){n.push(i),i=s;return}}if(E(i.tidsperiode.tom).isBefore(t,"day")&&E(s.tidsperiode.tom).isSameOrAfter(v(t).denneEllerNeste())||r!==void 0&&E(i.tidsperiode.tom).isBefore(r,"day")&&E(s.tidsperiode.fom).isSameOrAfter(v(r).denneEllerNeste(),"day")){n.push(i),i=s;return}const a={fom:i.tidsperiode.fom,tom:s.tidsperiode.tom};i.tidsperiode={...a};return}else n.push(i);i=s}}),n.push(i),n},w=(e,t)=>t!==void 0&&W(e.tidsperiode,t)?pe(e,t):[e],$=(e,t,r,o,n,i,s,d=Fe.fridag)=>{if(B(r)){const l=v(r).denneEllerNeste(),f=v(l).leggTil(30),m=F(e).erInnenforFørsteSeksUker(r),c=E(e.fom).isBefore(f,"day")&&!o&&(n&&B(r)||i&&z(r));if(t&&!c)return w(j(e,d),s);if(E(e.fom).isBefore(r,"day"))return w(M(e),s);if(m&&!o){if(E(e.tom).isBefore(f,"day"))return n&&B(r)||i&&z(r)?[M(e)]:[j(e,d)];const g=F({fom:e.fom,tom:f}).getAntallUttaksdager()-2,k=F(e).getAntallUttaksdager()-g,S={fom:e.fom,tom:v(f).leggTil(-1)},K={fom:f,tom:v(f).leggTil(k-2)};if(n&&B(r)||i&&z(r)){if(i&&!n)return[M(e)];const De=M(S),Ne=j(K,d);return[De,Ne]}const q=j(S,d),Ie=M(K);return[q,Ie]}return w(M(e),s)}return w(j(e,d),s)},j=(e,t)=>({id:A.guid(),type:R.Hull,tidsperiode:e,årsak:t}),M=e=>({id:A.guid(),type:R.PeriodeUtenUttak,tidsperiode:e}),de=(e,t)=>{const r={fom:v(e.tom).neste(),tom:v(t.fom).forrige()},o=F(r).getAntallUttaksdager();if(x(r)&&o>0)return r},Rt=e=>e.reduce((t,r,o)=>o===0&&X(r)?t:o===e.length-1?(ge(r)||X(r)||t.push(r),t):(t.push(r),t),[]),ae=(e,t,r,o,n,i,s)=>e.length===0?e:e.reduce((a,u,l)=>{if(l===0&&i){const g=v(r).denneEllerNeste();if(E(g).isBefore(u.tidsperiode.fom)){const k={fom:g,tom:v(u.tidsperiode.fom).forrige()};F(k).getAntallUttaksdager()>0&&a.push(...$(k,t,r,o,n,i,s))}}if(a.push(u),l===e.length-1)return a;const f=e[l+1],m={fom:v(u.tidsperiode.tom).neste(),tom:v(f.tidsperiode.fom).forrige()};return E(m.tom).isBefore(m.fom,"day")||!i&&E(m.tom).isBefore(r,"day")||F(m).getAntallUttaksdager()>0&&a.push(...$(m,t,r,o,n,i,s)),a},[]),le=(e,t)=>{const r=t.filter(n=>F(e.tidsperiode).inneholderDato(n.dato)),o=[];return r.length===2?[e]:(r.forEach((n,i)=>{if(i===0){o.push({...e,tidsperiode:{fom:n.dato,tom:void 0}});return}o[i-1].tidsperiode.tom=n.erFom?v(n.dato).forrige():n.dato,i<r.length-1&&o.push({...e,id:A.guid(),tidsperiode:{fom:n.erFom?n.dato:v(n.dato).neste(),tom:void 0}})}),o.filter(n=>x(n.tidsperiode)))},Je=(e,t)=>{const r=e.filter(d=>x(d.tidsperiode)).reduce((d,a)=>(d.push({dato:a.tidsperiode.fom,erFom:!0}),d.push({dato:a.tidsperiode.tom,erFom:!1}),d),[]),o=t.reduce((d,a)=>(d.push({dato:a.tidsperiode.fom,erFom:!0}),d.push({dato:a.tidsperiode.tom,erFom:!1}),d),[]),n=r.concat(o).sort((d,a)=>{if(d.dato.getTime()-a.dato.getTime()===0){if(!d.erFom)return 1;if(!a.erFom)return-1}return d.dato.getTime()-a.dato.getTime()}),i=[],s=[];return e.forEach(d=>{const a=le(d,n);i.push(...a)}),t.forEach(d=>{const a=le(d,n);s.push(...a)}),{normaliserteEgnePerioder:i,normaliserteAnnenPartsPerioder:s}},Ye=(e,t,r,o,n=!1)=>{if(t.length===0)return e;if(e.length===0)return t;const{normaliserteEgnePerioder:i,normaliserteAnnenPartsPerioder:s}=Je(e,t),d=i.reduce((m,c)=>{const g=T(s).finnOverlappendePerioder(c);if(g.length===0)return G(c)&&c.ønskerSamtidigUttak&&n?(m.push({...c,ønskerSamtidigUttak:!1}),m):(m.push(c),m);if(X(c)||_e(c)||ge(c)){const k=g[0];return m.push({...k,visPeriodeIPlan:!0}),m}if(G(c)&&c.ønskerSamtidigUttak){const k=g[0];return m.push(c),ye(k)||m.push({...k,visPeriodeIPlan:!1,ønskerSamtidigUttak:!0}),m}else return m.push(c),m},[]);d.sort(Z);const a=e[0].tidsperiode.fom,u=s.filter(m=>E(m.tidsperiode.tom).isBefore(a,"day")),l=e[e.length-1].tidsperiode.tom,f=s.filter(m=>E(m.tidsperiode.fom).isAfter(l,"day"));return we([...u,...d,...f],r,o,t)},fe=e=>H(e).getAntallUttaksdager()>0,$e=e=>x(e.tidsperiode),xe=(e,t,r)=>{if(e.length<=1)return e;const o=[],n=e.filter(a=>V(a)),s=[...e.filter(a=>!V(a)),...n];let d={...s[0]};return s.forEach((a,u)=>{if(u!==0){if(d===void 0){d=a;return}if(H(d).erLik(a,!1,!0)&&H(d).erSammenhengende(a)&&!E(a.tidsperiode.fom).isSame(t,"day")&&!(r!==void 0&&E(a.tidsperiode.fom).isSame(r,"day"))){d.tidsperiode.tom=a.tidsperiode.tom;return}else o.push(d);d=a}}),o.push(d),o.sort(Z)},Ze=e=>{const{fom:t,tom:r}=e.tidsperiode,o=ne(t),n=ne(r);return o&&n?e:!o&&!n?{...e,tidsperiode:{fom:v(t).neste(),tom:v(r).forrige()}}:!o&&n?{...e,tidsperiode:{fom:v(t).neste(),tom:r}}:{...e,tidsperiode:{fom:t,tom:v(r).forrige()}}},y=(e,t)=>e.gjelderAnnenPart?t?b.mor:b.farMedmor:t?b.farMedmor:b.mor,Ae=e=>{switch(e){case U.Arbeid:return h.Arbeid;case U.Ferie:return h.Ferie;case U.InstitusjonBarnet:return h.InstitusjonBarnet;case U.InstitusjonSøker:return h.InstitusjonSøker;case U.Sykdom:return h.Sykdom;case U.HvØvelse:return h.HvØvelse;case U.NavTiltak:return h.NavTiltak;default:return}},qe=e=>{switch(e.kontoType){case p.Fedrekvote:return O.UttakFedrekvoteAnnenForelder;case p.Fellesperiode:return O.UttakFellesperiodeAnnenForelder;case p.Mødrekvote:return O.UttakMødrekvoteAnnenForelder;case p.Foreldrepenger:return O.UttakForeldrepengerAnnenForelder;case p.ForeldrepengerFørFødsel:return O.ForeldrepengerFørFødsel;default:return}},Se=(e,t,r)=>{if(e)return e.toString();if(t)return r?(100-r).toString():"100"},ze=e=>e?p.AktivitetsfriKvote:p.Foreldrepenger,Ce=(e,t,r,o)=>{if(e&&!t.flerbarnsdager&&!t.samtidigUttak&&E(t.periode.fom).isBefore(E(r).add(6,"weeks"),"day")&&o!==p.AktivitetsfriKvote&&t.morsAktivitet!==je.Uføre)return!0},Qe=(e,t,r)=>{var k;const o=e.gradering!==void 0&&e.resultat.innvilget,n=P(e.periode),i=t.søkerErFarEllerMedmor&&!t.morHarRett&&!t.farMedmorErAleneOmOmsorg&&!t.harAnnenForelderTilsvarendeRettEØS;if(e.gjelderAnnenPart)return re(e,t.søkerErFarEllerMedmor,r);const s=r!==void 0?r.find(S=>(F(P(S.periode)).erLik(n)||F(P(S.periode)).overlapper(n))&&S.guid!==e.guid):void 0;let d;s&&(d=s.samtidigUttak);const a=Se(e.samtidigUttak,d,(k=e.gradering)==null?void 0:k.arbeidstidprosent),{termindato:u,fødselsdato:l,omsorgsovertakelsesdato:f}=t,m=Ee(u,l,f),c=i?ze(e.resultat.trekkerMinsterett):e.kontoType;return{id:A.guid(),type:R.Uttak,konto:c,tidsperiode:n,forelder:y(e,t.søkerErFarEllerMedmor),ønskerSamtidigUttak:e.samtidigUttak!==void 0,gradert:o,samtidigUttakProsent:a,ønskerFlerbarnsdager:t.antallBarn>1?e.flerbarnsdager:void 0,stillingsprosent:o?e.gradering.arbeidstidprosent.toString():void 0,arbeidsformer:o?[nt(e.gradering.aktivitet.type)]:void 0,orgnumre:o&&e.gradering.aktivitet.arbeidsgiver!==void 0?[e.gradering.aktivitet.arbeidsgiver.id]:void 0,morsAktivitetIPerioden:e.morsAktivitet,erMorForSyk:Ce(t.søkerErFarEllerMedmor,e,m,c),angittAvAnnenPart:e.angittAvAnnenPart}},Xe=(e,t)=>e.gjelderAnnenPart?re(e,t):{id:A.guid(),type:R.Utsettelse,årsak:Ae(e.utsettelseÅrsak),tidsperiode:P(e.periode),forelder:y(e,t),erArbeidstaker:!1,morsAktivitetIPerioden:e.morsAktivitet},We=(e,t)=>({id:A.guid(),type:R.Info,infotype:ee.avslåttPeriode,tidsperiode:P(e.periode),avslåttPeriodeType:e.utsettelseÅrsak!==void 0?R.Utsettelse:R.Uttak,kontoType:e.kontoType,forelder:y(e,t),overskrives:!0,visPeriodeIPlan:!0}),re=(e,t,r)=>{var u;const o=P(e.periode);if(e.utsettelseÅrsak!==void 0&&e.resultat.innvilget===!0)return{type:R.Info,infotype:ee.utsettelseAnnenPart,id:A.guid(),årsak:Ae(e.utsettelseÅrsak),tidsperiode:o,forelder:y(e,t),overskrives:!0,visPeriodeIPlan:!0};const n=r!==void 0&&!r.some(l=>(F(P(l.periode)).erLik(o)||F(P(l.periode)).overlapper(o))&&l.guid!==e.guid),i=qe(e),s=r!==void 0?r.find(l=>(F(P(l.periode)).erLik(o)||F(P(l.periode)).overlapper(o))&&l.guid!==e.guid):void 0;let d;s&&(d=s.samtidigUttak);const a=Se(e.samtidigUttak,d,(u=e.gradering)==null?void 0:u.arbeidstidprosent);return{type:R.Info,infotype:ee.uttakAnnenPart,id:A.guid(),årsak:i,tidsperiode:o,forelder:y(e,t),overskrives:!0,gradert:e.gradering!==void 0,ønskerSamtidigUttak:a!==void 0,samtidigUttakProsent:a,stillingsprosent:e.gradering!==void 0?e.gradering.arbeidstidprosent.toString():void 0,visPeriodeIPlan:n}},et=(e,t)=>({id:A.guid(),forelder:y(e,t),konto:e.kontoType,tidsperiode:P(e.periode),type:R.Overføring,årsak:e.overføringÅrsak}),tt=(e,t,r)=>e.gjelderAnnenPart?re(e,t.søkerErFarEllerMedmor,r):e.resultat.innvilget?e.utsettelseÅrsak!==void 0?Xe(e,t.søkerErFarEllerMedmor):e.overføringÅrsak!==void 0?et(e,t.søkerErFarEllerMedmor):Qe(e,t,r):We(e,t.søkerErFarEllerMedmor),rt=e=>e.resultat.innvilget?!0:e.gjelderAnnenPart?!1:e.resultat.årsak!==ke.AVSLAG_HULL_MELLOM_FORELDRENES_PERIODER&&e.resultat.trekkerDager===!0,ot=(e,t,r)=>{const o=[];return e.forEach(n=>{W(n.tidsperiode,t)&&G(n)?Be(n,t).forEach(s=>o.push(s)):r!==void 0&&W(n.tidsperiode,r)?pe(n,r).forEach(s=>o.push(s)):o.push(n)}),o},Pe=(e,t,r)=>{const o=e.filter(rt),n=o.map(g=>tt(g,t,o)),i=new Date(t.familiehendelseDato),s=ot(n,i,r),d=xe([...s].sort(Z).filter(fe).map(Ze).filter($e).filter(fe),i,r),a=!t.morHarRett&&t.farMedmorHarRett&&!t.harAnnenForelderTilsvarendeRettEØS,u=t.familiehendelseType===N.ADOPSJON,l=d.filter(g=>!V(g)),f=d.filter(g=>V(g)),m=!t.erDeltUttak&&a&&!t.farMedmorErAleneOmOmsorg,c=ae(l,m,i,u,a,t.søkerErFarEllerMedmor,r);return ae(Ye(c,f,i,r),m,i,u,a,t.søkerErFarEllerMedmor,r)};var oe=(e=>(e.ÅTTI_PROSENT="ÅTTI",e.HUNDRE_PROSENT="HUNDRE",e))(oe||{}),L=(e=>(e.BARE_SØKER_RETT="BARE_SØKER_RETT",e.ALENEOMSORG="ALENEOMSORG",e.BEGGE_RETT="BEGGE_RETT",e))(L||{});const nt=e=>{switch(e){case te.SELVSTENDIG_NÆRINGSDRIVENDE:return Q.selvstendignæringsdrivende;case te.FRILANS:return Q.frilans;default:return Q.arbeidstaker}},me=e=>{switch(e){case D.UttakFedrekvoteAnnenForelder:return p.Fedrekvote;case D.UttakFellesperiodeAnnenForelder:return p.Fellesperiode;case D.UttakMødrekvoteAnnenForelder:return p.Mødrekvote;default:return}},it=e=>{switch(e){case D.UttakFedrekvoteAnnenForelder:return O.UttakFedrekvoteAnnenForelder;case D.UttakFellesperiodeAnnenForelder:return O.UttakFellesperiodeAnnenForelder;case D.UttakMødrekvoteAnnenForelder:return O.UttakMødrekvoteAnnenForelder;default:return}},Te=(e,t)=>{const{oppholdÅrsak:r}=e,o={guid:A.guid(),periode:{fom:e.fom,tom:e.tom},gjelderAnnenPart:t,resultat:e.resultat,kontoType:e.kontoType,flerbarnsdager:e.flerbarnsdager,gradering:e.gradering,utsettelseÅrsak:e.utsettelseÅrsak,overføringÅrsak:e.overføringÅrsak,samtidigUttak:e.samtidigUttak,morsAktivitet:e.morsAktivitet,oppholdÅrsak:it(e.oppholdÅrsak)};return r!==void 0&&t===!1&&(o.gjelderAnnenPart=!0,o.kontoType=me(r)),r!==void 0&&t&&(o.gjelderAnnenPart=!1,o.angittAvAnnenPart=!0,o.kontoType=me(r)),o},ue=e=>e.resultat.innvilget,Re=(e,t,r)=>{const o=r.filter(i=>e.guid!==i.guid&&F(P(e.periode)).erLik(P(i.periode)));if(o.length===0)return!0;const n=o.filter(ue);return!(ue(e)===!1&&n.length>0)},Ut=e=>{if(!(e===void 0||e===""||Object.keys(e).length===0||e.perioder.length===0))return I(e.perioder[0].fom)},Ot=(e,t,r,o,n)=>{if(e===void 0||e===""||Object.keys(e).length===0)return;const i=!0,s=e.perioder.map(m=>Te(m,i)).filter(Re);let d;e.termindato!==void 0?d=e.termindato:(se(t)||Ge(t))&&t.termindato!==void 0&&(d=C.dateToISOString(t.termindato));const a=se(t)?C.dateToISOString(t.fødselsdatoer[0]):void 0,u=He(t)?C.dateToISOString(t.adopsjonsdato):void 0,l={dekningsgrad:e.dekningsgrad===oe.HUNDRE_PROSENT?J.HUNDRE_PROSENT:J.ÅTTI_PROSENT,antallBarn:e.antallBarn?e.antallBarn:t.antallBarn,morErAleneOmOmsorg:!1,morErUfør:!1,morHarRett:!0,farMedmorErAleneOmOmsorg:!1,farMedmorHarRett:!0,søkerErFarEllerMedmor:r,termindato:d,fødselsdato:a,omsorgsovertakelsesdato:u,erDeltUttak:!0,erBarnetFødt:a!==void 0,familiehendelseDato:o,familiehendelseType:ve(a,d,u),harAnnenForelderTilsvarendeRettEØS:!1,ønskerJustertUttakVedFødsel:void 0,barn:[]},f=Pe(s,l,n);return{saksnummer:"",erAnnenPartsSak:i,grunnlag:l,saksperioder:s,uttaksplan:f.filter(m=>V(m))}},st=(e,t)=>{if(e===void 0||e===""||Object.keys(e).length===0)return;const r=!1,{dekningsgrad:o,familiehendelse:{fødselsdato:n,termindato:i,omsorgsovertakelse:s,antallBarn:d},harAnnenForelderTilsvarendeRettEØS:a,morUføretrygd:u,rettighetType:l,sakTilhørerMor:f,ønskerJustertUttakVedFødsel:m}=e,c=e.gjeldendeVedtak?e.gjeldendeVedtak.perioder:[],g=!f,k={dekningsgrad:o===oe.HUNDRE_PROSENT?J.HUNDRE_PROSENT:J.ÅTTI_PROSENT,antallBarn:d,morErAleneOmOmsorg:f&&l===L.ALENEOMSORG,morErUfør:u,morHarRett:f||l===L.BEGGE_RETT,farMedmorErAleneOmOmsorg:!f&&l===L.ALENEOMSORG,farMedmorHarRett:!f||l===L.BEGGE_RETT,søkerErFarEllerMedmor:g,termindato:i,fødselsdato:n,omsorgsovertakelsesdato:s,erDeltUttak:l===L.BEGGE_RETT,erBarnetFødt:n!==void 0,familiehendelseDato:Ee(i,n,s),familiehendelseType:ve(n,i,s),ønskerJustertUttakVedFødsel:n===void 0?m:void 0,harAnnenForelderTilsvarendeRettEØS:a},S=c.map(q=>Te(q,r)).filter(Re),K=Pe(S,k,t);return{saksnummer:e.saksnummer,erAnnenPartsSak:r,grunnlag:k,saksperioder:S,uttaksplan:K}},Ue=e=>e===N.TERM||e===N.FØDSEL?"fødsel":"adopsjon",dt=(e,t)=>({erAleneOmOmsorg:t?e.farMedmorErAleneOmOmsorg:e.morErAleneOmOmsorg}),at=(e,t,r)=>{const{søkerErFarEllerMedmor:o}=r,n=e.kjønn==="K";switch(t){case"fødsel":case"adopsjon":return n?o?"medmor":"mor":"far";default:return}},lt=(e,t,r)=>{switch(e){case"fødsel":return t.fødselsdato?{type:_.FØDT,antallBarn:t.antallBarn,fødselsdatoer:[I(t.fødselsdato)],termindato:t.termindato?I(t.termindato):void 0,fnr:r}:{type:_.UFØDT,antallBarn:t.antallBarn,termindato:I(t.termindato),terminbekreftelse:[]};case"adopsjon":return{type:_.ADOPTERT_STEBARN,adopsjonsdato:I(t.omsorgsovertakelsesdato),antallBarn:t.antallBarn,fødselsdatoer:t.fødselsdato!==void 0?[I(t.fødselsdato)]:[],omsorgsovertakelse:[],fnr:r};default:return}},ft=(e,t,r,o,n)=>{switch(e){case"fødsel":case"adopsjon":return o?{fornavn:r.fornavn!==void 0&&r.fornavn!==""?r.fornavn:Y(n,"annen.forelder"),etternavn:r.etternavn,erUfør:t.morErUfør,harRettPåForeldrepengerINorge:!!t.morHarRett&&!t.harAnnenForelderTilsvarendeRettEØS,fnr:r.fnr,kanIkkeOppgis:!1,harRettPåForeldrepengerIEØS:t.harAnnenForelderTilsvarendeRettEØS}:{fornavn:r.fornavn!==void 0&&r.fornavn!==""?r.fornavn:Y(n,"annen.forelder"),etternavn:r.etternavn,harRettPåForeldrepengerINorge:!!t.farMedmorHarRett&&!t.harAnnenForelderTilsvarendeRettEØS,fnr:r.fnr,kanIkkeOppgis:!1,harRettPåForeldrepengerIEØS:t.harAnnenForelderTilsvarendeRettEØS};default:return}},mt=(e,t,r,o,n,i,s)=>{var l;if(i===void 0&&t===void 0||!s)return;const d=i!==void 0?e.find(f=>i.includes(f.fnr)&&f.annenForelder!==void 0):void 0,a=t!==void 0?e.filter(f=>Ve(f.fødselsdato,t)&&f.annenForelder!==void 0):[],u=d||a.length>0?a[0]:void 0;if(u!==void 0&&((l=u.annenForelder)==null?void 0:l.fnr)===s){const f=u.annenForelder,{fornavn:m}=f,c=m!==void 0&&m.trim()!==""?m:Y(n,"annen.forelder"),g={...f,fornavn:c};return ft(o,r,g,r.søkerErFarEllerMedmor,n)}},Oe=e=>e.fødselsdatoer!==void 0&&e.fødselsdatoer.length>0?{type:_.FØDT,antallBarn:e.antallBarn,fødselsdatoer:[ie(e.fødselsdatoer)],fnr:e.fnr!==void 0&&e.fnr.length>0?e.fnr.filter(t=>!!t):void 0}:e.termindato!==void 0?{type:_.UFØDT,antallBarn:e.antallBarn,termindato:e.termindato}:{type:_.IKKE_UTFYLT,antallBarn:e.antallBarn,fødselsdatoer:[ie(e.fødselsdatoer)],fnr:e.fnr!==void 0&&e.fnr.length>0?e.fnr.filter(t=>!!t):void 0},ut=e=>{if(e.annenForelder!==void 0)return{fornavn:e.annenForelder.fornavn,etternavn:e.annenForelder.etternavn,fnr:e.annenForelder.fnr,kanIkkeOppgis:!1}},ht=e=>{const t=Oe(e),r=ut(e);return{barn:t,annenForelder:r,erEndringssøknad:!1}},he=(e,t,r,o,n,i)=>{const s=t!==void 0?t.fnr:void 0,d={fornavn:Y(e,"annen.forelder"),etternavn:"",fnr:s||"",harRettPåForeldrepengerINorge:r.søkerErFarEllerMedmor?!!r.morHarRett&&!r.harAnnenForelderTilsvarendeRettEØS:!!r.farMedmorHarRett&&!r.harAnnenForelderTilsvarendeRettEØS,harRettPåForeldrepengerIEØS:r.harAnnenForelderTilsvarendeRettEØS,kanIkkeOppgis:!1,erUfør:r.søkerErFarEllerMedmor?r.morErUfør:void 0};return mt(o.registrerteBarn,I(r.fødselsdato),r,n,e,i,s)||d},It=(e,t,r)=>{var u;const o=st(e.sak,void 0),{grunnlag:n}=o,i=Ue(n.familiehendelseType),s=Oe(e),d=he(t,(u=e.sak)==null?void 0:u.annenPart,n,r,i,e.fnr),a={barn:s,annenForelder:d,erEndringssøknad:!1};if(e.sak!==void 0){const l={situasjon:e.sak.gjelderAdopsjon?"adopsjon":"fødsel",rolle:e.sak.sakTilhørerMor?void 0:"far"};a.søkersituasjon=l}return a},Dt=(e,t,r,o,n)=>{const{grunnlag:i,uttaksplan:s}=t,{dekningsgrad:d,familiehendelseType:a,søkerErFarEllerMedmor:u,ønskerJustertUttakVedFødsel:l}=i,f=Ue(a);if(!f)return;const m=dt(i,u),c=lt(f,i,n),g=at(e.person,f,i);if(!c||!g)return;const k=he(r,o,i,e,f,n);return{søker:m,søkersituasjon:{situasjon:f,rolle:g},barn:c,annenForelder:k,erEndringssøknad:!0,dekningsgrad:d,uttaksplan:s,saksnummer:t.saksnummer,ønskerJustertUttakVedFødsel:l}};export{oe as D,L as R,Ye as a,Rt as b,Be as c,pe as d,Ut as e,ae as f,$ as g,st as h,It as i,ht as j,Tt as l,Ot as m,Je as n,Dt as o,we as s};
//# sourceMappingURL=eksisterendeSakUtils-537f1352.js.map
