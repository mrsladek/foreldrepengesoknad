import{i as ee}from"./AnnenForelder-5c5d4f7f.js";import{ap as Ae,aK as W,$ as De,d as Ie,P as k,f as Ue,u as Fe,U as te,F as H,aL as ve,i as Oe,A as q,S as D,O as Pe,R as X,aM as B,C as we,b as Le,B as Be,aN as Me}from"./periodeUtils-f04fe3f4.js";import{b as se,e as ne,a as He,i as Ge,l as je}from"./useSøknad-e0725e39.js";import{a as Ye}from"./globalUtil-9d9e0ee4.js";import{g as S,r as re,m as ie,i as qe,c as Ve}from"./vedleggUtils-7804bea0.js";import{h as Ce,d as U,l as oe}from"./validationUtils-67294d5c.js";import{s as Je,u as xe,a as $e}from"./mapSøkerinfoDTO-f7746f82.js";import{r as g}from"./index-f1f749bf.js";import{E as ae}from"./FormikFileInput-1aab3cd0.js";import"./jsx-runtime-670450c2.js";import"./index-7e4e529b.js";const V=()=>{window.location.href=ae.LOGIN_URL+"?redirect="+window.location.origin};var l=(t=>(t.UNFETCHED="Unfetched",t.IN_PROGRESS="InProgress",t.FINISHED="Finished",t))(l||{});const de={config:{},isSuspended:!1},P=(t,e=de)=>{const[s,n]=g.useState(),[r,i]=g.useState(null),[o,a]=g.useState(l.UNFETCHED),d=e.fnr?S(e.fnr):S();return g.useEffect(()=>{!e.isSuspended&&o===l.UNFETCHED&&(a(l.IN_PROGRESS),d.get(t,e.config).then(c=>{c.data===""?n(void 0):n(c.data),a(l.FINISHED)}).catch(c=>{c.response&&(c.response.status===401||c.response.status===403)?V():i(c),a(l.FINISHED)}))},[e,t,d,o]),{data:s,error:r,requestStatus:o}},Ke=(t,e,s=de)=>{const[n,r]=g.useState(),[i,o]=g.useState(null),[a,d]=g.useState(l.UNFETCHED),c=s.fnr?S(s.fnr):S();return g.useEffect(()=>{!s.isSuspended&&a===l.UNFETCHED&&(d(l.IN_PROGRESS),c.post(t,e,s.config).then(u=>{u.data===""?r(void 0):r(u.data),d(l.FINISHED)}).catch(u=>{u.response&&(u.response.status===401||u.response.status===403)?V():o(u),d(l.FINISHED)}))},[s,t,c,a,e]),{data:n,error:i,requestStatus:a}},We=(t,e)=>Ae.isISODateString(e)?e:!Array.isArray(e)&&W(e,[W.HTML5_FMT.DATE,"YYYY-MM-DDTHH:mm:ss.SSSZ"],!0).isValid()?new Date(e):e,Xe=t=>{if(t)return JSON.parse(t,We)},I=(t,e)=>Ce(t)?De(t,e):void 0,Ze=ae.UTTAK_API_URL,Qe="/soknad",ze="/soknad/endre",et=()=>{const{data:t,error:e}=P("/sokerinfo",{config:{withCredentials:!0}});return{søkerinfoData:t,søkerinfoError:e}},tt=()=>{const{data:t,error:e}=P("/innsyn/v2/saker",{config:{withCredentials:!0}});return{sakerData:t,sakerError:e}},st=(t,e,s,n)=>{const r={annenPartFødselsnummer:t,barnFødselsnummer:e,familiehendelse:s},{data:i,error:o,requestStatus:a}=Ke("/innsyn/v2/annenPartVedtak",r,{config:{withCredentials:!0},isSuspended:n});return o&&o.message.includes("Ugyldig ident")?{eksisterendeSakAnnenPartData:void 0,eksisterendeSakAnnenPartError:void 0,eksisterendeSakAnnenPartRequestStatus:l.FINISHED}:{eksisterendeSakAnnenPartData:i,eksisterendeSakAnnenPartError:o,eksisterendeSakAnnenPartRequestStatus:a}},nt=()=>{const{data:t,error:e}=P("/storage",{config:{transformResponse:Xe,withCredentials:!0}});return{storageData:t,storageError:e}},rt=(t,e)=>{const{søknad:s,version:n,currentRoute:r,uttaksplanInfo:i,antallUkerIUttaksplan:o,eksisterendeSak:a,endringstidspunkt:d,harAnnenPartEksisterendeSak:c,harEksisterendeSak:u,perioderSomSkalSendesInn:y,harUttaksplanBlittSlettet:b,søknadGjelderEtNyttBarn:T,barnFraNesteSak:N,brukerSvarteJaPåAutoJustering:R,annenPartsUttakErLagtTilIPlan:E}=t;return S(e).post("/storage",{søknad:s,version:n,currentRoute:r,uttaksplanInfo:i,antallUkerIUttaksplan:o,eksisterendeSak:a,endringstidspunkt:d,harAnnenPartEksisterendeSak:c,harEksisterendeSak:u,perioderSomSkalSendesInn:y,harUttaksplanBlittSlettet:b,søknadGjelderEtNyttBarn:T,barnFraNesteSak:N,brukerSvarteJaPåAutoJustering:R,annenPartsUttakErLagtTilIPlan:E},{withCredentials:!0})},it=t=>S(t).delete("/storage",{withCredentials:!0}),ot=t=>S(t).get("/storage/kvittering/foreldrepenger",{withCredentials:!0,timeout:15*1e3}),at=(t,e=!1)=>{const{antallBarn:s,farHarRettINorge:n,morHarRettINorge:r,harAnnenForelderTilsvarendeRettEØS:i,dekningsgrad:o,fødselsdato:a,termindato:d,omsorgsovertakelsesdato:c,morHarAleneomsorg:u,farHarAleneomsorg:y,startdatoUttak:b,minsterett:T,erMor:N,morHarUføretrygd:R,familieHendelseDatoNesteSak:E}=t,A="YYYYMMDD",Te={farHarRett:n,morHarRett:r,harAnnenForelderTilsvarendeRettEØS:i,morHarAleneomsorg:u||!1,farHarAleneomsorg:y||!1,dekningsgrad:o,antallBarn:s,fødselsdato:I(a,A),termindato:I(d,A),omsorgsovertakelseDato:I(c,A),startdatoUttak:I(b,A),minsterett:T,erMor:N,morHarUføretrygd:R,familieHendelseDatoNesteSak:I(E,A)},{data:Ne,error:Re}=P(`${Ze}/konto`,{config:{timeout:15*1e3,params:Te,withCredentials:!1},isSuspended:e});return{tilgjengeligeStønadskontoerData:Ne,tilgjengeligeStønadskontoerError:Re}};function dt(t,e){const s=t.erEndringssøknad?ze:Qe;return S(e).post(s,t,{withCredentials:!0,timeout:120*1e3,headers:{"content-type":"application/json;"}})}const ct={useGetUttakskontoer:at,storeAppState:rt,deleteStoredAppState:it,getStorageKvittering:ot,useGetAnnenPartsVedtak:st,useStoredAppState:nt,useSøkerinfo:et,sendSøknad:dt,useGetSaker:tt},ut=Object.prototype.toString;function lt(t,e){return ut.call(t)===`[object ${e}]`}function ce(t){return lt(t,"Object")}function ue(t){return!!(t&&t.then&&typeof t.then=="function")}function O(t){return t&&t.Math==Math?t:void 0}const _=typeof globalThis=="object"&&O(globalThis)||typeof window=="object"&&O(window)||typeof self=="object"&&O(self)||typeof global=="object"&&O(global)||function(){return this}()||{};function ft(){return _}function C(t,e,s){const n=s||_,r=n.__SENTRY__=n.__SENTRY__||{};return r[t]||(r[t]=e())}const gt="Sentry Logger ",G=["debug","info","warn","error","log","assert","trace"];function le(t){if(!("console"in _))return t();const e=_.console,s={};G.forEach(n=>{const r=e[n]&&e[n].__sentry_original__;n in e&&r&&(s[n]=e[n],e[n]=r)});try{return t()}finally{Object.keys(s).forEach(n=>{e[n]=s[n]})}}function Z(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?G.forEach(s=>{e[s]=(...n)=>{t&&le(()=>{_.console[s](`${gt}[${s}]:`,...n)})}}):G.forEach(s=>{e[s]=()=>{}}),e}let v;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?v=C("logger",Z):v=Z();function _t(t){return j(t,new Map)}function j(t,e){if(ce(t)){const s=e.get(t);if(s!==void 0)return s;const n={};e.set(t,n);for(const r of Object.keys(t))typeof t[r]<"u"&&(n[r]=j(t[r],e));return n}if(Array.isArray(t)){const s=e.get(t);if(s!==void 0)return s;const n=[];return e.set(t,n),t.forEach(r=>{n.push(j(r,e))}),n}return t}function F(){const t=_,e=t.crypto||t.msCrypto;if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");const s=e&&e.getRandomValues?()=>e.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,n=>(n^(s()&15)>>n/4).toString(16))}function ht(t){return Array.isArray(t)?t:[t]}function pt(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function fe(){return!pt()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function St(t,e){return t.require(e)}var h;(function(t){t[t.PENDING=0]="PENDING";const s=1;t[t.RESOLVED=s]="RESOLVED";const n=2;t[t.REJECTED=n]="REJECTED"})(h||(h={}));class f{__init(){this._state=h.PENDING}__init2(){this._handlers=[]}constructor(e){f.prototype.__init.call(this),f.prototype.__init2.call(this),f.prototype.__init3.call(this),f.prototype.__init4.call(this),f.prototype.__init5.call(this),f.prototype.__init6.call(this);try{e(this._resolve,this._reject)}catch(s){this._reject(s)}}then(e,s){return new f((n,r)=>{this._handlers.push([!1,i=>{if(!e)n(i);else try{n(e(i))}catch(o){r(o)}},i=>{if(!s)r(i);else try{n(s(i))}catch(o){r(o)}}]),this._executeHandlers()})}catch(e){return this.then(s=>s,e)}finally(e){return new f((s,n)=>{let r,i;return this.then(o=>{i=!1,r=o,e&&e()},o=>{i=!0,r=o,e&&e()}).then(()=>{if(i){n(r);return}s(r)})})}__init3(){this._resolve=e=>{this._setResult(h.RESOLVED,e)}}__init4(){this._reject=e=>{this._setResult(h.REJECTED,e)}}__init5(){this._setResult=(e,s)=>{if(this._state===h.PENDING){if(ue(s)){s.then(this._resolve,this._reject);return}this._state=e,this._value=s,this._executeHandlers()}}}__init6(){this._executeHandlers=()=>{if(this._state===h.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(s=>{s[0]||(this._state===h.RESOLVED&&s[1](this._value),this._state===h.REJECTED&&s[2](this._value),s[0]=!0)})}}}const ge=ft(),Y={nowSeconds:()=>Date.now()/1e3};function mt(){const{performance:t}=ge;if(!t||!t.now)return;const e=Date.now()-t.now();return{now:()=>t.now(),timeOrigin:e}}function Et(){try{return St(module,"perf_hooks").performance}catch{return}}const M=fe()?Et():mt(),Q=M===void 0?Y:{nowSeconds:()=>(M.timeOrigin+M.now())/1e3},_e=Y.nowSeconds.bind(Y),he=Q.nowSeconds.bind(Q);(()=>{const{performance:t}=ge;if(!t||!t.now)return;const e=3600*1e3,s=t.now(),n=Date.now(),r=t.timeOrigin?Math.abs(t.timeOrigin+s-n):e,i=r<e,o=t.timing&&t.timing.navigationStart,d=typeof o=="number"?Math.abs(o+s-n):e,c=d<e;return i||c?r<=d?t.timeOrigin:o:n})();const kt="production";function yt(t){const e=he(),s={sid:F(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Tt(s)};return t&&w(s,t),s}function w(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||he(),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:F()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const s=t.timestamp-t.started;t.duration=s>=0?s:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function bt(t,e){let s={};e?s={status:e}:t.status==="ok"&&(s={status:"exited"}),w(t,s)}function Tt(t){return _t({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const Nt=100;class m{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={}}static clone(e){const s=new m;return e&&(s._breadcrumbs=[...e._breadcrumbs],s._tags={...e._tags},s._extra={...e._extra},s._contexts={...e._contexts},s._user=e._user,s._level=e._level,s._span=e._span,s._session=e._session,s._transactionName=e._transactionName,s._fingerprint=e._fingerprint,s._eventProcessors=[...e._eventProcessors],s._requestSession=e._requestSession,s._attachments=[...e._attachments],s._sdkProcessingMetadata={...e._sdkProcessingMetadata}),s}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{},this._session&&w(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,s){return this._tags={...this._tags,[e]:s},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,s){return this._extra={...this._extra,[e]:s},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,s){return s===null?delete this._contexts[e]:this._contexts[e]=s,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this.getSpan();return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){const s=e(this);return s instanceof m?s:this}return e instanceof m?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession)):ce(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this}addBreadcrumb(e,s){const n=typeof s=="number"?s:Nt;if(n<=0)return this;const r={timestamp:_e(),...e};return this._breadcrumbs=[...this._breadcrumbs,r].slice(-n),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(e,s={}){if(this._extra&&Object.keys(this._extra).length&&(e.extra={...this._extra,...e.extra}),this._tags&&Object.keys(this._tags).length&&(e.tags={...this._tags,...e.tags}),this._user&&Object.keys(this._user).length&&(e.user={...this._user,...e.user}),this._contexts&&Object.keys(this._contexts).length&&(e.contexts={...this._contexts,...e.contexts}),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts={trace:this._span.getTraceContext(),...e.contexts};const n=this._span.transaction&&this._span.transaction.name;n&&(e.tags={transaction:n,...e.tags})}return this._applyFingerprint(e),e.breadcrumbs=[...e.breadcrumbs||[],...this._breadcrumbs],e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...this._sdkProcessingMetadata},this._notifyEventProcessors([...Rt(),...this._eventProcessors],e,s)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}_notifyEventProcessors(e,s,n,r=0){return new f((i,o)=>{const a=e[r];if(s===null||typeof a!="function")i(s);else{const d=a({...s},n);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&a.id&&d===null&&v.log(`Event processor "${a.id}" dropped event`),ue(d)?d.then(c=>this._notifyEventProcessors(e,c,n,r+1).then(i)).then(null,o):this._notifyEventProcessors(e,d,n,r+1).then(i).then(null,o)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}_applyFingerprint(e){e.fingerprint=e.fingerprint?ht(e.fingerprint):[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}}function Rt(){return C("globalEventProcessors",()=>[])}const J=4,At=100;class x{constructor(e,s=new m,n=J){this._version=n,this._stack=[{scope:s}],e&&this.bindClient(e)}isOlderThan(e){return this._version<e}bindClient(e){const s=this.getStackTop();s.client=e,e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=m.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const s=this.pushScope();try{e(s)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,s){const n=this._lastEventId=s&&s.event_id?s.event_id:F(),r=new Error("Sentry syntheticException");return this._withClient((i,o)=>{i.captureException(e,{originalException:e,syntheticException:r,...s,event_id:n},o)}),n}captureMessage(e,s,n){const r=this._lastEventId=n&&n.event_id?n.event_id:F(),i=new Error(e);return this._withClient((o,a)=>{o.captureMessage(e,s,{originalException:e,syntheticException:i,...n,event_id:r},a)}),r}captureEvent(e,s){const n=s&&s.event_id?s.event_id:F();return e.type||(this._lastEventId=n),this._withClient((r,i)=>{r.captureEvent(e,{...s,event_id:n},i)}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,s){const{scope:n,client:r}=this.getStackTop();if(!r)return;const{beforeBreadcrumb:i=null,maxBreadcrumbs:o=At}=r.getOptions&&r.getOptions()||{};if(o<=0)return;const d={timestamp:_e(),...e},c=i?le(()=>i(d,s)):d;c!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",c,s),n.addBreadcrumb(c,o))}setUser(e){this.getScope().setUser(e)}setTags(e){this.getScope().setTags(e)}setExtras(e){this.getScope().setExtras(e)}setTag(e,s){this.getScope().setTag(e,s)}setExtra(e,s){this.getScope().setExtra(e,s)}setContext(e,s){this.getScope().setContext(e,s)}configureScope(e){const{scope:s,client:n}=this.getStackTop();n&&e(s)}run(e){const s=z(this);try{e(this)}finally{z(s)}}getIntegration(e){const s=this.getClient();if(!s)return null;try{return s.getIntegration(e)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&v.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,s){return this._callExtensionMethod("startTransaction",e,s)}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const s=this.getStackTop().scope,n=s.getSession();n&&bt(n),this._sendSessionUpdate(),s.setSession()}startSession(e){const{scope:s,client:n}=this.getStackTop(),{release:r,environment:i=kt}=n&&n.getOptions()||{},{userAgent:o}=_.navigator||{},a=yt({release:r,environment:i,user:s.getUser(),...o&&{userAgent:o},...e}),d=s.getSession&&s.getSession();return d&&d.status==="ok"&&w(d,{status:"exited"}),this.endSession(),s.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),s=e&&e.getOptions();return!!(s&&s.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:s}=this.getStackTop(),n=e.getSession();n&&s&&s.captureSession&&s.captureSession(n)}_withClient(e){const{scope:s,client:n}=this.getStackTop();n&&e(n,s)}_callExtensionMethod(e,...s){const r=L().__SENTRY__;if(r&&r.extensions&&typeof r.extensions[e]=="function")return r.extensions[e].apply(this,s);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&v.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function L(){return _.__SENTRY__=_.__SENTRY__||{extensions:{},hub:void 0},_}function z(t){const e=L(),s=p(e);return K(e,t),s}function $(){const t=L();return(!pe(t)||p(t).isOlderThan(J))&&K(t,new x),fe()?Dt(t):p(t)}function Dt(t){try{const e=L().__SENTRY__,s=e&&e.extensions&&e.extensions.domain&&e.extensions.domain.active;if(!s)return p(t);if(!pe(s)||p(s).isOlderThan(J)){const n=p(t).getStackTop();K(s,new x(n.client,m.clone(n.scope)))}return p(s)}catch{return p(t)}}function pe(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function p(t){return C("hub",()=>new x,t)}function K(t,e){if(!t)return!1;const s=t.__SENTRY__=t.__SENTRY__||{};return s.hub=e,!0}function as(t,e){return $().captureException(t,{captureContext:e})}function It(t,e){const s=typeof e=="string"?e:void 0,n=typeof e!="string"?{captureContext:e}:void 0;return $().captureMessage(t,s,n)}function ds(t){$().withScope(t)}const cs="Søknaden kan ikke inneholde flere enn 40 vedlegg. Vennligst gå tilbake, slett noen vedlegg og prøv å sende inn søknaden på nytt. Du kan ettersende vedlegg senere.",us="Det har oppstått et problem med innsending av søknaden. Vennligst prøv igjen senere. Hvis problemet vedvarer, kontakt oss og oppgi feil id: ",Ut="ukjent uuid",Ft=(t,e,s)=>{const n=jt(vt(t));return ve(e,s,t.tidsperiode.fom)?{...n,justeresVedFødsel:!0}:n},vt=t=>{const{erMorForSyk:e,...s}=t;return s},Ot=t=>t.type!==k.Hull,Pt=t=>t.type!==k.Info,wt=t=>t.type!==k.PeriodeUtenUttak,Lt=t=>Oe(t)?!t.skalIkkeHaUttakFørTermin:Ot(t)&&Pt(t)&&wt(t)&&!(q(t)&&t.konto===void 0),Se=(t,e=!1)=>{if(ee(t)){const{erUfør:s,erForSyk:n,harRettPåForeldrepengerINorge:r,harRettPåForeldrepengerIEØS:i,harOppholdtSegIEØS:o,...a}=t,d={harMorUføretrygd:s,harRettPåForeldrepenger:r,...a};return r?{...d,erInformertOmSøknaden:!0}:o?{...d,harAnnenForelderOppholdtSegIEØS:o,harAnnenForelderTilsvarendeRettEØS:i}:e?{...d,harAnnenForelderTilsvarendeRettEØS:i}:{...d,harAnnenForelderOppholdtSegIEØS:o}}return t},Bt=t=>{if(He(t)){const{datoForAleneomsorg:r,type:i,fnr:o,...a}=t;return a}if(Ge(t)){const{datoForAleneomsorg:r,type:i,fnr:o,...a}=t;return{adopsjonAvEktefellesBarn:je(t),...a}}const{datoForAleneomsorg:e,type:s,...n}=t;return n},Mt=t=>{switch(t){case"mor":return"MOR";case"far":return"FAR";case"medmor":return"MEDMOR";default:return Ye(t,"Søkerrolle er ikke satt")}},Ht=(t,e,s,n,r)=>(q(t)&&(t.konto===D.Flerbarnsdager&&(t.konto=e?D.Fellesperiode:D.Foreldrepenger),t.konto===D.AktivitetsfriKvote&&(t.konto=D.Foreldrepenger,n&&!e&&Pe(r)?t.morsAktivitetIPerioden=X.IkkeOppgitt:s&&(t.morsAktivitetIPerioden=X.Uføre))),t),Gt=t=>{if(t!==void 0&&t.length>0){const e=t[0];return{erArbeidstaker:e===B.arbeidstaker,erFrilanser:e===B.frilans,erSelvstendig:e===B.selvstendignæringsdrivende}}else return{}},jt=t=>t.gradert?{...t,...Gt(t.arbeidsformer)}:t,me=(t,e,s,n,r,i,o)=>{const a=t.filter(d=>Ie(d.tidsperiode)).filter(Lt).map(d=>i&&ee(i)?Ht(d,!!i.harRettPåForeldrepengerINorge,!!i.erUfør,s,e):d).map(d=>d.type===k.Uttak?Ft(d,n,r):d);return o&&Ue(e)&&!Yt(a,o)?qt(a,o):a},Yt=(t,e)=>t.find(s=>U(e).isBetween(s.tidsperiode.fom,s.tidsperiode.tom,"day","[]")),qt=(t,e)=>{const s=t.find(i=>U(i.tidsperiode.fom).isAfter(e,"day")),n=s?Fe(s.tidsperiode.fom).forrige():e,r={type:k.Utsettelse,årsak:te.Fri,id:oe.guid(),tidsperiode:{fom:e,tom:n},erArbeidstaker:!1,forelder:H.farMedmor};return t.push(r),t.sort(Je),t},Vt=(t,e)=>{const{søker:s,barn:n,annenForelder:r,søkersituasjon:i,tilleggsopplysninger:o,uttaksplan:a,...d}=t,c=Se(r),u=Ee(s,t.søkersituasjon),y=Bt(n),b=se(t.søkersituasjon.rolle),T=ne(t.barn),N=me(a,e,b,t.ønskerJustertUttakVedFødsel,T,r),R=ye(t.tilleggsopplysninger),E={søker:u,barn:y,situasjon:t.søkersituasjon.situasjon,annenForelder:c,uttaksplan:N,tilleggsopplysninger:R,...d};return re(E.uttaksplan),ie(E)},Ee=(t,e)=>{const s=t.språkkode==="nb"?"NB":"NN",n=Mt(e.rolle);return{...t,rolle:n,språkkode:s}},ls=(t,e,s,n)=>{const r=JSON.parse(JSON.stringify(t));return r.erEndringssøknad?Ct(r,e,s,r.ønskerJustertUttakVedFødsel,n):Vt(r,s)},ke=t=>{const e=[];return t==null||Object.keys(t).forEach(s=>{if(typeof t[s]=="object")if(qe(t[s])){const n=[...Ve(t[s])];e.push(...n),t[s]=t[s].filter(r=>n.includes(r)).map(r=>r.id)}else e.push(...ke(t[s]))}),e},Ct=(t,e,s,n,r)=>{const i=se(t.søkersituasjon.rolle),o=ne(t.barn),a={erEndringssøknad:!0,saksnummer:t.saksnummer,type:t.type,uttaksplan:me(e,s,i,n,o,t.annenForelder,r),vedlegg:ke({søknad:t}),søker:Ee(t.søker,t.søkersituasjon),annenForelder:Se(t.annenForelder,!0),barn:t.barn,dekningsgrad:t.dekningsgrad,situasjon:t.søkersituasjon.situasjon,tilleggsopplysninger:ye(t.tilleggsopplysninger),ønskerJustertUttakVedFødsel:t.ønskerJustertUttakVedFødsel};return re(a.uttaksplan),ie(a)},ye=t=>{var s;const e=(s=t.begrunnelseForSenEndring)==null?void 0:s.tekst;if(e!==void 0&&e.length>0)return e},fs=t=>{const e=Jt(t)+". ",s=xt(t)+". ",n=i=>i.replace(/\d/g,"*").slice(0,250)+"...";let r=e+s;t.request&&t.request.data&&t.request.data.messages?r=r+n(t.request.data.messages):t.response&&t.response.data&&t.response.data.messages&&(r=r+n(t.response.data.messages)),t.message&&(r=r+t.message),It(r)},Jt=t=>t.response&&t.response.data&&t.response.data.uuid?t.response.data.uuid:Ut,xt=t=>t.response&&t.response.data&&t.response.data.timestamp?t.response.data.timestamp:"",$t=t=>ct.storeAppState(t,t.søkerinfo.person.fnr),be=t=>q(t)||we(t)||Le(t)||Be(t),gs=(t,e,s,n,r)=>n?e?Wt(n,t,r,s):t.filter(be):t,Kt=(t,e,s,n)=>{const r=e.filter(i=>Me(s,i.tidsperiode.fom,i.tidsperiode.tom)||U(i.tidsperiode.fom).isSameOrAfter(U(s),"day")).filter(be);if(r.length===0&&t.length>e.length){const i=t.find(a=>U(a.tidsperiode.fom).isSame(s,"day"));return[{id:oe.guid(),type:k.Utsettelse,tidsperiode:{fom:i.tidsperiode.fom,tom:i.tidsperiode.tom},årsak:te.Fri,forelder:n?H.farMedmor:H.mor,erArbeidstaker:!1}]}else return r},Wt=(t,e,s,n)=>s===void 0?[]:Kt(t,e,s,n),_s=t=>{const{dispatch:e,state:s}=xe(),n=g.useRef(!1);g.useEffect(()=>{n.current||(n.current=!0,e($e.updateCurrentRoute(t)),$t({...s,currentRoute:t}).catch(r=>{r.response&&(r.response.status===401||r.response.status===403)&&V()}))},[t,e,s])};export{ct as A,cs as F,l as R,Ut as U,fs as a,ls as b,as as c,Jt as d,us as e,gs as g,V as r,$t as s,_s as u,ds as w};
//# sourceMappingURL=useSaveLoadedRoute-c343dcd2.js.map
