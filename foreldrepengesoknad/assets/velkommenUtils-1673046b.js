import{d as i,l as S}from"./validationUtils-67294d5c.js";import{j as f,a as u,F as T}from"./jsx-runtime-670450c2.js";import{i as c,u as _}from"./IntlProvider-dc729df9.js";import"./index-7e4e529b.js";import{B as y}from"./Block-01b0ab76.js";import"./index-f1f749bf.js";import{l as L,y as A,I as v,aY as R,u as U}from"./periodeUtils-f04fe3f4.js";import{Q as b}from"./index-47edccfa.js";import{E as M}from"./index-c27d1db1.js";import{l as I}from"./index-781d69e8.js";import{r as x,o as K,s as Y,t as q,v as P,n as F}from"./useSøknad-e0725e39.js";import{j as G}from"./personUtils-f9b2b569.js";var B=(e=>(e.harForståttRettigheterOgPlikter="harForståttRettigheterOgPlikter",e.valgteBarn="valgteBarn",e))(B||{});const Be=e=>({harForståttRettigheterOgPlikter:e,valgteBarn:void 0}),w={valgteBarn:{isIncluded:({selectableBarn:e})=>e.length>0,isAnswered:({valgteBarn:e})=>e!==void 0,visibilityFilter:({selectableBarn:e})=>e.length>0},harForståttRettigheterOgPlikter:{isAnswered:({harForståttRettigheterOgPlikter:e})=>e===!0,isIncluded:({valgteBarn:e,selectableBarn:t})=>e!==void 0||t.length===0}},C=L.getTypedFormComponents(),Se=b(w),ye=e=>t=>{if(t!==!0)return c(e,"valideringsfeil.velkommen.harForståttRettigheterOgPlikter.påkrevd")},Q=e=>t=>{if(t===void 0)return c(e,"steg.footer.spørsmålMåBesvares")};const H=({sakErFerdigbehandlet:e})=>{const t=_();return f(M,{className:"blokk-xxxs",type:e?"suksess":"fokus",children:c(t,e?"velkommen.sak.status.ferdigBehandlet":"velkommen.sak.status.underBehandling")})};try{SknadStatus.displayName="SknadStatus",SknadStatus.__docgenInfo={description:"",displayName:"SknadStatus",props:{sakErFerdigbehandlet:{defaultValue:null,description:"",name:"sakErFerdigbehandlet",required:!0,type:{name:"boolean"}}}}}catch{}var g=(e=>(e.FØDT="født",e.UFØDT="ufødt",e.ADOPTERT="adoptert",e.IKKE_UTFYLT="ikkeUtfylt",e))(g||{}),J=(e=>(e.SØKNAD_GJELDER_NYTT_BARN="søknad_gjeder_nytt_barn",e))(J||{});const W=e=>({label:f(T,{children:u("b",{children:[" ",c(e,"omBarnet.gjelderAnnetBarn")]})}),value:"søknad_gjeder_nytt_barn",className:"radioGroupButton"}),j=e=>f(H,{sakErFerdigbehandlet:e}),$=(e,t,a)=>{const r=Y(e,a);return c(a,"velkommen.barnVelger.ufødtBarn",{antallBarnTekst:r,termin:A(t)})},z=(e,t)=>{const a=$(e.antallBarn,e.termindato,t),r=e.sak!==void 0?j(e.sak.åpenBehandling===void 0):void 0,d=e.sak!==void 0?c(t,"velkommen.barnVelger.saksnummer",{saksnummer:e.sak.saksnummer}):"",s=e.sak!==void 0;return{label:u(T,{children:[u("b",{children:[" ",a]}),s&&u("div",{children:[f("p",{children:d}),r]})]}),value:e.id,className:"radioGroupButton"}},X=(e,t)=>{const a=x(e.fornavn,e.fødselsdatoer,e.omsorgsovertagelse,e.alleBarnaLever,e.antallBarn,t),r=K(e.fødselsdatoer),d=e.type==="født"||e.type==="ikkeUtfylt"?r:A(e.omsorgsovertagelse),s=e.type==="født"||e.type==="ikkeUtfylt"?c(t,"velkommen.barnVelger.født"):c(t,"velkommen.barnVelger.adopsjon"),o=e.sak!==void 0?c(t,"velkommen.barnVelger.saksnummer",{saksnummer:e.sak.saksnummer}):"",p=e.sak!==void 0?j(e.sak.åpenBehandling===void 0):void 0;return{label:u(T,{children:[f("b",{children:a}),e.alleBarnaLever&&u("p",{children:[s," ",d]}),f("p",{children:o}),p!==void 0&&p]}),value:e.id,name:B.valgteBarn,className:"radioGroupButton"}},Z=(e,t)=>{switch(e.type){case"født":case"adoptert":case"ikkeUtfylt":return X(e,t);case"ufødt":return z(e,t);default:return}},V=e=>{const t=_();return u(y,{visible:e.visibility.isVisible(B.valgteBarn),children:[f(y,{padBottom:"l",children:f(I.Normaltekst,{children:c(t,"velkommen.intro.harSaker.barnVelger.info")})}),f(y,{padBottom:"l",children:f(C.RadioGroup,{name:B.valgteBarn,validate:Q(t),radios:e.selectableBarn.map(a=>Z(a,t)).concat([W(t)])})})]})};try{V.displayName="BarnVelger",V.__docgenInfo={description:"",displayName:"BarnVelger",props:{selectableBarn:{defaultValue:null,description:"",name:"selectableBarn",required:!0,type:{name:"SelectableBarn[]"}},visibility:{defaultValue:null,description:"",name:"visibility",required:!0,type:{name:"QuestionVisibility<VelkommenFormField, any>"}},formValues:{defaultValue:null,description:"",name:"formValues",required:!0,type:{name:"VelkommenFormData"}},setFieldValue:{defaultValue:null,description:"",name:"setFieldValue",required:!0,type:{name:"(field: string, value: any, shouldValidate?: boolean | undefined) => void"}}}}}catch{}const ee=(e,t)=>e?g.ADOPTERT:t.fødselsdato!==void 0?g.FØDT:g.UFØDT,N=(e,t)=>e===void 0||t===void 0?!1:i(e).isSameOrAfter(i(t).subtract(1,"day"),"day")&&i(e).isSameOrBefore(i(t).add(1,"day"),"day"),te=(e,t)=>{const a=e.barn!==void 0?e.barn.map(l=>l.fnr).flat():[],r=v(e.familiehendelse.fødselsdato),d=t.filter(l=>a.includes(l.fnr)),s=r!==void 0?t.filter(l=>N(l.fødselsdato,r)&&!d.find(D=>D.fnr===l.fnr)):[],o=d.concat(s),p=v(R(e.familiehendelse.termindato,e.familiehendelse.fødselsdato,e.familiehendelse.omsorgsovertakelse)),k=ee(e.gjelderAdopsjon,e.familiehendelse);return{id:S.guid(),type:k,antallBarn:e.familiehendelse.antallBarn,termindato:v(e.familiehendelse.termindato),omsorgsovertagelse:v(e.familiehendelse.omsorgsovertakelse),kanSøkeOmEndring:e.kanSøkeOmEndring,sak:e,fødselsdatoer:r!==void 0?Array(e.familiehendelse.antallBarn).fill(r):void 0,familiehendelsesdato:p,sortableDato:v(e.familiehendelse.termindato),startdatoFørsteStønadsperiode:e.gjeldendeVedtak!==void 0&&e.gjeldendeVedtak.perioder.length>0?U(v(e.gjeldendeVedtak.perioder[0].fom)).denneEllerNeste():void 0,fornavn:o!==void 0&&o.length>0?o.filter(l=>l.fornavn!==void 0&&l.fornavn.trim()!=="").map(l=>[l.fornavn,l.mellomnavn!==void 0?l.mellomnavn:""].join(" ")):void 0,fnr:o!==void 0&&o.length>0?o.filter(l=>l.fnr!==void 0).map(l=>l.fnr):void 0,alleBarnaLever:o!==void 0&&o.length>0?o.every(l=>F(l)):!1}},ne=(e,t)=>{const a=e.mellomnavn!==void 0?[e.fornavn,e.mellomnavn].join(" "):e.fornavn;return{id:S.guid(),type:g.IKKE_UTFYLT,antallBarn:1,fødselsdatoer:[e.fødselsdato],fornavn:a!==void 0?[a]:void 0,fnr:[e.fnr],sortableDato:e.fødselsdato,alleBarnaLever:F(e),annenForelder:t}},ae=(e,t,a)=>{const r=[e].concat(t).sort(oe);if(!(r.find(s=>!F(s)&&P(s))||r.length==0))return{id:S.guid(),type:g.IKKE_UTFYLT,antallBarn:r.length,fødselsdatoer:r.map(s=>s.fødselsdato),fornavn:r.map(s=>[s.fornavn,s.mellomnavn!==void 0?s.mellomnavn:""].join(" ")),fnr:r.map(s=>s.fnr),sortableDato:r[0].fødselsdato,alleBarnaLever:r.every(s=>F(s)),annenForelder:a}},re=(e,t)=>e.filter(a=>a.barn!==void 0&&a.barn.length>0||a.familiehendelse.termindato!==void 0||a.familiehendelse.fødselsdato!==void 0||a.familiehendelse.omsorgsovertakelse!==void 0).map(a=>te(a,t)),se=(e,t,a)=>{const r=e.filter(n=>!a.find(m=>N(n.fødselsdato,v(m.familiehendelse.fødselsdato)))),d="tempFnr",s=r.map(n=>n.fnr===void 0?{...n,fnr:d+S.guid().toString()}:n),o=t.map(n=>n.fnr).flat(),p=t.filter(n=>n.fødselsdatoer!==void 0&&n.fødselsdatoer.length>0).map(n=>n.fødselsdatoer).flat(),k=[];return s.filter(n=>!(n.dødsdato!==void 0&&p.find(m=>i(m).isSame(i(n.fødselsdato),"day")))).forEach(n=>{if(!o.includes(n.fnr)&&!G(n.fødselsdato)){const m=q(n.fnr,n.fødselsdato,s),E=n.annenForelder!==void 0?{fnr:n.annenForelder.fnr,fornavn:n.annenForelder.fornavn,mellomnavn:n.annenForelder.mellomnavn,etternavn:n.annenForelder.etternavn}:void 0;if(o.push(n.fnr),m.length===0){if(!P(n)){const h=ne(n,E);k.push(h)}}else{const h=ae(n,m,E);m.forEach(O=>{o.push(O.fnr)}),h!==void 0&&k.push(h)}}}),k.map(n=>n.fnr&&n.fnr.length>0?{...n,fnr:n.fnr.filter(m=>m&&!m.startsWith(d))}:n)},Te=(e,t)=>{const a=e.filter(o=>!o.sakAvsluttet),r=e.filter(o=>o.sakAvsluttet),d=re(a,t),s=se(t,d,r);return d.concat(s)},De=(e,t)=>{var d,s;const a=t.filter(o=>o.sak!==void 0&&o.id!==e.id&&o.familiehendelsesdato!==void 0&&i(o.familiehendelsesdato).isAfter(e.familiehendelsesdato,"day"));a.sort(le);const r=a[a.length-1];if(r!==void 0)return{familiehendelsesdato:r.familiehendelsesdato,startdatoFørsteStønadsperiode:r.startdatoFørsteStønadsperiode,fnr:r.fnr,annenForelderFnr:(s=(d=r.sak)==null?void 0:d.annenPart)==null?void 0:s.fnr}};function oe(e,t){return i(e.fødselsdato).isAfter(t.fødselsdato,"d")?1:i(e.fødselsdato).isBefore(t.fødselsdato,"d")||e.fornavn<t.fornavn?-1:1}function le(e,t){return i(e.sortableDato).isBefore(t.sortableDato,"d")?1:i(e.sortableDato).isAfter(t.sortableDato,"d")?-1:0}export{V as B,J as S,C as V,Be as a,B as b,ye as c,De as d,oe as e,N as f,Te as g,le as s,Se as v};
//# sourceMappingURL=velkommenUtils-1673046b.js.map
