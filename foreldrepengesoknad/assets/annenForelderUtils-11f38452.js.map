{"version":3,"file":"annenForelderUtils-11f38452.js","sources":["../../src/app/constants.ts","../../src/app/steps/uttaksplan-info/utils/uttaksplanDatoavgrensninger.ts","../../src/app/utils/annenForelderUtils.ts"],"sourcesContent":["const MAKS_PERMISJONSLENGDE_I_ÅR = 3;\nconst MAKS_FERIEDAGER_ETT_ÅR = 21;\nconst MAKS_FERIEDAGER_MED_OVERFØRING = 52;\nconst ANTALL_UKER_MØDREKVOTE_ETTER_FØDSEL = 6;\nconst ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL = 3;\nconst MAKS_ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL = 12;\nconst ANTALL_UKER_FORELDREPENGER_BARE_FAR_HAR_RETT_100_PROSENT = 40;\nconst ANTALL_UKER_FORELDREPENGER_BARE_FAR_HAR_RETT_80_PROSENT = 50;\nconst ANTALL_UKER_2_BARN_100_PROSENT_UTTAK = 17;\nconst ANTALL_UKER_2_BARN_80_PROSENT_UTTAK = 21;\nconst ANTALL_UKER_3_ELLER_FLERE_BARN_100_PROSENT_UTTAK = 46;\nconst ANTALL_UKER_3_ELLER_FLERE_BARN_80_PROSENT_UTTAK = 56;\n\nconst uttaksConstants = {\n    MAKS_PERMISJONSLENGDE_I_ÅR,\n    MAKS_FERIEDAGER_ETT_ÅR,\n    MAKS_FERIEDAGER_MED_OVERFØRING,\n    ANTALL_UKER_MØDREKVOTE_ETTER_FØDSEL,\n    ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL,\n    MAKS_ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL,\n    ANTALL_UKER_FORELDREPENGER_BARE_FAR_HAR_RETT_100_PROSENT,\n    ANTALL_UKER_FORELDREPENGER_BARE_FAR_HAR_RETT_80_PROSENT,\n    ANTALL_UKER_2_BARN_100_PROSENT_UTTAK,\n    ANTALL_UKER_2_BARN_80_PROSENT_UTTAK,\n    ANTALL_UKER_3_ELLER_FLERE_BARN_100_PROSENT_UTTAK,\n    ANTALL_UKER_3_ELLER_FLERE_BARN_80_PROSENT_UTTAK,\n};\n\nexport default uttaksConstants;\n","import dayjs from 'dayjs';\nimport { Uttaksdagen } from './Uttaksdagen';\nimport uttaksConstants from 'app/constants';\nimport { DatepickerLimitations } from 'nav-datovelger';\nimport { dateToISOString } from '@navikt/sif-common-formik/lib';\nimport { andreAugust2022ReglerGjelder } from 'app/utils/dateUtils';\nimport { Situasjon } from 'app/types/Situasjon';\nimport { getFørsteUttaksdag2UkerFørFødsel } from 'app/utils/wlbUtils';\n\nfunction sisteMuligePermisjonsdag(familiehendelsedato: Date): Date {\n    const startDato = Uttaksdagen(familiehendelsedato).denneEllerNeste();\n    return Uttaksdagen(\n        dayjs(startDato).add(uttaksConstants.MAKS_PERMISJONSLENGDE_I_ÅR, 'years').toDate()\n    ).denneEllerNeste();\n}\n\nconst konverterMinOgMaxDatoerTilString = (minDate: Date, maxDate: Date) => ({\n    minDate: dateToISOString(minDate),\n    maxDate: dateToISOString(maxDate),\n});\n\nconst defaultPermisjonsperiodeAvgrensning = (familiehendelsesdato: Date): DatepickerLimitations => {\n    const minDato = Uttaksdagen(familiehendelsesdato).denneEllerNeste();\n    const maksDato = sisteMuligePermisjonsdag(familiehendelsesdato);\n    return {\n        ...konverterMinOgMaxDatoerTilString(minDato, maksDato),\n        weekendsNotSelectable: true,\n    };\n};\n\nconst startdatoFørTermin = (familiehendelsesdato: string): DatepickerLimitations => {\n    const maksDato = Uttaksdagen(dayjs(familiehendelsesdato).toDate()).forrige();\n    const minDato = Uttaksdagen(maksDato).trekkFra(uttaksConstants.MAKS_ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL * 5 - 1);\n    return {\n        ...konverterMinOgMaxDatoerTilString(minDato, maksDato),\n        weekendsNotSelectable: true,\n    };\n};\n\nconst startdatoFørTerminForeldrepengerFørFødselKonto = (familiehendelsesdato: string): DatepickerLimitations => {\n    const maksDato = Uttaksdagen(dayjs(familiehendelsesdato).toDate()).forrige();\n    const minDato = Uttaksdagen(maksDato).trekkFra(uttaksConstants.ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL * 5 - 1);\n    return {\n        ...konverterMinOgMaxDatoerTilString(minDato, maksDato),\n        weekendsNotSelectable: true,\n    };\n};\n\nconst ekstrauttakFørFødsel = (familiehendelsesdato: string): DatepickerLimitations => {\n    const sisteDagFørFødsel = Uttaksdagen(dayjs(familiehendelsesdato).toDate()).forrige();\n    const minDato = Uttaksdagen(sisteDagFørFødsel).trekkFra(\n        uttaksConstants.MAKS_ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL * 5 - 1\n    );\n    const maksDato = Uttaksdagen(sisteDagFørFødsel).trekkFra(\n        uttaksConstants.ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL * 5 - 1\n    );\n    return {\n        ...konverterMinOgMaxDatoerTilString(minDato, maksDato),\n        weekendsNotSelectable: true,\n    };\n};\n\nconst startdatoPermisjonAleneomsorgFarMedmor = (\n    datoForAleneomsorg: string,\n    familiehendelsesdato: string\n): DatepickerLimitations => {\n    const minDato = Uttaksdagen(dayjs(datoForAleneomsorg).toDate()).denneEllerNeste();\n    const maksDato = sisteMuligePermisjonsdag(dayjs(familiehendelsesdato).toDate());\n    return {\n        ...konverterMinOgMaxDatoerTilString(minDato, maksDato),\n        weekendsNotSelectable: true,\n    };\n};\n\nconst startdatoPermisjonAdopsjon = (familiehendelsesdato: string): DatepickerLimitations => {\n    return defaultPermisjonsperiodeAvgrensning(dayjs(familiehendelsesdato).toDate());\n};\n\nconst morsSisteUttaksdag = (familiehendelsesdato: string): DatepickerLimitations => {\n    return defaultPermisjonsperiodeAvgrensning(dayjs(familiehendelsesdato).toDate());\n};\n\nconst startdatoPermisjonFarMedmor = (\n    familiehendelsesdato: Date,\n    termindato: Date | undefined,\n    situasjon: Situasjon\n): DatepickerLimitations => {\n    const defaultAvgrensning = defaultPermisjonsperiodeAvgrensning(familiehendelsesdato);\n    if (situasjon === 'fødsel' && andreAugust2022ReglerGjelder(familiehendelsesdato)) {\n        return {\n            ...defaultAvgrensning,\n            minDate: dateToISOString(getFørsteUttaksdag2UkerFørFødsel(familiehendelsesdato, termindato)),\n        };\n    }\n    return defaultAvgrensning;\n};\n\nexport const uttaksplanDatoavgrensninger = {\n    startdatoFørTermin,\n    morsSisteUttaksdag,\n    startdatoPermisjonFarMedmor,\n    startdatoPermisjonAdopsjon,\n    startdatoPermisjonAleneomsorgFarMedmor,\n    startdatoFørTerminForeldrepengerFørFødselKonto,\n    ekstrauttakFørFødsel,\n};\n","import { intlUtils } from '@navikt/fp-common';\nimport AnnenForelder, { AnnenForelderOppgitt, isAnnenForelderOppgitt } from 'app/context/types/AnnenForelder';\nimport { RettighetType } from 'app/types/RettighetType';\nimport { Sak } from 'app/types/Sak';\nimport { IntlShape } from 'react-intl';\n\nexport const getErMorUfør = (annenForelder: AnnenForelder, erFarEllerMedmor: boolean) => {\n    if (isAnnenForelderOppgitt(annenForelder) && erFarEllerMedmor) {\n        return !!annenForelder.erUfør;\n    }\n\n    return false;\n};\n\nexport const harAnnenForelderRettIEØS = (annenForelder: AnnenForelder): boolean => {\n    return isAnnenForelderOppgitt(annenForelder) && !!annenForelder.harRettPåForeldrepengerIEØS;\n};\n\nexport const getMockAnnenForelder = (sak: Sak, intl: IntlShape): AnnenForelderOppgitt => {\n    return {\n        fornavn: intlUtils(intl, 'annen.forelder'),\n        etternavn: '',\n        fnr: '',\n        harRettPåForeldrepengerINorge:\n            sak.rettighetType === RettighetType.BEGGE_RETT && !sak.harAnnenForelderTilsvarendeRettEØS,\n        harRettPåForeldrepengerIEØS: sak.harAnnenForelderTilsvarendeRettEØS,\n        erUfør: (!sak.sakTilhørerMor && sak.morUføretrygd) || undefined,\n        kanIkkeOppgis: false,\n    };\n};\n"],"names":["MAKS_PERMISJONSLENGDE_I_ÅR","MAKS_FERIEDAGER_ETT_ÅR","MAKS_FERIEDAGER_MED_OVERFØRING","ANTALL_UKER_MØDREKVOTE_ETTER_FØDSEL","ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL","MAKS_ANTALL_UKER_FORELDREPENGER_FØR_FØDSEL","ANTALL_UKER_FORELDREPENGER_BARE_FAR_HAR_RETT_100_PROSENT","ANTALL_UKER_FORELDREPENGER_BARE_FAR_HAR_RETT_80_PROSENT","ANTALL_UKER_2_BARN_100_PROSENT_UTTAK","ANTALL_UKER_2_BARN_80_PROSENT_UTTAK","ANTALL_UKER_3_ELLER_FLERE_BARN_100_PROSENT_UTTAK","ANTALL_UKER_3_ELLER_FLERE_BARN_80_PROSENT_UTTAK","uttaksConstants","sisteMuligePermisjonsdag","familiehendelsedato","startDato","Uttaksdagen","dayjs","konverterMinOgMaxDatoerTilString","minDate","maxDate","dateToISOString","defaultPermisjonsperiodeAvgrensning","familiehendelsesdato","minDato","maksDato","startdatoFørTermin","startdatoFørTerminForeldrepengerFørFødselKonto","ekstrauttakFørFødsel","sisteDagFørFødsel","startdatoPermisjonAleneomsorgFarMedmor","datoForAleneomsorg","startdatoPermisjonAdopsjon","morsSisteUttaksdag","startdatoPermisjonFarMedmor","termindato","situasjon","defaultAvgrensning","andreAugust2022ReglerGjelder","getFørsteUttaksdag2UkerFørFødsel","uttaksplanDatoavgrensninger","getErMorUfør","annenForelder","erFarEllerMedmor","isAnnenForelderOppgitt","harAnnenForelderRettIEØS"],"mappings":"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"}