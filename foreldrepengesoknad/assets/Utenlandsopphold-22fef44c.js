import{j as n,a as N}from"./jsx-runtime-670450c2.js";import{d as h,X as x,Y as w,A as P,b as W,Z as H,$ as C,a0 as E,a1 as Y,a2 as q,a3 as y,i as D}from"./validationUtils-67294d5c.js";import{u as B,F as j,i as o}from"./IntlProvider-dc729df9.js";import"./index-7e4e529b.js";import{B as g}from"./Block-01b0ab76.js";import{u as Q,a as $,S as K,g as J,s as X}from"./useFortsettSøknadSenere-e3f0df02.js";import{U as O}from"./UtvidetInformasjon-33c789c9.js";import"./index-f1f749bf.js";import{l as i,I as f,aS as F,aT as _}from"./periodeUtils-f04fe3f4.js";import{f as T,a as Z}from"./mapSøkerinfoDTO-f7746f82.js";import{u as z}from"./useOnValidSubmit-cccef928.js";import{u as G}from"./useSøknad-e0725e39.js";import{Q as ee}from"./index-47edccfa.js";import{l as te}from"./index-781d69e8.js";import{l as oe}from"./index-feafd352.js";import{a as L,c as V}from"./formUtils-05ec5f16.js";import{u as ne,s as de}from"./useSaveLoadedRoute-c343dcd2.js";var p=(e=>(e.harBoddINorgeSiste12Mnd="harBoddINorgeSiste12Mnd",e.utenlandsoppholdSiste12Mnd="utenlandsoppholdSiste12Mnd",e.skalBoINorgeNeste12Mnd="skalBoINorgeNeste12Mnd",e.utenlandsoppholdNeste12Mnd="utenlandsoppholdNeste12Mnd",e))(p||{});const ae={harBoddINorgeSiste12Mnd:i.YesOrNo.UNANSWERED,utenlandsoppholdSiste12Mnd:[],skalBoINorgeNeste12Mnd:i.YesOrNo.UNANSWERED,utenlandsoppholdNeste12Mnd:[]},k=i.getTypedFormComponents(),le={[p.harBoddINorgeSiste12Mnd]:{isAnswered:({harBoddINorgeSiste12Mnd:e})=>e!==i.YesOrNo.UNANSWERED,isIncluded:()=>!0,visibilityFilter:({skalBoINorgeNeste12Mnd:e})=>e!==i.YesOrNo.UNANSWERED},[p.utenlandsoppholdSiste12Mnd]:{isAnswered:({utenlandsoppholdSiste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({harBoddINorgeSiste12Mnd:e})=>e===i.YesOrNo.NO},[p.skalBoINorgeNeste12Mnd]:{isAnswered:({skalBoINorgeNeste12Mnd:e})=>e!==i.YesOrNo.UNANSWERED,isIncluded:()=>!0},[p.utenlandsoppholdNeste12Mnd]:{isAnswered:({utenlandsoppholdNeste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({skalBoINorgeNeste12Mnd:e})=>e===i.YesOrNo.NO}},se=ee(le),re=e=>{const{fom:d,landkode:a,tom:l}=e;return d!==void 0&&a!==void 0&&l!==void 0},b=i.getTypedFormComponents(),ie=e=>({fom:e.fom,tom:e.tom,landkode:e.landkode}),I=({maxDate:e,minDate:d,bosted:a,onSubmit:l,onCancel:c,erFremtidigOpphold:r})=>{const s=B(),u=t=>{const m={...a,fom:t.fom,tom:t.tom,landkode:t.landkode};if(re(m))l(m);else throw new Error("BostedUtlandForm: Formvalues is not a valid BostedUtland on submit.")};return n(b.FormikWrapper,{initialValues:a?ie(a):{},onSubmit:u,renderForm:({values:t})=>N(b.Form,{onCancel:c,children:[n(te.Systemtittel,{tag:"h1",children:n(j,{id:"utenlandsopphold.leggTilUtenlandsopphold.tittel"})}),n(g,{children:n(b.DateIntervalPicker,{legend:o(s,"utenlandsopphold.leggTilUtenlandsopphold.tidsrom"),fromDatepickerProps:{name:"fom",label:o(s,"utenlandsopphold.leggTilUtenlandsopphold.fraogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:d,maxDate:f(t.tom)||e,validate:m=>t.tom&&t.fom&&h(t.tom).isSame(t.fom)?"Fra og med dato kan ikke være samme som til og med dato":F.validateFromDateInRange({intl:s,date:f(m),minDate:d,maxDate:e,errorKey:"valideringsfeil.fraOgMedDato.førTilDato",toDate:f(t.tom),disableWeekend:!1})},toDatepickerProps:{name:"tom",label:o(s,"utenlandsopphold.leggTilUtenlandsopphold.tilogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:f(t.fom)||d,maxDate:e,validate:m=>t.tom&&t.fom&&h(t.tom).isSame(t.fom)?"Til og med dato kan ikke være samme som fra og med dato":F.validateToDateInRange({intl:s,date:f(m),minDate:d,maxDate:e,errorKey:"valideringsfeil.tilOgMedDato.etterFraDato",fromDate:f(t.fom),disableWeekend:!1})}})}),n(g,{margin:"xl",children:n(b.CountrySelect,{name:"landkode",label:r?o(s,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandSkalDuBoI"):o(s,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandHarDuBoddI"),validate:m=>x(m,o(s,r?"valideringsfeil.utenlandsopphold.landDuSkalBoIPåkrevd":"valideringsfeil.utenlandsopphold.landDuHarBoddIPåkrevd")),useAlpha3Code:!1})})]})})};try{I.displayName="BostedUtlandForm",I.__docgenInfo={description:"",displayName:"BostedUtlandForm",props:{minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},bosted:{defaultValue:null,description:"",name:"bosted",required:!1,type:{name:"BostedUtland"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: BostedUtland) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const v=W("bostedUtlandList"),U=({bosteder:e,onDelete:d,onEdit:a})=>{const l=B();return n(w,{getItemId:r=>r.id,getItemTitle:r=>i.getCountryName(r.landkode,l.locale),onDelete:d,onEdit:a,labelRenderer:r=>{const s=i.getCountryName(r.landkode,l.locale);return N("div",{className:v.element("label"),children:[N("span",{className:v.element("land"),children:[a&&n(P,{onClick:()=>a(r),children:s}),!a&&n("span",{children:s})]}),N("span",{className:v.element("dato"),children:[_(h(r.fom).toDate())," -"," ",_(h(r.tom).toDate())]})]})},items:e})};try{U.displayName="BostedUtlandList",U.__docgenInfo={description:"",displayName:"BostedUtlandList",props:{bosteder:{defaultValue:null,description:"",name:"bosteder",required:!0,type:{name:"BostedUtland[]"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((opphold: BostedUtland) => void)"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((opphold: BostedUtland) => void)"}}}}}catch{}function S({name:e,minDate:d,maxDate:a,validate:l,labels:c,erFremtidigOpphold:r}){return n(i.FormikModalFormAndList,{name:e,labels:c,validate:l,dialogWidth:"narrow",sortFunc:H,formRenderer:({onSubmit:s,onCancel:u,item:t})=>n(I,{bosted:t,minDate:d,maxDate:a,onSubmit:s,onCancel:u,erFremtidigOpphold:r}),listRenderer:({items:s,onEdit:u,onDelete:t})=>n(U,{bosteder:s,onEdit:u,onDelete:t})})}try{S.displayName="BostedUtlandListAndDialog",S.__docgenInfo={description:"",displayName:"BostedUtlandListAndDialog",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"FieldNames"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"any"}},minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"ModalFormAndListLabels"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const A=e=>({fom:e.tidsperiode.fom,tom:e.tidsperiode.tom,landkode:e.land}),pe=e=>({...ae,harBoddINorgeSiste12Mnd:L(e.iNorgeSiste12Mnd),skalBoINorgeNeste12Mnd:L(e.iNorgeNeste12Mnd),utenlandsoppholdNeste12Mnd:e.senereOpphold.map(A),utenlandsoppholdSiste12Mnd:e.tidligereOpphold.map(A)}),R=e=>e.map(d=>({land:d.landkode,tidsperiode:{fom:d.fom,tom:d.tom}})),me=e=>{const{harBoddINorgeSiste12Mnd:d,skalBoINorgeNeste12Mnd:a,utenlandsoppholdNeste12Mnd:l,utenlandsoppholdSiste12Mnd:c}=e;return{iNorgeSiste12Mnd:V(d),iNorgeNeste12Mnd:V(a),senereOpphold:a===i.YesOrNo.NO?R(l):[],tidligereOpphold:d===i.YesOrNo.NO?R(c):[]}},ue=e=>d=>{if(d.length===0)return o(e,"valideringsfeil.utenlandsopphold.neste12Måneder.ikkeRegistrert");const a=d.map(l=>({from:h(l.fom).toDate(),to:h(l.tom).toDate()}));if(C(a))return o(e,"valideringsfeil.utenlandsopphold.overlapp");if(E(a,{from:new Date,to:Y}))return o(e,"valideringsfeil.utenlandsoppholdUtenforPeriode")},ce=e=>d=>{if(d.length===0)return o(e,"valideringsfeil.utenlandsopphold.siste12Måneder.ikkeRegistrert");const a=d.map(l=>({from:h(l.fom).toDate(),to:h(l.tom).toDate()}));if(C(a))return o(e,"valideringsfeil.utenlandsopphold.overlapp");if(E(a,{from:q,to:new Date}))return o(e,"valideringsfeil.utenlandsoppholdUtenforPeriode")},M=()=>{const e=B(),{informasjonOmUtenlandsopphold:d}=G(),a=u=>{const t=me(u);return[Z.setInformasjonOmUtenlandsopphold(t)]},{handleSubmit:l,isSubmitting:c}=z(a,T.INNTEKTSINFORMASJON,u=>de(u)),r=Q(),s=$();return ne(T.UTENLANDSOPPHOLD),n(k.FormikWrapper,{initialValues:pe(d),onSubmit:l,renderForm:({values:u})=>{const t=se.getVisbility(u);return n(K,{bannerTitle:o(e,"søknad.pageheading"),activeStepId:"utenlandsopphold",pageTitle:o(e,"søknad.utenlandsopphold"),stepTitle:o(e,"søknad.utenlandsopphold"),backLinkHref:J("utenlandsopphold"),onCancel:r,onContinueLater:s,steps:X(e),kompakt:!0,children:N(k.Form,{includeButtons:!1,includeValidationSummary:!0,children:[n(g,{visible:t.isVisible(p.skalBoINorgeNeste12Mnd),padBottom:"l",children:n(k.YesOrNoQuestion,{legend:o(e,"utenlandsopphold.neste12Måneder.spørsmål"),name:p.skalBoINorgeNeste12Mnd,description:n(O,{apneLabel:o(e,"utenlandsopphold.neste12MånederInfotekst.apneLabel"),children:o(e,"utenlandsopphold.neste12MånederInfotekst")}),labels:{yes:o(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddINorge"),no:o(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:m=>y(m,"valideringsfeil.utenlandsopphold.skalBoINorgePåkrevd")})}),n(g,{padBottom:"l",visible:t.isVisible(p.utenlandsoppholdNeste12Mnd),children:n(S,{name:p.utenlandsoppholdNeste12Mnd,minDate:D,maxDate:Y,labels:{addLabel:o(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold neste 12 måneder"},erFremtidigOpphold:!0,validate:ue(e)})}),n(g,{padBottom:"l",visible:t.isVisible(p.harBoddINorgeSiste12Mnd),children:n(k.YesOrNoQuestion,{legend:o(e,"utenlandsopphold.siste12Måneder.spørsmål"),name:p.harBoddINorgeSiste12Mnd,description:n(O,{apneLabel:o(e,"utenlandsopphold.siste12MånederInfotekst.apneLabel"),children:o(e,"utenlandsopphold.siste12MånederInfotekst")}),labels:{yes:o(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddINorge"),no:o(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:m=>y(m,"valideringsfeil.utenlandsopphold.harBoddINorgePåkrevd")})}),n(g,{padBottom:"l",visible:t.isVisible(p.utenlandsoppholdSiste12Mnd),children:n(S,{minDate:q,maxDate:D,name:p.utenlandsoppholdSiste12Mnd,labels:{addLabel:o(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold siste 12 måneder"},erFremtidigOpphold:!1,validate:ce(e)})}),n(g,{visible:t.areAllQuestionsAnswered(),textAlignCenter:!0,children:n(oe.Hovedknapp,{disabled:c,spinner:c,children:o(e,"søknad.gåVidere")})})]})})}})},Te=M;try{M.displayName="Utenlandsopphold",M.__docgenInfo={description:"",displayName:"Utenlandsopphold",props:{}}}catch{}export{Te as U};
//# sourceMappingURL=Utenlandsopphold-22fef44c.js.map
