import{j as t,a as f}from"./jsx-runtime-670450c2.js";import{an as oe,ao as de,a as V,H as z,F as h,B as m,i as a,d as N,aN as ae,aO as le,e as re,c as se,aP as ie,aQ as K,aR as J,aS as $,aT as G,S as pe,aU as E,z as _,E as y,k as S,b as me}from"./validationUtils-aa1d1f93.js";import"./index-7e4e529b.js";import{R as O}from"./index-f1f749bf.js";import{T as ue,M as ce,Y as g,g as X,b as q}from"./getTypedFormComponents-373c5aee.js";import{S as w,a as he}from"./mapSøkerinfoDTO-cc88f2a7.js";import{u as ge}from"./useOnValidSubmit-34cf285a.js";import{u as fe}from"./useSøknad-c113ad03.js";import{u as Ne,a as ke,g as ve,s as Se}from"./useFortsettSøknadSenere-e922abdf.js";import{Q as be}from"./index-47edccfa.js";import{I as k,a2 as P,a3 as W}from"./dateUtils-06999df8.js";import{a as j,c as H}from"./formUtils-07817100.js";import{u as Be,s as Ie}from"./useSaveLoadedRoute-bcb66eb1.js";import{B as Ue,L as ye}from"./Link-40b5f3c6.js";function Me(e){var o=e.name,d=e.labels,l=e.listRenderer,c=e.formRenderer,s=e.sortFunc,r=e.onAfterChange,p=e.dialogWidth,n=e.shouldCloseOnOverlayClick,i=e.error,Z=e.maxItems,ee=e.useFastField,C=e.validate,b=O.useContext(ue),te=ee?oe:de;return O.createElement(te,{name:o,validate:C?function(B){return C(B,o)}:void 0},function(B){var I=B.field,x=B.form;return O.createElement(ce,{labels:d,items:I.value,error:i||(b?b.getAndRenderFieldErrorMessage(I,x):void 0),maxItems:Z,dialogWidth:p,shouldCloseOnOverlayClick:n,onChange:function(v){var U=s?v.sort(s):v;x.setFieldValue(I.name,U),r&&r(U),b&&b.onAfterFieldValueSet()},formRenderer:c,listRenderer:function(v){var U=v.onEdit,ne=v.onDelete;return l({items:I.value,onDelete:ne,onEdit:U})}})})}var u=(e=>(e.harBoddINorgeSiste12Mnd="harBoddINorgeSiste12Mnd",e.utenlandsoppholdSiste12Mnd="utenlandsoppholdSiste12Mnd",e.skalBoINorgeNeste12Mnd="skalBoINorgeNeste12Mnd",e.utenlandsoppholdNeste12Mnd="utenlandsoppholdNeste12Mnd",e))(u||{});const Fe={harBoddINorgeSiste12Mnd:g.UNANSWERED,utenlandsoppholdSiste12Mnd:[],skalBoINorgeNeste12Mnd:g.UNANSWERED,utenlandsoppholdNeste12Mnd:[]},M=X(),De={[u.harBoddINorgeSiste12Mnd]:{isAnswered:({harBoddINorgeSiste12Mnd:e})=>e!==g.UNANSWERED,isIncluded:()=>!0,visibilityFilter:({skalBoINorgeNeste12Mnd:e})=>e!==g.UNANSWERED},[u.utenlandsoppholdSiste12Mnd]:{isAnswered:({utenlandsoppholdSiste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({harBoddINorgeSiste12Mnd:e})=>e===g.NO},[u.skalBoINorgeNeste12Mnd]:{isAnswered:({skalBoINorgeNeste12Mnd:e})=>e!==g.UNANSWERED,isIncluded:()=>!0},[u.utenlandsoppholdNeste12Mnd]:{isAnswered:({utenlandsoppholdNeste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({skalBoINorgeNeste12Mnd:e})=>e===g.NO}},Oe=be(De),Ae=e=>{const{fom:o,landkode:d,tom:l}=e;return o!==void 0&&d!==void 0&&l!==void 0},F=X(),Le=e=>({fom:e.fom,tom:e.tom,landkode:e.landkode}),L=({maxDate:e,minDate:o,bosted:d,onSubmit:l,onCancel:c,erFremtidigOpphold:s})=>{const r=V(),p=n=>{const i={...d,fom:n.fom,tom:n.tom,landkode:n.landkode};if(Ae(i))l(i);else throw new Error("BostedUtlandForm: Formvalues is not a valid BostedUtland on submit.")};return t(F.FormikWrapper,{initialValues:d?Le(d):{},onSubmit:p,renderForm:({values:n})=>f(F.Form,{onCancel:c,showButtonArrows:!1,submitButtonLabel:"Legg til",children:[t(z,{size:"medium",as:"h1",children:t(h,{id:"utenlandsopphold.leggTilUtenlandsopphold.tittel"})}),t(m,{children:t(F.DateIntervalPicker,{legend:a(r,"utenlandsopphold.leggTilUtenlandsopphold.tidsrom"),fromDatepickerProps:{name:"fom",label:a(r,"utenlandsopphold.leggTilUtenlandsopphold.fraogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:o,maxDate:k(n.tom)||e,validate:i=>n.tom&&n.fom&&N(n.tom).isSame(n.fom)?"Fra og med dato kan ikke være samme som til og med dato":P.validateFromDateInRange({intl:r,date:k(i),minDate:o,maxDate:e,errorKey:"valideringsfeil.fraOgMedDato.førTilDato",toDate:k(n.tom),disableWeekend:!1})},toDatepickerProps:{name:"tom",label:a(r,"utenlandsopphold.leggTilUtenlandsopphold.tilogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:k(n.fom)||o,maxDate:e,validate:i=>n.tom&&n.fom&&N(n.tom).isSame(n.fom)?"Til og med dato kan ikke være samme som fra og med dato":P.validateToDateInRange({intl:r,date:k(i),minDate:o,maxDate:e,errorKey:"valideringsfeil.tilOgMedDato.etterFraDato",fromDate:k(n.fom),disableWeekend:!1})}})}),t(m,{margin:"xl",children:t(F.CountrySelect,{name:"landkode",label:s?a(r,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandSkalDuBoI"):a(r,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandHarDuBoddI"),validate:i=>ae(i,a(r,s?"valideringsfeil.utenlandsopphold.landDuSkalBoIPåkrevd":"valideringsfeil.utenlandsopphold.landDuHarBoddIPåkrevd")),useAlpha3Code:!1})})]})})};try{L.displayName="BostedUtlandForm",L.__docgenInfo={description:"",displayName:"BostedUtlandForm",props:{minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},bosted:{defaultValue:null,description:"",name:"bosted",required:!1,type:{name:"BostedUtland"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: BostedUtland) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const A=se("bostedUtlandList"),R=({bosteder:e,onDelete:o,onEdit:d})=>{const l=V();return t(le,{getItemId:s=>s.id,getItemTitle:s=>q(s.landkode,l.locale),onDelete:o,onEdit:d,labelRenderer:s=>{const r=q(s.landkode,l.locale);return f("div",{className:A.element("label"),children:[f("span",{className:A.element("land"),children:[d&&t(re,{onClick:()=>d(s),children:r}),!d&&t("span",{children:r})]}),f("span",{className:A.element("dato"),children:[W(N(s.fom).toDate())," -"," ",W(N(s.tom).toDate())]})]})},items:e})};try{R.displayName="BostedUtlandList",R.__docgenInfo={description:"",displayName:"BostedUtlandList",props:{bosteder:{defaultValue:null,description:"",name:"bosteder",required:!0,type:{name:"BostedUtland[]"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((opphold: BostedUtland) => void)"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((opphold: BostedUtland) => void)"}}}}}catch{}function D({name:e,minDate:o,maxDate:d,validate:l,labels:c,erFremtidigOpphold:s}){return t(Me,{name:e,labels:c,validate:l,dialogWidth:"narrow",sortFunc:ie,formRenderer:({onSubmit:r,onCancel:p,item:n})=>t(L,{bosted:n,minDate:o,maxDate:d,onSubmit:r,onCancel:p,erFremtidigOpphold:s}),listRenderer:({items:r,onEdit:p,onDelete:n})=>t(R,{bosteder:r,onEdit:p,onDelete:n})})}try{D.displayName="BostedUtlandListAndDialog",D.__docgenInfo={description:"",displayName:"BostedUtlandListAndDialog",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"FieldNames"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"any"}},minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"ModalFormAndListLabels"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const Y=e=>({fom:e.tidsperiode.fom,tom:e.tidsperiode.tom,landkode:e.land}),Re=e=>({...Fe,harBoddINorgeSiste12Mnd:j(e.iNorgeSiste12Mnd),skalBoINorgeNeste12Mnd:j(e.iNorgeNeste12Mnd),utenlandsoppholdNeste12Mnd:e.senereOpphold.map(Y),utenlandsoppholdSiste12Mnd:e.tidligereOpphold.map(Y)}),Q=e=>e.map(o=>({land:o.landkode,tidsperiode:{fom:o.fom,tom:o.tom}})),Te=e=>{const{harBoddINorgeSiste12Mnd:o,skalBoINorgeNeste12Mnd:d,utenlandsoppholdNeste12Mnd:l,utenlandsoppholdSiste12Mnd:c}=e;return{iNorgeSiste12Mnd:H(o),iNorgeNeste12Mnd:H(d),senereOpphold:d===g.NO?Q(l):[],tidligereOpphold:o===g.NO?Q(c):[]}},Ve=e=>o=>{if(o.length===0)return a(e,"valideringsfeil.utenlandsopphold.neste12Måneder.ikkeRegistrert");const d=o.map(l=>({from:N(l.fom).toDate(),to:N(l.tom).toDate()}));if(K(d))return a(e,"valideringsfeil.utenlandsopphold.overlapp");if(J(d,{from:new Date,to:$}))return a(e,"valideringsfeil.utenlandsoppholdUtenforPeriode")},Ce=e=>o=>{if(o.length===0)return a(e,"valideringsfeil.utenlandsopphold.siste12Måneder.ikkeRegistrert");const d=o.map(l=>({from:N(l.fom).toDate(),to:N(l.tom).toDate()}));if(K(d))return a(e,"valideringsfeil.utenlandsopphold.overlapp");if(J(d,{from:G,to:new Date}))return a(e,"valideringsfeil.utenlandsoppholdUtenforPeriode")},T=()=>{const e=V(),{informasjonOmUtenlandsopphold:o}=fe(),d=p=>{const n=Te(p);return[he.setInformasjonOmUtenlandsopphold(n)]},{handleSubmit:l,isSubmitting:c}=ge(d,w.INNTEKTSINFORMASJON,p=>Ie(p)),s=Ne(),r=ke();return Be(w.UTENLANDSOPPHOLD),t(M.FormikWrapper,{initialValues:Re(o),onSubmit:l,renderForm:({values:p})=>{const n=Oe.getVisbility(p);return t(pe,{bannerTitle:a(e,"søknad.pageheading"),activeStepId:"utenlandsopphold",pageTitle:a(e,"søknad.utenlandsopphold"),backLinkHref:ve("utenlandsopphold"),onCancel:s,onContinueLater:r,steps:Se(e,!1),children:f(M.Form,{includeButtons:!1,includeValidationSummary:!0,children:[t(m,{visible:n.isVisible(u.skalBoINorgeNeste12Mnd),padBottom:"l",children:t(M.YesOrNoQuestion,{legend:a(e,"utenlandsopphold.neste12Måneder.spørsmål"),name:u.skalBoINorgeNeste12Mnd,description:a(e,"utenlandsopphold.neste12MånederInfotekst"),labels:{yes:a(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddINorge"),no:a(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:i=>E(i,"valideringsfeil.utenlandsopphold.skalBoINorgePåkrevd")})}),t(m,{padBottom:"xl",visible:n.isVisible(u.utenlandsoppholdNeste12Mnd),children:t(D,{name:u.utenlandsoppholdNeste12Mnd,minDate:_,maxDate:$,labels:{addLabel:a(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold neste 12 måneder"},erFremtidigOpphold:!0,validate:Ve(e)})}),t(m,{padBottom:"l",visible:n.isVisible(u.harBoddINorgeSiste12Mnd),children:t(M.YesOrNoQuestion,{legend:a(e,"utenlandsopphold.siste12Måneder.spørsmål"),name:u.harBoddINorgeSiste12Mnd,description:a(e,"utenlandsopphold.siste12MånederInfotekst"),labels:{yes:a(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddINorge"),no:a(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:i=>E(i,"valideringsfeil.utenlandsopphold.harBoddINorgePåkrevd")})}),t(m,{padBottom:"xl",visible:n.isVisible(u.utenlandsoppholdSiste12Mnd),children:t(D,{minDate:G,maxDate:_,name:u.utenlandsoppholdSiste12Mnd,labels:{addLabel:a(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold siste 12 måneder"},erFremtidigOpphold:!1,validate:Ce(e)})}),t(m,{padBottom:"xl",children:f(y,{"aria-label":"Informasjon om utenlandsopphold",children:[f(y.Header,{children:[t(y.Title,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.header.tittel"})}),t(S,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.header.ingress"})})]}),f(y.Content,{children:[t(m,{padBottom:"l",children:t(S,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon1"})})}),t(m,{padBottom:"l",children:t(S,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon2"})})}),t(m,{padBottom:"xl",children:t(S,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon3"})})}),t(m,{padBottom:"l",children:t(z,{as:"h4",size:"medium",children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.undertittel"})})}),t(m,{padBottom:"l",children:t(S,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon4"})})}),t(Ue,{children:t(h,{id:"utenlandsopphold.oppholdOgStøtte.seksjon5",values:{a:i=>t(ye,{href:"https://nav.no/foreldrepenger#utland",rel:"noreferrer",target:"_blank",children:i})}})})]})]})}),t(m,{visible:n.areAllQuestionsAnswered(),textAlignCenter:!0,children:t(me,{type:"submit",disabled:c,loading:c,children:a(e,"søknad.gåVidere")})})]})})}})},$e=T;try{T.displayName="Utenlandsopphold",T.__docgenInfo={description:"",displayName:"Utenlandsopphold",props:{}}}catch{}export{$e as U};
//# sourceMappingURL=Utenlandsopphold-de515e48.js.map
