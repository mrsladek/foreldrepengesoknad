(self.webpackChunkforeldrepengesoknad=self.webpackChunkforeldrepengesoknad||[]).push([[3583],{"../../node_modules/.pnpm/@amplitude+ua-parser-js@0.7.31/node_modules/@amplitude/ua-parser-js/src/ua-parser.js":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function(window,undefined){"use strict";var MODEL="model",NAME="name",TYPE="type",VENDOR="vendor",VERSION="version",MOBILE="mobile",TABLET="tablet",SMARTTV="smarttv",enumerize=function(arr){for(var enums={},i=0;i<arr.length;i++)enums[arr[i].toUpperCase()]=arr[i];return enums},has=function(str1,str2){return"string"==typeof str1&&-1!==lowerize(str2).indexOf(lowerize(str1))},lowerize=function(str){return str.toLowerCase()},trim=function(str,len){if("string"==typeof str)return str=str.replace(/^\s\s*/,"").replace(/\s\s*$/,""),void 0===len?str:str.substring(0,275)},rgxMapper=function(ua,arrays){for(var j,k,p,q,matches,match,i=0;i<arrays.length&&!matches;){var regex=arrays[i],props=arrays[i+1];for(j=k=0;j<regex.length&&!matches;)if(matches=regex[j++].exec(ua))for(p=0;p<props.length;p++)match=matches[++k],"object"==typeof(q=props[p])&&q.length>0?2===q.length?"function"==typeof q[1]?this[q[0]]=q[1].call(this,match):this[q[0]]=q[1]:3===q.length?"function"!=typeof q[1]||q[1].exec&&q[1].test?this[q[0]]=match?match.replace(q[1],q[2]):undefined:this[q[0]]=match?q[1].call(this,match,q[2]):undefined:4===q.length&&(this[q[0]]=match?q[3].call(this,match.replace(q[1],q[2])):undefined):this[q]=match||undefined;i+=2}},strMapper=function(str,map){for(var i in map)if("object"==typeof map[i]&&map[i].length>0){for(var j=0;j<map[i].length;j++)if(has(map[i][j],str))return"?"===i?undefined:i}else if(has(map[i],str))return"?"===i?undefined:i;return str},windowsVersionMap={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},regexes={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[VERSION,[NAME,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[VERSION,[NAME,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[NAME,VERSION],[/opios[\/ ]+([\w\.]+)/i],[VERSION,[NAME,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[VERSION,[NAME,"Opera"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[NAME,VERSION],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[VERSION,[NAME,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[VERSION,[NAME,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[VERSION,[NAME,"WeChat"]],[/konqueror\/([\w\.]+)/i],[VERSION,[NAME,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[VERSION,[NAME,"IE"]],[/yabrowser\/([\w\.]+)/i],[VERSION,[NAME,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[NAME,/(.+)/,"$1 Secure Browser"],VERSION],[/\bfocus\/([\w\.]+)/i],[VERSION,[NAME,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[VERSION,[NAME,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[VERSION,[NAME,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[VERSION,[NAME,"Dolphin"]],[/coast\/([\w\.]+)/i],[VERSION,[NAME,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[VERSION,[NAME,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[VERSION,[NAME,"Firefox"]],[/\bqihu|(qi?ho?o?|360)browser/i],[[NAME,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[NAME,/(.+)/,"$1 Browser"],VERSION],[/(comodo_dragon)\/([\w\.]+)/i],[[NAME,/_/g," "],VERSION],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[NAME,VERSION],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[NAME],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[NAME,"Facebook"],VERSION],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[NAME,VERSION],[/\bgsa\/([\w\.]+) .*safari\//i],[VERSION,[NAME,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[VERSION,[NAME,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[NAME,"Chrome WebView"],VERSION],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[VERSION,[NAME,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[NAME,VERSION],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[VERSION,[NAME,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[VERSION,NAME],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[NAME,[VERSION,strMapper,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[NAME,VERSION],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[NAME,"Netscape"],VERSION],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[VERSION,[NAME,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[NAME,VERSION]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[["architecture","arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[["architecture","armhf"]],[/windows (ce|mobile); ppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[["architecture",/ower/,"",lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[["architecture",lowerize]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[MODEL,[VENDOR,"Samsung"],[TYPE,TABLET]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[MODEL,[VENDOR,"Samsung"],[TYPE,MOBILE]],[/((ipod|iphone)\d+,\d+)/i],[MODEL,[VENDOR,"Apple"],[TYPE,MOBILE]],[/(ipad\d+,\d+)/i],[MODEL,[VENDOR,"Apple"],[TYPE,TABLET]],[/\((ip(?:hone|od)[\w ]*);/i],[MODEL,[VENDOR,"Apple"],[TYPE,MOBILE]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[MODEL,[VENDOR,"Apple"],[TYPE,TABLET]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[MODEL,[VENDOR,"Huawei"],[TYPE,TABLET]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[MODEL,[VENDOR,"Huawei"],[TYPE,MOBILE]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[MODEL,/_/g," "],[VENDOR,"Xiaomi"],[TYPE,MOBILE]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[MODEL,/_/g," "],[VENDOR,"Xiaomi"],[TYPE,TABLET]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[MODEL,[VENDOR,"OPPO"],[TYPE,MOBILE]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[MODEL,[VENDOR,"Vivo"],[TYPE,MOBILE]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[MODEL,[VENDOR,"Realme"],[TYPE,MOBILE]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[MODEL,[VENDOR,"Motorola"],[TYPE,MOBILE]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[MODEL,[VENDOR,"Motorola"],[TYPE,TABLET]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[MODEL,[VENDOR,"LG"],[TYPE,TABLET]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[MODEL,[VENDOR,"LG"],[TYPE,MOBILE]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[MODEL,[VENDOR,"Lenovo"],[TYPE,TABLET]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[MODEL,/_/g," "],[VENDOR,"Nokia"],[TYPE,MOBILE]],[/(pixel c)\b/i],[MODEL,[VENDOR,"Google"],[TYPE,TABLET]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[MODEL,[VENDOR,"Google"],[TYPE,MOBILE]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[MODEL,[VENDOR,"Sony"],[TYPE,MOBILE]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[MODEL,"Xperia Tablet"],[VENDOR,"Sony"],[TYPE,TABLET]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[MODEL,[VENDOR,"OnePlus"],[TYPE,MOBILE]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[MODEL,[VENDOR,"Amazon"],[TYPE,TABLET]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[MODEL,/(.+)/g,"Fire Phone $1"],[VENDOR,"Amazon"],[TYPE,MOBILE]],[/(playbook);[-\w\),; ]+(rim)/i],[MODEL,VENDOR,[TYPE,TABLET]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[MODEL,[VENDOR,"BlackBerry"],[TYPE,MOBILE]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[MODEL,[VENDOR,"ASUS"],[TYPE,TABLET]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[MODEL,[VENDOR,"ASUS"],[TYPE,MOBILE]],[/(nexus 9)/i],[MODEL,[VENDOR,"HTC"],[TYPE,TABLET]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony(?!-bra))[-_ ]?([-\w]*)/i],[VENDOR,[MODEL,/_/g," "],[TYPE,MOBILE]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[MODEL,[VENDOR,"Acer"],[TYPE,TABLET]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[MODEL,[VENDOR,"Meizu"],[TYPE,MOBILE]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[MODEL,[VENDOR,"Sharp"],[TYPE,MOBILE]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[VENDOR,MODEL,[TYPE,TABLET]],[/(surface duo)/i],[MODEL,[VENDOR,"Microsoft"],[TYPE,TABLET]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[MODEL,[VENDOR,"Fairphone"],[TYPE,MOBILE]],[/(u304aa)/i],[MODEL,[VENDOR,"AT&T"],[TYPE,MOBILE]],[/\bsie-(\w*)/i],[MODEL,[VENDOR,"Siemens"],[TYPE,MOBILE]],[/\b(rct\w+) b/i],[MODEL,[VENDOR,"RCA"],[TYPE,TABLET]],[/\b(venue[\d ]{2,7}) b/i],[MODEL,[VENDOR,"Dell"],[TYPE,TABLET]],[/\b(q(?:mv|ta)\w+) b/i],[MODEL,[VENDOR,"Verizon"],[TYPE,TABLET]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[MODEL,[VENDOR,"Barnes & Noble"],[TYPE,TABLET]],[/\b(tm\d{3}\w+) b/i],[MODEL,[VENDOR,"NuVision"],[TYPE,TABLET]],[/\b(k88) b/i],[MODEL,[VENDOR,"ZTE"],[TYPE,TABLET]],[/\b(nx\d{3}j) b/i],[MODEL,[VENDOR,"ZTE"],[TYPE,MOBILE]],[/\b(gen\d{3}) b.+49h/i],[MODEL,[VENDOR,"Swiss"],[TYPE,MOBILE]],[/\b(zur\d{3}) b/i],[MODEL,[VENDOR,"Swiss"],[TYPE,TABLET]],[/\b((zeki)?tb.*\b) b/i],[MODEL,[VENDOR,"Zeki"],[TYPE,TABLET]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[VENDOR,"Dragon Touch"],MODEL,[TYPE,TABLET]],[/\b(ns-?\w{0,9}) b/i],[MODEL,[VENDOR,"Insignia"],[TYPE,TABLET]],[/\b((nxa|next)-?\w{0,9}) b/i],[MODEL,[VENDOR,"NextBook"],[TYPE,TABLET]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[VENDOR,"Voice"],MODEL,[TYPE,MOBILE]],[/\b(lvtel\-)?(v1[12]) b/i],[[VENDOR,"LvTel"],MODEL,[TYPE,MOBILE]],[/\b(ph-1) /i],[MODEL,[VENDOR,"Essential"],[TYPE,MOBILE]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[MODEL,[VENDOR,"Envizen"],[TYPE,TABLET]],[/\b(trio[-\w\. ]+) b/i],[MODEL,[VENDOR,"MachSpeed"],[TYPE,TABLET]],[/\btu_(1491) b/i],[MODEL,[VENDOR,"Rotor"],[TYPE,TABLET]],[/(shield[\w ]+) b/i],[MODEL,[VENDOR,"Nvidia"],[TYPE,TABLET]],[/(sprint) (\w+)/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/(kin\.[onetw]{3})/i],[[MODEL,/\./g," "],[VENDOR,"Microsoft"],[TYPE,MOBILE]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[MODEL,[VENDOR,"Zebra"],[TYPE,TABLET]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[MODEL,[VENDOR,"Zebra"],[TYPE,MOBILE]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[VENDOR,MODEL,[TYPE,"console"]],[/droid.+; (shield) bui/i],[MODEL,[VENDOR,"Nvidia"],[TYPE,"console"]],[/(playstation [345portablevi]+)/i],[MODEL,[VENDOR,"Sony"],[TYPE,"console"]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[MODEL,[VENDOR,"Microsoft"],[TYPE,"console"]],[/smart-tv.+(samsung)/i],[VENDOR,[TYPE,SMARTTV]],[/hbbtv.+maple;(\d+)/i],[[MODEL,/^/,"SmartTV"],[VENDOR,"Samsung"],[TYPE,SMARTTV]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[VENDOR,"LG"],[TYPE,SMARTTV]],[/(apple) ?tv/i],[VENDOR,[MODEL,"Apple TV"],[TYPE,SMARTTV]],[/crkey/i],[[MODEL,"Chromecast"],[VENDOR,"Google"],[TYPE,SMARTTV]],[/droid.+aft(\w)( bui|\))/i],[MODEL,[VENDOR,"Amazon"],[TYPE,SMARTTV]],[/\(dtv[\);].+(aquos)/i],[MODEL,[VENDOR,"Sharp"],[TYPE,SMARTTV]],[/(bravia[\w- ]+) bui/i],[MODEL,[VENDOR,"Sony"],[TYPE,SMARTTV]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[VENDOR,trim],[MODEL,trim],[TYPE,SMARTTV]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[TYPE,SMARTTV]],[/((pebble))app/i],[VENDOR,MODEL,[TYPE,"wearable"]],[/droid.+; (glass) \d/i],[MODEL,[VENDOR,"Google"],[TYPE,"wearable"]],[/droid.+; (wt63?0{2,3})\)/i],[MODEL,[VENDOR,"Zebra"],[TYPE,"wearable"]],[/(quest( 2)?)/i],[MODEL,[VENDOR,"Facebook"],[TYPE,"wearable"]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[VENDOR,[TYPE,"embedded"]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[MODEL,[TYPE,MOBILE]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[MODEL,[TYPE,TABLET]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[TYPE,TABLET]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[TYPE,MOBILE]],[/(android[-\w\. ]{0,9});.+buil/i],[MODEL,[VENDOR,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[VERSION,[NAME,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[VERSION,[NAME,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[NAME,VERSION],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[VERSION,NAME]],os:[[/microsoft (windows) (vista|xp)/i],[NAME,VERSION],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[NAME,[VERSION,strMapper,windowsVersionMap]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[NAME,"Windows"],[VERSION,strMapper,windowsVersionMap]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[VERSION,/_/g,"."],[NAME,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[NAME,"Mac OS"],[VERSION,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[VERSION,NAME],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[NAME,VERSION],[/\(bb(10);/i],[VERSION,[NAME,"BlackBerry"]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[VERSION,[NAME,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[VERSION,[NAME,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[VERSION,[NAME,"webOS"]],[/crkey\/([\d\.]+)/i],[VERSION,[NAME,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[NAME,"Chromium OS"],VERSION],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[NAME,VERSION],[/(sunos) ?([\w\.\d]*)/i],[[NAME,"Solaris"],VERSION],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[NAME,VERSION]]},UAParser=function(ua,extensions){if("object"==typeof ua&&(extensions=ua,ua=undefined),!(this instanceof UAParser))return new UAParser(ua,extensions).getResult();var _ua=ua||(void 0!==window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""),_rgxmap=extensions?function(regexes,extensions){var mergedRegexes={};for(var i in regexes)extensions[i]&&extensions[i].length%2==0?mergedRegexes[i]=extensions[i].concat(regexes[i]):mergedRegexes[i]=regexes[i];return mergedRegexes}(regexes,extensions):regexes;return this.getBrowser=function(){var version,_browser={};return _browser[NAME]=undefined,_browser[VERSION]=undefined,rgxMapper.call(_browser,_ua,_rgxmap.browser),_browser.major="string"==typeof(version=_browser.version)?version.replace(/[^\d\.]/g,"").split(".")[0]:void 0,_browser},this.getCPU=function(){var _cpu={architecture:undefined};return rgxMapper.call(_cpu,_ua,_rgxmap.cpu),_cpu},this.getDevice=function(){var _device={};return _device[VENDOR]=undefined,_device[MODEL]=undefined,_device[TYPE]=undefined,rgxMapper.call(_device,_ua,_rgxmap.device),_device},this.getEngine=function(){var _engine={};return _engine[NAME]=undefined,_engine[VERSION]=undefined,rgxMapper.call(_engine,_ua,_rgxmap.engine),_engine},this.getOS=function(){var _os={};return _os[NAME]=undefined,_os[VERSION]=undefined,rgxMapper.call(_os,_ua,_rgxmap.os),_os},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return _ua},this.setUA=function(ua){return _ua="string"==typeof ua&&ua.length>275?trim(ua,275):ua,this},this.setUA(_ua),this};UAParser.VERSION="0.7.31",UAParser.BROWSER=enumerize([NAME,VERSION,"major"]),UAParser.CPU=enumerize(["architecture"]),UAParser.DEVICE=enumerize([MODEL,VENDOR,TYPE,"console",MOBILE,SMARTTV,TABLET,"wearable","embedded"]),UAParser.ENGINE=UAParser.OS=enumerize([NAME,VERSION]),void 0!==exports?(module.exports&&(exports=module.exports=UAParser),exports.UAParser=UAParser):__webpack_require__.amdO?undefined===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return UAParser}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__):void 0!==window&&(window.UAParser=UAParser);var $=void 0!==window&&(window.jQuery||window.Zepto);if($&&!$.ua){var parser=new UAParser;$.ua=parser.getResult(),$.ua.get=function(){return parser.getUA()},$.ua.set=function(ua){parser.setUA(ua);var result=parser.getResult();for(var prop in result)$.ua[prop]=result[prop]}}}("object"==typeof window?window:this)},"../../node_modules/.pnpm/amplitude-js@8.21.7/node_modules/amplitude-js/amplitude.esm.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>newInstance});var base_namespaceObject={};__webpack_require__.r(base_namespaceObject),__webpack_require__.d(base_namespaceObject,{exclude:()=>exclude,extract:()=>extract,parse:()=>parse,parseUrl:()=>parseUrl,pick:()=>pick,stringify:()=>stringify,stringifyUrl:()=>stringifyUrl});__webpack_require__("../../node_modules/.pnpm/process@0.11.10/node_modules/process/browser.js");function isBrowserEnv(){return"object"==typeof window&&void 0!==(null===window||void 0===window?void 0:window.document)}var md5=__webpack_require__("../../node_modules/.pnpm/blueimp-md5@2.19.0/node_modules/blueimp-md5/js/md5.js"),md5_default=__webpack_require__.n(md5);const singleMatcher=new RegExp("(%[a-f0-9]{2})|([^%]+?)","gi"),multiMatcher=new RegExp("(%[a-f0-9]{2})+","gi");function decodeComponents(components,split){try{return[decodeURIComponent(components.join(""))]}catch{}if(1===components.length)return components;split=split||1;const left=components.slice(0,split),right=components.slice(split);return Array.prototype.concat.call([],decodeComponents(left),decodeComponents(right))}function decode(input){try{return decodeURIComponent(input)}catch{let tokens=input.match(singleMatcher)||[];for(let i=1;i<tokens.length;i++)tokens=(input=decodeComponents(tokens,i).join("")).match(singleMatcher)||[];return input}}function decodeUriComponent(encodedURI){if("string"!=typeof encodedURI)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof encodedURI+"`");try{return decodeURIComponent(encodedURI)}catch{return function customDecodeURIComponent(input){const replaceMap={"%FE%FF":"��","%FF%FE":"��"};let match=multiMatcher.exec(input);for(;match;){try{replaceMap[match[0]]=decodeURIComponent(match[0])}catch{const result=decode(match[0]);result!==match[0]&&(replaceMap[match[0]]=result)}match=multiMatcher.exec(input)}replaceMap["%C2"]="�";const entries=Object.keys(replaceMap);for(const key of entries)input=input.replace(new RegExp(key,"g"),replaceMap[key]);return input}(encodedURI)}}function splitOnFirst(string,separator){if("string"!=typeof string||"string"!=typeof separator)throw new TypeError("Expected the arguments to be of type `string`");if(""===string||""===separator)return[];const separatorIndex=string.indexOf(separator);return-1===separatorIndex?[]:[string.slice(0,separatorIndex),string.slice(separatorIndex+separator.length)]}function includeKeys(object,predicate){const result={};if(Array.isArray(predicate))for(const key of predicate){const descriptor=Object.getOwnPropertyDescriptor(object,key);descriptor?.enumerable&&Object.defineProperty(result,key,descriptor)}else for(const key of Reflect.ownKeys(object)){const descriptor=Object.getOwnPropertyDescriptor(object,key);if(descriptor.enumerable){predicate(key,object[key],object)&&Object.defineProperty(result,key,descriptor)}}return result}const isNullOrUndefined=value=>null==value,strictUriEncode=string=>encodeURIComponent(string).replace(/[!'()*]/g,(x=>`%${x.charCodeAt(0).toString(16).toUpperCase()}`)),encodeFragmentIdentifier=Symbol("encodeFragmentIdentifier");function validateArrayFormatSeparator(value){if("string"!=typeof value||1!==value.length)throw new TypeError("arrayFormatSeparator must be single character string")}function encode(value,options){return options.encode?options.strict?strictUriEncode(value):encodeURIComponent(value):value}function base_decode(value,options){return options.decode?decodeUriComponent(value):value}function keysSorter(input){return Array.isArray(input)?input.sort():"object"==typeof input?keysSorter(Object.keys(input)).sort(((a,b)=>Number(a)-Number(b))).map((key=>input[key])):input}function removeHash(input){const hashStart=input.indexOf("#");return-1!==hashStart&&(input=input.slice(0,hashStart)),input}function parseValue(value,options){return options.parseNumbers&&!Number.isNaN(Number(value))&&"string"==typeof value&&""!==value.trim()?value=Number(value):!options.parseBooleans||null===value||"true"!==value.toLowerCase()&&"false"!==value.toLowerCase()||(value="true"===value.toLowerCase()),value}function extract(input){const queryStart=(input=removeHash(input)).indexOf("?");return-1===queryStart?"":input.slice(queryStart+1)}function parse(query,options){validateArrayFormatSeparator((options={decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1,...options}).arrayFormatSeparator);const formatter=function parserForArrayFormat(options){let result;switch(options.arrayFormat){case"index":return(key,value,accumulator)=>{result=/\[(\d*)]$/.exec(key),key=key.replace(/\[\d*]$/,""),result?(void 0===accumulator[key]&&(accumulator[key]={}),accumulator[key][result[1]]=value):accumulator[key]=value};case"bracket":return(key,value,accumulator)=>{result=/(\[])$/.exec(key),key=key.replace(/\[]$/,""),result?void 0!==accumulator[key]?accumulator[key]=[...accumulator[key],value]:accumulator[key]=[value]:accumulator[key]=value};case"colon-list-separator":return(key,value,accumulator)=>{result=/(:list)$/.exec(key),key=key.replace(/:list$/,""),result?void 0!==accumulator[key]?accumulator[key]=[...accumulator[key],value]:accumulator[key]=[value]:accumulator[key]=value};case"comma":case"separator":return(key,value,accumulator)=>{const isArray="string"==typeof value&&value.includes(options.arrayFormatSeparator),isEncodedArray="string"==typeof value&&!isArray&&base_decode(value,options).includes(options.arrayFormatSeparator);value=isEncodedArray?base_decode(value,options):value;const newValue=isArray||isEncodedArray?value.split(options.arrayFormatSeparator).map((item=>base_decode(item,options))):null===value?value:base_decode(value,options);accumulator[key]=newValue};case"bracket-separator":return(key,value,accumulator)=>{const isArray=/(\[])$/.test(key);if(key=key.replace(/\[]$/,""),!isArray)return void(accumulator[key]=value?base_decode(value,options):value);const arrayValue=null===value?[]:value.split(options.arrayFormatSeparator).map((item=>base_decode(item,options)));void 0!==accumulator[key]?accumulator[key]=[...accumulator[key],...arrayValue]:accumulator[key]=arrayValue};default:return(key,value,accumulator)=>{void 0!==accumulator[key]?accumulator[key]=[...[accumulator[key]].flat(),value]:accumulator[key]=value}}}(options),returnValue=Object.create(null);if("string"!=typeof query)return returnValue;if(!(query=query.trim().replace(/^[?#&]/,"")))return returnValue;for(const parameter of query.split("&")){if(""===parameter)continue;const parameter_=options.decode?parameter.replace(/\+/g," "):parameter;let[key,value]=splitOnFirst(parameter_,"=");void 0===key&&(key=parameter_),value=void 0===value?null:["comma","separator","bracket-separator"].includes(options.arrayFormat)?value:base_decode(value,options),formatter(base_decode(key,options),value,returnValue)}for(const[key,value]of Object.entries(returnValue))if("object"==typeof value&&null!==value)for(const[key2,value2]of Object.entries(value))value[key2]=parseValue(value2,options);else returnValue[key]=parseValue(value,options);return!1===options.sort?returnValue:(!0===options.sort?Object.keys(returnValue).sort():Object.keys(returnValue).sort(options.sort)).reduce(((result,key)=>{const value=returnValue[key];return Boolean(value)&&"object"==typeof value&&!Array.isArray(value)?result[key]=keysSorter(value):result[key]=value,result}),Object.create(null))}function stringify(object,options){if(!object)return"";validateArrayFormatSeparator((options={encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:",",...options}).arrayFormatSeparator);const shouldFilter=key=>options.skipNull&&isNullOrUndefined(object[key])||options.skipEmptyString&&""===object[key],formatter=function encoderForArrayFormat(options){switch(options.arrayFormat){case"index":return key=>(result,value)=>{const index=result.length;return void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[",index,"]"].join("")]:[...result,[encode(key,options),"[",encode(index,options),"]=",encode(value,options)].join("")]};case"bracket":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),"[]"].join("")]:[...result,[encode(key,options),"[]=",encode(value,options)].join("")];case"colon-list-separator":return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,[encode(key,options),":list="].join("")]:[...result,[encode(key,options),":list=",encode(value,options)].join("")];case"comma":case"separator":case"bracket-separator":{const keyValueSep="bracket-separator"===options.arrayFormat?"[]=":"=";return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:(value=null===value?"":value,0===result.length?[[encode(key,options),keyValueSep,encode(value,options)].join("")]:[[result,encode(value,options)].join(options.arrayFormatSeparator)])}default:return key=>(result,value)=>void 0===value||options.skipNull&&null===value||options.skipEmptyString&&""===value?result:null===value?[...result,encode(key,options)]:[...result,[encode(key,options),"=",encode(value,options)].join("")]}}(options),objectCopy={};for(const[key,value]of Object.entries(object))shouldFilter(key)||(objectCopy[key]=value);const keys=Object.keys(objectCopy);return!1!==options.sort&&keys.sort(options.sort),keys.map((key=>{const value=object[key];return void 0===value?"":null===value?encode(key,options):Array.isArray(value)?0===value.length&&"bracket-separator"===options.arrayFormat?encode(key,options)+"[]":value.reduce(formatter(key),[]).join("&"):encode(key,options)+"="+encode(value,options)})).filter((x=>x.length>0)).join("&")}function parseUrl(url,options){options={decode:!0,...options};let[url_,hash]=splitOnFirst(url,"#");return void 0===url_&&(url_=url),{url:url_?.split("?")?.[0]??"",query:parse(extract(url),options),...options&&options.parseFragmentIdentifier&&hash?{fragmentIdentifier:base_decode(hash,options)}:{}}}function stringifyUrl(object,options){options={encode:!0,strict:!0,[encodeFragmentIdentifier]:!0,...options};const url=removeHash(object.url).split("?")[0]||"";let queryString=stringify({...parse(extract(object.url),{sort:!1}),...object.query},options);queryString&&(queryString=`?${queryString}`);let hash=function getHash(url){let hash="";const hashStart=url.indexOf("#");return-1!==hashStart&&(hash=url.slice(hashStart)),hash}(object.url);if(object.fragmentIdentifier){const urlObjectForFragmentEncode=new URL(url);urlObjectForFragmentEncode.hash=object.fragmentIdentifier,hash=options[encodeFragmentIdentifier]?urlObjectForFragmentEncode.hash:`#${object.fragmentIdentifier}`}return`${url}${queryString}${hash}`}function pick(input,filter,options){options={parseFragmentIdentifier:!0,[encodeFragmentIdentifier]:!1,...options};const{url,query,fragmentIdentifier}=parseUrl(input,options);return stringifyUrl({url,query:includeKeys(query,filter),fragmentIdentifier},options)}function exclude(input,filter,options){return pick(input,Array.isArray(filter)?key=>!filter.includes(key):(key,value)=>!filter(key,value),options)}const query_string=base_namespaceObject;var ua_parser=__webpack_require__("../../node_modules/.pnpm/@amplitude+ua-parser-js@0.7.31/node_modules/@amplitude/ua-parser-js/src/ua-parser.js"),ua_parser_default=__webpack_require__.n(ua_parser),ApplicationContextProviderImpl=function(){function ApplicationContextProviderImpl(){this.ua=new ua_parser.UAParser("undefined"!=typeof navigator?navigator.userAgent:null).getResult()}return ApplicationContextProviderImpl.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:getLanguage(),platform:"Web",os:getOs(this.ua),deviceModel:getDeviceModel(this.ua)}},ApplicationContextProviderImpl}(),getOs=function(ua){var _a,_b;return[null===(_a=ua.browser)||void 0===_a?void 0:_a.name,null===(_b=ua.browser)||void 0===_b?void 0:_b.major].filter((function(e){return null!=e})).join(" ")},getDeviceModel=function(ua){var _a;return null===(_a=ua.os)||void 0===_a?void 0:_a.name},getLanguage=function(){return"undefined"!=typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},EventBridgeImpl=function(){function EventBridgeImpl(){this.queue=[]}return EventBridgeImpl.prototype.logEvent=function(event){this.receiver?this.receiver(event):this.queue.length<512&&this.queue.push(event)},EventBridgeImpl.prototype.setEventReceiver=function(receiver){this.receiver=receiver,this.queue.length>0&&(this.queue.forEach((function(event){receiver(event)})),this.queue=[])},EventBridgeImpl}(),__assign=function(){return __assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)},isEqual=function(obj1,obj2){var typeA=typeof obj1;if(typeA!==typeof obj2)return!1;for(var _i=0,primitive_1=["string","number","boolean","undefined"];_i<primitive_1.length;_i++){if(primitive_1[_i]===typeA)return obj1===obj2}if(null==obj1&&null==obj2)return!0;if(null==obj1||null==obj2)return!1;if(obj1.length!==obj2.length)return!1;var isArrayA=Array.isArray(obj1),isArrayB=Array.isArray(obj2);if(isArrayA!==isArrayB)return!1;if(!isArrayA||!isArrayB){var sorted1=Object.keys(obj1).sort(),sorted2=Object.keys(obj2).sort();if(!isEqual(sorted1,sorted2))return!1;var result_1=!0;return Object.keys(obj1).forEach((function(key){isEqual(obj1[key],obj2[key])||(result_1=!1)})),result_1}for(var i=0;i<obj1.length;i++)if(!isEqual(obj1[i],obj2[i]))return!1;return!0};Object.entries||(Object.entries=function(obj){for(var ownProps=Object.keys(obj),i=ownProps.length,resArray=new Array(i);i--;)resArray[i]=[ownProps[i],obj[ownProps[i]]];return resArray});var IdentityStoreImpl=function(){function IdentityStoreImpl(){this.identity={userProperties:{}},this.listeners=new Set}return IdentityStoreImpl.prototype.editIdentity=function(){var self=this,actingUserProperties=__assign({},this.identity.userProperties),actingIdentity=__assign(__assign({},this.identity),{userProperties:actingUserProperties});return{setUserId:function(userId){return actingIdentity.userId=userId,this},setDeviceId:function(deviceId){return actingIdentity.deviceId=deviceId,this},setUserProperties:function(userProperties){return actingIdentity.userProperties=userProperties,this},updateUserProperties:function(actions){for(var actingProperties=actingIdentity.userProperties||{},_i=0,_a=Object.entries(actions);_i<_a.length;_i++){var _b=_a[_i],action=_b[0],properties=_b[1];switch(action){case"$set":for(var _c=0,_d=Object.entries(properties);_c<_d.length;_c++){var _e=_d[_c],key=_e[0],value=_e[1];actingProperties[key]=value}break;case"$unset":for(var _f=0,_g=Object.keys(properties);_f<_g.length;_f++){delete actingProperties[key=_g[_f]]}break;case"$clearAll":actingProperties={}}}return actingIdentity.userProperties=actingProperties,this},commit:function(){return self.setIdentity(actingIdentity),this}}},IdentityStoreImpl.prototype.getIdentity=function(){return __assign({},this.identity)},IdentityStoreImpl.prototype.setIdentity=function(identity){var originalIdentity=__assign({},this.identity);this.identity=__assign({},identity),isEqual(originalIdentity,this.identity)||this.listeners.forEach((function(listener){listener(identity)}))},IdentityStoreImpl.prototype.addIdentityListener=function(listener){this.listeners.add(listener)},IdentityStoreImpl.prototype.removeIdentityListener=function(listener){this.listeners.delete(listener)},IdentityStoreImpl}(),safeGlobal="undefined"!=typeof globalThis?globalThis:void 0!==__webpack_require__.g?__webpack_require__.g:self,AnalyticsConnector=function(){function AnalyticsConnector(){this.identityStore=new IdentityStoreImpl,this.eventBridge=new EventBridgeImpl,this.applicationContextProvider=new ApplicationContextProviderImpl}return AnalyticsConnector.getInstance=function(instanceName){return safeGlobal.analyticsConnectorInstances||(safeGlobal.analyticsConnectorInstances={}),safeGlobal.analyticsConnectorInstances[instanceName]||(safeGlobal.analyticsConnectorInstances[instanceName]=new AnalyticsConnector),safeGlobal.analyticsConnectorInstances[instanceName]},AnalyticsConnector}();function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread2(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor)}}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Object.defineProperty(Constructor,"prototype",{writable:!1}),Constructor}function _defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!=typeof input||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!=typeof res)return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"==typeof key?key:String(key)}var Constants={DEFAULT_INSTANCE:"$default_instance",API_VERSION:2,MAX_STRING_LENGTH:4096,MAX_PROPERTY_KEYS:1e3,IDENTIFY_EVENT:"$identify",GROUP_IDENTIFY_EVENT:"$groupidentify",EVENT_LOG_URL:"api.amplitude.com",EVENT_LOG_EU_URL:"api.eu.amplitude.com",DYNAMIC_CONFIG_URL:"regionconfig.amplitude.com",DYNAMIC_CONFIG_EU_URL:"regionconfig.eu.amplitude.com",LAST_EVENT_ID:"amplitude_lastEventId",LAST_EVENT_TIME:"amplitude_lastEventTime",LAST_IDENTIFY_ID:"amplitude_lastIdentifyId",LAST_SEQUENCE_NUMBER:"amplitude_lastSequenceNumber",SESSION_ID:"amplitude_sessionId",DEVICE_ID:"amplitude_deviceId",OPT_OUT:"amplitude_optOut",USER_ID:"amplitude_userId",DEVICE_ID_INDEX:0,USER_ID_INDEX:1,OPT_OUT_INDEX:2,SESSION_ID_INDEX:3,LAST_EVENT_TIME_INDEX:4,EVENT_ID_INDEX:5,IDENTIFY_ID_INDEX:6,SEQUENCE_NUMBER_INDEX:7,COOKIE_TEST_PREFIX:"amp_cookie_test",COOKIE_PREFIX:"amp",STORAGE_DEFAULT:"",STORAGE_COOKIES:"cookies",STORAGE_NONE:"none",STORAGE_LOCAL:"localStorage",STORAGE_SESSION:"sessionStorage",REVENUE_EVENT:"revenue_amount",REVENUE_PRODUCT_ID:"$productId",REVENUE_QUANTITY:"$quantity",REVENUE_PRICE:"$price",REVENUE_REVENUE_TYPE:"$revenueType",AMP_DEVICE_ID_PARAM:"amp_device_id",AMP_REFERRER_PARAM:"amp_referrer",REFERRER:"referrer",REFERRING_DOMAIN:"referring_domain",UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CAMPAIGN:"utm_campaign",UTM_TERM:"utm_term",UTM_CONTENT:"utm_content",ATTRIBUTION_EVENT:"[Amplitude] Attribution Captured",TRANSPORT_HTTP:"http",TRANSPORT_BEACON:"beacon"},UTF8_encode=function encode(s){for(var utftext="",n=0;n<s.length;n++){var c=s.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext},UTF8_decode=function decode(utftext){for(var s="",i=0,c=0,c1=0,c2=0;i<utftext.length;)(c=utftext.charCodeAt(i))<128?(s+=String.fromCharCode(c),i++):c>191&&c<224?(c1=utftext.charCodeAt(i+1),s+=String.fromCharCode((31&c)<<6|63&c1),i+=2):(c1=utftext.charCodeAt(i+1),c2=utftext.charCodeAt(i+2),s+=String.fromCharCode((15&c)<<12|(63&c1)<<6|63&c2),i+=3);return s},GlobalScope="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==__webpack_require__.g?__webpack_require__.g:void 0,Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function encode(input){try{if(GlobalScope.btoa&&GlobalScope.atob)return GlobalScope.btoa(unescape(encodeURIComponent(input)))}catch(e){}return Base64._encode(input)},_encode:function _encode(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;for(input=UTF8_encode(input);i<input.length;)enc1=(chr1=input.charCodeAt(i++))>>2,enc2=(3&chr1)<<4|(chr2=input.charCodeAt(i++))>>4,enc3=(15&chr2)<<2|(chr3=input.charCodeAt(i++))>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+Base64._keyStr.charAt(enc1)+Base64._keyStr.charAt(enc2)+Base64._keyStr.charAt(enc3)+Base64._keyStr.charAt(enc4);return output},decode:function decode(input){try{if(GlobalScope.btoa&&GlobalScope.atob)return decodeURIComponent(escape(GlobalScope.atob(input)))}catch(e){}return Base64._decode(input)},_decode:function _decode(input){var chr1,chr2,chr3,enc2,enc3,enc4,output="",i=0;for(input=input.replace(/[^A-Za-z0-9+/=]/g,"");i<input.length;)chr1=Base64._keyStr.indexOf(input.charAt(i++))<<2|(enc2=Base64._keyStr.indexOf(input.charAt(i++)))>>4,chr2=(15&enc2)<<4|(enc3=Base64._keyStr.indexOf(input.charAt(i++)))>>2,chr3=(3&enc3)<<6|(enc4=Base64._keyStr.indexOf(input.charAt(i++))),output+=String.fromCharCode(chr1),64!==enc3&&(output+=String.fromCharCode(chr2)),64!==enc4&&(output+=String.fromCharCode(chr3));return output=UTF8_decode(output)}},amplitude_esm_toString=Object.prototype.toString;function type(val){switch(amplitude_esm_toString.call(val)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===val?"null":void 0===val?"undefined":val!=val?"nan":val&&1===val.nodeType?"element":"undefined"!=typeof Buffer&&"function"==typeof Buffer.isBuffer&&Buffer.isBuffer(val)?"buffer":_typeof(val=val.valueOf?val.valueOf():Object.prototype.valueOf.apply(val))}var localStorage,logLevels={DISABLE:0,ERROR:1,WARN:2,INFO:3},logLevel=logLevels.WARN,log={error:function error(s){logLevel>=logLevels.ERROR&&_log(s)},warn:function warn(s){logLevel>=logLevels.WARN&&_log(s)},info:function info(s){logLevel>=logLevels.INFO&&_log(s)}},_log=function _log(s){try{console.log("[Amplitude] "+s)}catch(e){}},_truncateValue=function _truncateValue(value){return"string"===type(value)&&value.length>Constants.MAX_STRING_LENGTH?value.substring(0,Constants.MAX_STRING_LENGTH):value},validateInput=function validateInput(input,name,expectedType){return type(input)===expectedType||(log.error("Invalid "+name+" input type. Expected "+expectedType+" but received "+type(input)),!1)},validateProperties=function validateProperties(properties){var propsType=type(properties);if("object"!==propsType)return log.error("Error: invalid properties format. Expecting Javascript object, received "+propsType+", ignoring"),{};if(Object.keys(properties).length>Constants.MAX_PROPERTY_KEYS)return log.error("Error: too many properties (more than 1000), ignoring"),{};var copy={};for(var property in properties)if(Object.prototype.hasOwnProperty.call(properties,property)){var key=property,keyType=type(key);"string"!==keyType&&(key=String(key),log.warn("WARNING: Non-string property key, received type "+keyType+', coercing to string "'+key+'"'));var value=validatePropertyValue(key,properties[property]);null!==value&&(copy[key]=value)}return copy},invalidValueTypes=["nan","function","arguments","regexp","element"],validatePropertyValue=function validatePropertyValue(key,value){var valueType=type(value);if(-1!==invalidValueTypes.indexOf(valueType))log.warn('WARNING: Property key "'+key+'" with invalid value type '+valueType+", ignoring"),value=null;else if("undefined"===valueType)value=null;else if("error"===valueType)value=String(value),log.warn('WARNING: Property key "'+key+'" with value type error, coercing to '+value);else if("array"===valueType){for(var arrayCopy=[],i=0;i<value.length;i++){var element=value[i],elemType=type(element);"array"!==elemType?"object"===elemType?arrayCopy.push(validateProperties(element)):arrayCopy.push(validatePropertyValue(key,element)):log.warn("WARNING: Cannot have "+elemType+" nested in an array property value, skipping")}value=arrayCopy}else"object"===valueType&&(value=validateProperties(value));return value},validateGroupName=function validateGroupName(key,groupName){var groupNameType=type(groupName);if("string"===groupNameType)return groupName;if("date"===groupNameType||"number"===groupNameType||"boolean"===groupNameType)return groupName=String(groupName),log.warn("WARNING: Non-string groupName, received type "+groupNameType+', coercing to string "'+groupName+'"'),groupName;if("array"===groupNameType){for(var arrayCopy=[],i=0;i<groupName.length;i++){var element=groupName[i],elemType=type(element);"array"!==elemType&&"object"!==elemType?"string"===elemType?arrayCopy.push(element):"date"!==elemType&&"number"!==elemType&&"boolean"!==elemType||(element=String(element),log.warn("WARNING: Non-string groupName, received type "+elemType+', coercing to string "'+element+'"'),arrayCopy.push(element)):log.warn("WARNING: Skipping nested "+elemType+" in array groupName")}return arrayCopy}log.warn("WARNING: Non-string groupName, received type "+groupNameType+". Please use strings or array of strings for groupName")},utils={setLogLevel:function setLogLevel(logLevelName){Object.prototype.hasOwnProperty.call(logLevels,logLevelName)&&(logLevel=logLevels[logLevelName])},getLogLevel:function getLogLevel(){return logLevel},logLevels,log,isEmptyString:function isEmptyString(str){return!str||0===str.length},isWebWorkerEnvironment:function isWebWorkerEnvironment(){return"undefined"!=typeof WorkerGlobalScope},getQueryParam:function getQueryParam(name,query){name=name.replace(/[[]/,"\\[").replace(/[\]]/,"\\]");var results=new RegExp("[\\?&]"+name+"=([^&#]*)").exec(query);return null===results?void 0:decodeURIComponent(results[1].replace(/\+/g," "))},sessionStorageEnabled:function sessionStorageEnabled(){try{if(GlobalScope.sessionStorage)return!0}catch(e){}return!1},truncate:function truncate(value){if("array"===type(value))for(var i=0;i<value.length;i++)value[i]=truncate(value[i]);else if("object"===type(value))for(var key in value)key in value&&(value[key]=truncate(value[key]));else value=_truncateValue(value);return value},validateGroups:function validateGroups(groups){var groupsType=type(groups);if("object"!==groupsType)return log.error("Error: invalid groups format. Expecting Javascript object, received "+groupsType+", ignoring"),{};var copy={};for(var group in groups)if(Object.prototype.hasOwnProperty.call(groups,group)){var key=group,keyType=type(key);"string"!==keyType&&(key=String(key),log.warn("WARNING: Non-string groupType, received type "+keyType+', coercing to string "'+key+'"'));var value=validateGroupName(key,groups[group]);null!==value&&(copy[key]=value)}return copy},validateInput,validateProperties,validateDeviceId:function validateDeviceId(deviceId){return!!validateInput(deviceId,"deviceId","string")&&(!(deviceId.indexOf(".")>=0)||(log.error("Device IDs may not contain '.' characters. Value will be ignored: \"".concat(deviceId,'"')),!1))},validateTransport:function validateTransport(transport){return!!validateInput(transport,"transport","string")&&(transport!==Constants.TRANSPORT_HTTP&&transport!==Constants.TRANSPORT_BEACON?(log.error("transport value must be one of '".concat(Constants.TRANSPORT_BEACON,"' or '").concat(Constants.TRANSPORT_HTTP,"'")),!1):!(transport!==Constants.TRANSPORT_HTTP&&"undefined"!=typeof navigator&&!navigator.sendBeacon)||(log.error("browser does not support sendBeacon, so transport must be HTTP"),!1))},validateSessionId:function validateSessionId(sessionId){return!!(validateInput(sessionId,"sessionId","number")&&new Date(sessionId).getTime()>0)||(log.error("sessionId value must in milliseconds since epoch (Unix Timestamp)"),!1)},getLocation:function getLocation(){return GlobalScope.location},getHost:function getHost(url){var defaultHostname=GlobalScope.location?GlobalScope.location.hostname:"";if(url){if("undefined"!=typeof document){var a=document.createElement("a");return a.href=url,a.hostname||defaultHostname}if("function"==typeof URL)return new URL(url).hostname||defaultHostname}return defaultHostname}},get$1=function get(name){try{for(var ca=document.cookie.split(";"),value=null,i=0;i<ca.length;i++){for(var c=ca[i];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(name)){value=c.substring(name.length,c.length);break}}return value}catch(e){return null}},set$1=function set(name,value,opts){var expires=null!==value?opts.expirationDays:-1;if(expires){var date=new Date;date.setTime(date.getTime()+24*expires*60*60*1e3),expires=date}var str=name+"="+value;expires&&(str+="; expires="+expires.toUTCString()),str+="; path=/",opts.domain&&(str+="; domain="+opts.domain),opts.secure&&(str+="; Secure"),opts.sameSite&&(str+="; SameSite="+opts.sameSite),document.cookie=str},getLastEventTime=function getLastEventTime(){var parsedValue,cookie=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",strValue=cookie.split(".")[Constants.LAST_EVENT_TIME_INDEX];return strValue&&(parsedValue=parseInt(strValue,32)),parsedValue||(utils.log.warn("unable to parse malformed cookie: ".concat(cookie)),0)},baseCookie={set:set$1,get:get$1,getAll:function getAll(name){try{var _step,cookieArray=document.cookie.split(";").map((function(c){return c.trimStart()})),values=[],_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function(){};return{s:F,n:function(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function(e){throw e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function(){it=it.call(o)},n:function(){var step=it.next();return normalCompletion=step.done,step},e:function(e){didErr=!0,err=e},f:function(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(cookieArray);try{for(_iterator.s();!(_step=_iterator.n()).done;){for(var cookie=_step.value;" "===cookie.charAt(0);)cookie=cookie.substring(1);0===cookie.indexOf(name)&&values.push(cookie.substring(name.length))}}catch(err){_iterator.e(err)}finally{_iterator.f()}return values}catch(e){return[]}},getLastEventTime,sortByEventTime:function sortByEventTime(cookies){return _toConsumableArray(cookies).sort((function(c1,c2){var t1=getLastEventTime(c1);return getLastEventTime(c2)-t1}))},areCookiesEnabled:function areCookiesEnabled(){var opts=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},cookieName=Constants.COOKIE_TEST_PREFIX;if("undefined"==typeof document)return!1;var _areCookiesEnabled=!1;try{var uid=String(Date.now());set$1(cookieName,uid,opts),utils.log.info("Testing if cookies available"),_areCookiesEnabled=get$1(cookieName+"=")===uid}catch(e){utils.log.warn('Error thrown when checking for cookies. Reason: "'.concat(e,'"'))}finally{utils.log.info("Cleaning up cookies availability test"),set$1(cookieName,null,opts)}return _areCookiesEnabled}},base64Id=function base64Id(){for(var str="",i=0;i<22;++i)str+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".charAt(Math.floor(64*Math.random()));return str},topDomain=function topDomain(url){var parts=utils.getHost(url).split("."),levels=[],cname="_tldtest_"+base64Id();if(utils.isWebWorkerEnvironment())return"";for(var i=parts.length-2;i>=0;--i)levels.push(parts.slice(i).join("."));for(var _i=0;_i<levels.length;++_i){var domain=levels[_i],opts={domain:"."+domain};if(baseCookie.set(cname,1,opts),baseCookie.get(cname))return baseCookie.set(cname,null,opts),domain}return""},_options={expirationDays:void 0,domain:void 0},_domainSpecific=function _domainSpecific(name){var suffix="";return _options.domain&&(suffix="."===_options.domain.charAt(0)?_options.domain.substring(1):_options.domain),name+suffix},get=function get(name){var nameEq=_domainSpecific(name)+"=",value=baseCookie.get(nameEq);try{if(value)return JSON.parse(Base64.decode(value))}catch(e){return null}return null},set=function set(name,value){try{return baseCookie.set(_domainSpecific(name),Base64.encode(JSON.stringify(value)),_options),!0}catch(e){return!1}},remove=function remove(name){try{return baseCookie.set(_domainSpecific(name),null,_options),!0}catch(e){return!1}},Cookie={reset:function reset(){_options={expirationDays:void 0,domain:void 0}},options:function options(opts){if(0===arguments.length)return _options;opts=opts||{},_options.expirationDays=opts.expirationDays,_options.secure=opts.secure,_options.sameSite=opts.sameSite;var domain=utils.isEmptyString(opts.domain)?"."+topDomain(utils.getLocation().href):opts.domain,token=Math.random();_options.domain=domain,set("amplitude_test",token);var stored=get("amplitude_test");return stored&&stored===token||(domain=null),remove("amplitude_test"),_options.domain=domain,_options},get,set,remove,setRaw:function setRaw(name,value){try{return baseCookie.set(_domainSpecific(name),value,_options),!0}catch(e){return!1}},getRaw:function getRaw(name){var nameEq=_domainSpecific(name)+"=";return baseCookie.get(nameEq)}},WorkerStorage=function(){function WorkerStorage(){_classCallCheck(this,WorkerStorage),this.map=new Map,this.length=0}return _createClass(WorkerStorage,[{key:"key",value:function key(index){var key=Array.from(this.map.keys())[index];return this.map.get(key)}},{key:"getItem",value:function getItem(key){return this.map.get(key)}},{key:"setItem",value:function setItem(key,value){this.map.has(key)||(this.length+=1),this.map.set(key,value)}},{key:"removeItem",value:function removeItem(key){this.map.has(key)&&(this.length-=1,this.map.delete(key))}},{key:"clear",value:function clear(){this.map.clear(),this.length=0}}]),WorkerStorage}();if(function windowLocalStorageAvailable(){var result,uid=new Date;try{return GlobalScope.localStorage.setItem(uid,uid),result=GlobalScope.localStorage.getItem(uid)===String(uid),GlobalScope.localStorage.removeItem(uid),result}catch(e){}return!1}())localStorage=GlobalScope.localStorage;else if(void 0!==GlobalScope&&GlobalScope.globalStorage)try{localStorage=GlobalScope.globalStorage[GlobalScope.location.hostname]}catch(e){}else if("undefined"!=typeof document){var div=document.createElement("div"),attrKey="localStorage";div.style.display="none",document.getElementsByTagName("head")[0].appendChild(div),div.addBehavior&&(div.addBehavior("#default#userdata"),localStorage={length:0,setItem:function setItem(k,v){div.load(attrKey),div.getAttribute(k)||this.length++,div.setAttribute(k,v),div.save(attrKey)},getItem:function getItem(k){return div.load(attrKey),div.getAttribute(k)},removeItem:function removeItem(k){div.load(attrKey),div.getAttribute(k)&&this.length--,div.removeAttribute(k),div.save(attrKey)},clear:function clear(){div.load(attrKey);for(var attr,i=0;attr=div.XMLDocument.documentElement.attributes[i++];)div.removeAttribute(attr.name);div.save(attrKey),this.length=0},key:function key(k){return div.load(attrKey),div.XMLDocument.documentElement.attributes[k]}},div.load(attrKey),localStorage.length=div.XMLDocument.documentElement.attributes.length)}else utils.isWebWorkerEnvironment()&&(localStorage=new WorkerStorage);localStorage||(localStorage={length:0,setItem:function setItem(k,v){},getItem:function getItem(k){},removeItem:function removeItem(k){},clear:function clear(){},key:function key(k){}});var _storageOptionExists,localStorage$1=localStorage,cookieStorage=function cookieStorage(){this.storage=null};cookieStorage.prototype.getStorage=function(disableCookies){if(null!==this.storage)return this.storage;if(!disableCookies&&baseCookie.areCookiesEnabled())this.storage=Cookie;else{this.storage={_options:{expirationDays:void 0,domain:void 0,secure:!1},reset:function reset(){this._options={expirationDays:void 0,domain:void 0,secure:!1}},options:function options(opts){return 0===arguments.length?this._options:(opts=opts||{},this._options.expirationDays=opts.expirationDays||this._options.expirationDays,this._options.domain=opts.domain||this._options.domain||GlobalScope&&GlobalScope.location&&GlobalScope.location.hostname,this._options.secure=opts.secure||!1)},get:function get(name){try{return JSON.parse(localStorage$1.getItem("amp_cookiestore_"+name))}catch(e){}return null},set:function set(name,value){try{return localStorage$1.setItem("amp_cookiestore_"+name,JSON.stringify(value)),!0}catch(e){}return!1},remove:function remove(name){try{localStorage$1.removeItem("amp_cookiestore_"+name)}catch(e){return!1}}}}return this.storage};var storageOptionExists=(_defineProperty(_storageOptionExists={},Constants.STORAGE_COOKIES,!0),_defineProperty(_storageOptionExists,Constants.STORAGE_NONE,!0),_defineProperty(_storageOptionExists,Constants.STORAGE_LOCAL,!0),_defineProperty(_storageOptionExists,Constants.STORAGE_SESSION,!0),_storageOptionExists),MetadataStorage=function(){function MetadataStorage(_ref){var storageKey=_ref.storageKey,disableCookies=_ref.disableCookies,domain=_ref.domain,secure=_ref.secure,sameSite=_ref.sameSite,expirationDays=_ref.expirationDays,storage=_ref.storage;_classCallCheck(this,MetadataStorage),this.storageKey=storageKey,this.domain=domain,this.secure=secure,this.sameSite=sameSite,this.expirationDays=expirationDays,this.cookieDomain="";var loc=utils.getLocation()?utils.getLocation().href:void 0,writableTopDomain=disableCookies?"":topDomain(loc);if(this.cookieDomain=domain||(writableTopDomain?"."+writableTopDomain:null),storageOptionExists[storage])this.storage=storage;else{var disableCookieStorage=disableCookies||!baseCookie.areCookiesEnabled({domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:this.expirationDays});this.storage=disableCookieStorage?Constants.STORAGE_LOCAL:Constants.STORAGE_COOKIES}}return _createClass(MetadataStorage,[{key:"getCookieStorageKey",value:function getCookieStorageKey(){if(!this.domain)return this.storageKey;var suffix="."===this.domain.charAt(0)?this.domain.substring(1):this.domain;return"".concat(this.storageKey).concat(suffix?"_".concat(suffix):"")}},{key:"save",value:function save(_ref2){var deviceId=_ref2.deviceId,userId=_ref2.userId,optOut=_ref2.optOut,sessionId=_ref2.sessionId,lastEventTime=_ref2.lastEventTime,eventId=_ref2.eventId,identifyId=_ref2.identifyId,sequenceNumber=_ref2.sequenceNumber;if(this.storage!==Constants.STORAGE_NONE){var value=[deviceId,Base64.encode(userId||""),optOut?"1":"",sessionId?sessionId.toString(32):"0",lastEventTime?lastEventTime.toString(32):"0",eventId?eventId.toString(32):"0",identifyId?identifyId.toString(32):"0",sequenceNumber?sequenceNumber.toString(32):"0"].join(".");switch(this.storage){case Constants.STORAGE_SESSION:GlobalScope.sessionStorage&&GlobalScope.sessionStorage.setItem(this.storageKey,value);break;case Constants.STORAGE_LOCAL:localStorage$1.setItem(this.storageKey,value);break;case Constants.STORAGE_COOKIES:this.saveCookie(value)}}}},{key:"saveCookie",value:function saveCookie(value){baseCookie.set(this.getCookieStorageKey(),value,{domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:this.expirationDays})}},{key:"load",value:function load(){var str,_this=this;if(this.storage===Constants.STORAGE_COOKIES){var cookieKey=this.getCookieStorageKey()+"=",allCookies=baseCookie.getAll(cookieKey);if(0===allCookies.length||1===allCookies.length)str=allCookies[0];else{var latestCookie=baseCookie.sortByEventTime(allCookies)[0];allCookies.forEach((function(){return baseCookie.set(_this.getCookieStorageKey(),null,{})})),this.saveCookie(latestCookie),str=baseCookie.get(cookieKey)}}if(str||(str=localStorage$1.getItem(this.storageKey)),!str)try{str=GlobalScope.sessionStorage&&GlobalScope.sessionStorage.getItem(this.storageKey)}catch(e){utils.log.info('window.sessionStorage unavailable. Reason: "'.concat(e,'"'))}if(!str)return null;var values=str.split("."),userId=null;if(values[Constants.USER_ID_INDEX])try{userId=Base64.decode(values[Constants.USER_ID_INDEX])}catch(e){userId=null}return{deviceId:values[Constants.DEVICE_ID_INDEX],userId,optOut:"1"===values[Constants.OPT_OUT_INDEX],sessionId:parseInt(values[Constants.SESSION_ID_INDEX],32),lastEventTime:parseInt(values[Constants.LAST_EVENT_TIME_INDEX],32),eventId:parseInt(values[Constants.EVENT_ID_INDEX],32),identifyId:parseInt(values[Constants.IDENTIFY_ID_INDEX],32),sequenceNumber:parseInt(values[Constants.SEQUENCE_NUMBER_INDEX],32)}}},{key:"clear",value:function clear(){var str;if(this.storage===Constants.STORAGE_COOKIES&&(str=baseCookie.get(this.getCookieStorageKey()+"="),baseCookie.set(this.getCookieStorageKey(),null,{domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:0})),str||(str=localStorage$1.getItem(this.storageKey),localStorage$1.clear()),!str)try{str=GlobalScope.sessionStorage&&GlobalScope.sessionStorage.getItem(this.storageKey),GlobalScope.sessionStorage.clear()}catch(e){utils.log.info('window.sessionStorage unavailable. Reason: "'.concat(e,'"'))}return!!str}}]),MetadataStorage}(),Identify=function Identify(){this.userPropertiesOperations={},this.properties=[]};Identify.prototype.add=function(property,value){return"number"===type(value)||"string"===type(value)?this._addOperation("$add",property,value):utils.log.error("Unsupported type for value: "+type(value)+", expecting number or string"),this},Identify.prototype.append=function(property,value){return this._addOperation("$append",property,value),this},Identify.prototype.clearAll=function(){return Object.keys(this.userPropertiesOperations).length>0?(Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,"$clearAll")||utils.log.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"),this):(this.userPropertiesOperations.$clearAll="-",this)},Identify.prototype.prepend=function(property,value){return this._addOperation("$prepend",property,value),this},Identify.prototype.set=function(property,value){return this._addOperation("$set",property,value),this},Identify.prototype.setOnce=function(property,value){return this._addOperation("$setOnce",property,value),this},Identify.prototype.unset=function(property){return this._addOperation("$unset",property,"-"),this},Identify.prototype.preInsert=function(property,value){return this._addOperation("$preInsert",property,value),this},Identify.prototype.postInsert=function(property,value){return this._addOperation("$postInsert",property,value),this},Identify.prototype.remove=function(property,value){return this._addOperation("$remove",property,value),this},Identify.prototype._addOperation=function(operation,property,value){Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,"$clearAll")?utils.log.error("This identify already contains a $clearAll operation, skipping operation "+operation):-1===this.properties.indexOf(property)?(Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,operation)||(this.userPropertiesOperations[operation]={}),this.userPropertiesOperations[operation][property]=value,this.properties.push(property)):utils.log.error('User property "'+property+'" already used in this identify, skipping operation '+operation)};var Request=function Request(url,data,headers){this.url=url,this.data=data||{},this.headers=headers},CORS_HEADER="Cross-Origin-Resource-Policy";Request.prototype.send=function(callback){if(!!GlobalScope.XDomainRequest){var xdr=new GlobalScope.XDomainRequest;xdr.open("POST",this.url,!0),xdr.onload=function(){callback(200,xdr.responseText)},xdr.onerror=function(){"Request Entity Too Large"===xdr.responseText?callback(413,xdr.responseText):callback(500,xdr.responseText)},xdr.ontimeout=function(){},xdr.onprogress=function(){},xdr.send(query_string.stringify(this.data))}else if("undefined"!=typeof XMLHttpRequest){var xhr=new XMLHttpRequest;xhr.open("POST",this.url,!0),xhr.onreadystatechange=function(){4===xhr.readyState&&callback(xhr.status,xhr.responseText)},function setHeaders(xhr,headers){for(var header in headers)(header!==CORS_HEADER||headers[header])&&xhr.setRequestHeader(header,headers[header])}(xhr,this.headers),xhr.send(query_string.stringify(this.data))}else{var responseStatus=void 0;fetch(this.url,{method:"POST",headers:this.headers,body:query_string.stringify(this.data)}).then((function(response){return responseStatus=response.status,response.text()})).then((function(responseText){callback(responseStatus,responseText)}))}};var Revenue=function Revenue(){this._price=null,this._productId=null,this._quantity=1,this._revenueType=null,this._properties=null};Revenue.prototype.setProductId=function setProductId(productId){return"string"!==type(productId)?utils.log.error("Unsupported type for productId: "+type(productId)+", expecting string"):utils.isEmptyString(productId)?utils.log.error("Invalid empty productId"):this._productId=productId,this},Revenue.prototype.setQuantity=function setQuantity(quantity){return"number"!==type(quantity)?utils.log.error("Unsupported type for quantity: "+type(quantity)+", expecting number"):this._quantity=parseInt(quantity),this},Revenue.prototype.setPrice=function setPrice(price){return"number"!==type(price)?utils.log.error("Unsupported type for price: "+type(price)+", expecting number"):this._price=price,this},Revenue.prototype.setRevenueType=function setRevenueType(revenueType){return"string"!==type(revenueType)?utils.log.error("Unsupported type for revenueType: "+type(revenueType)+", expecting string"):this._revenueType=revenueType,this},Revenue.prototype.setEventProperties=function setEventProperties(eventProperties){return"object"!==type(eventProperties)?utils.log.error("Unsupported type for eventProperties: "+type(eventProperties)+", expecting object"):this._properties=utils.validateProperties(eventProperties),this},Revenue.prototype._isValidRevenue=function _isValidRevenue(){return"number"===type(this._price)||(utils.log.error("Invalid revenue, need to set price field"),!1)},Revenue.prototype._toJSONObject=function _toJSONObject(){var obj="object"===type(this._properties)?this._properties:{};return null!==this._productId&&(obj[Constants.REVENUE_PRODUCT_ID]=this._productId),null!==this._quantity&&(obj[Constants.REVENUE_QUANTITY]=this._quantity),null!==this._price&&(obj[Constants.REVENUE_PRICE]=this._price),null!==this._revenueType&&(obj[Constants.REVENUE_REVENUE_TYPE]=this._revenueType),obj};var uuid=function uuid(a){return a?(a^16*Math.random()>>a/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,uuid)},language_getLanguage=function getLanguage(){return"undefined"!=typeof navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||""},AmplitudeServerZone={US:"US",EU:"EU"},getEventLogApi=function getEventLogApi(serverZone){var eventLogUrl=Constants.EVENT_LOG_URL;switch(serverZone){case AmplitudeServerZone.EU:eventLogUrl=Constants.EVENT_LOG_EU_URL;break;case AmplitudeServerZone.US:eventLogUrl=Constants.EVENT_LOG_URL}return eventLogUrl},DEFAULT_OPTIONS={apiEndpoint:Constants.EVENT_LOG_URL,batchEvents:!1,cookieExpiration:365,cookieName:"amplitude_id",sameSiteCookie:"Lax",cookieForceUpgrade:!1,deferInitialization:!1,disableCookies:!1,deviceIdFromUrlParam:!1,domain:"",eventUploadPeriodMillis:3e4,eventUploadThreshold:30,forceHttps:!0,includeFbclid:!1,includeGclid:!1,includeReferrer:!1,includeUtm:!1,ingestionMetadata:{sourceName:"",sourceVersion:""},language:language_getLanguage(),library:{name:"amplitude-js",version:"8.21.7"},logLevel:"WARN",logAttributionCapturedEvent:!1,optOut:!1,onError:function onError(){},onExitPage:function onExitPage(){},onNewSessionStart:function onNewSessionStart(){},plan:{branch:"",source:"",version:"",versionId:""},platform:"Web",savedMaxCount:1e3,saveEvents:!0,saveParamsReferrerOncePerSession:!0,secureCookie:!1,sessionTimeout:18e5,storage:Constants.STORAGE_DEFAULT,trackingOptions:{city:!0,country:!0,carrier:!0,device_manufacturer:!0,device_model:!0,dma:!0,ip_address:!0,language:!0,os_name:!0,os_version:!0,platform:!0,region:!0,version_name:!0},transport:Constants.TRANSPORT_HTTP,unsetParamsReferrerOnNewSession:!1,unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8","Cross-Origin-Resource-Policy":"cross-origin"},serverZone:AmplitudeServerZone.US,useDynamicConfig:!1,serverZoneBasedApi:!1,sessionId:null,partnerId:""},instance$1=new(function(){function ConfigManager(){return _classCallCheck(this,ConfigManager),ConfigManager.instance||(this.ingestionEndpoint=Constants.EVENT_LOG_URL,ConfigManager.instance=this),ConfigManager.instance}return _createClass(ConfigManager,[{key:"refresh",value:function refresh(serverZone,forceHttps,callback){var protocol="https";forceHttps||"https:"===GlobalScope.location.protocol||(protocol="http");var dynamicConfigUrl=protocol+"://"+function getDynamicConfigApi(serverZone){var dynamicConfigUrl=Constants.DYNAMIC_CONFIG_URL;switch(serverZone){case AmplitudeServerZone.EU:dynamicConfigUrl=Constants.DYNAMIC_CONFIG_EU_URL;break;case AmplitudeServerZone.US:dynamicConfigUrl=Constants.DYNAMIC_CONFIG_URL}return dynamicConfigUrl}(serverZone),self=this;if(!!GlobalScope.XDomainRequest){var xdr=new GlobalScope.XDomainRequest;xdr.open("GET",dynamicConfigUrl,!0),xdr.onload=function(){var response=JSON.parse(xdr.responseText);self.ingestionEndpoint=response.ingestionEndpoint,callback&&callback()},xdr.onerror=function(){},xdr.ontimeout=function(){},xdr.onprogress=function(){},xdr.send()}else{var xhr=new XMLHttpRequest;xhr.open("GET",dynamicConfigUrl,!0),xhr.onreadystatechange=function(){if(4===xhr.readyState&&200===xhr.status){var response=JSON.parse(xhr.responseText);self.ingestionEndpoint=response.ingestionEndpoint,callback&&callback()}},xhr.send()}}}]),ConfigManager}()),AmplitudeClient=function AmplitudeClient(instanceName){isBrowserEnv()||utils.isWebWorkerEnvironment()||utils.log.warn("amplitude-js will not work in a non-browser environment. If you are planning to add Amplitude to a node environment, please use @amplitude/node"),this._instanceName=utils.isEmptyString(instanceName)?Constants.DEFAULT_INSTANCE:instanceName.toLowerCase(),this._unsentEvents=[],this._unsentIdentifys=[],this.options=_objectSpread2(_objectSpread2({},DEFAULT_OPTIONS),{},{headers:_objectSpread2({},DEFAULT_OPTIONS.headers),ingestionMetadata:_objectSpread2({},DEFAULT_OPTIONS.ingestionMetadata),library:_objectSpread2({},DEFAULT_OPTIONS.library),plan:_objectSpread2({},DEFAULT_OPTIONS.plan),trackingOptions:_objectSpread2({},DEFAULT_OPTIONS.trackingOptions)}),this._q=[],this._sending=!1,this._updateScheduled=!1,this._onInitCallbacks=[],this._onNewSessionStartCallbacks=[],this._eventId=0,this._identifyId=0,this._lastEventTime=null,this._newSession=!1,this._sequenceNumber=0,this._sessionId=null,this._isInitialized=!1,this._connector=null,this._userAgent="undefined"!=typeof navigator&&navigator&&navigator.userAgent||null,this._ua=new(ua_parser_default())(this._userAgent).getResult()};AmplitudeClient.prototype.Identify=Identify,AmplitudeClient.prototype.Revenue=Revenue,AmplitudeClient.prototype.init=function init(apiKey,opt_userId,opt_config,opt_callback){var _this=this;if("string"!==type(apiKey)||utils.isEmptyString(apiKey))utils.log.error("Invalid apiKey. Please re-initialize with a valid apiKey");else try{this._connector=AnalyticsConnector.getInstance(this._instanceName),_parseConfig(this.options,opt_config),(isBrowserEnv()||utils.isWebWorkerEnvironment())&&void 0!==GlobalScope.Prototype&&Array.prototype.toJSON&&(!function(){var _a;if(isBrowserEnv()){var augmentedWindow=window,augmentedArray=Array;if(void 0!==augmentedWindow.Prototype&&void 0!==(null===(_a=augmentedArray.prototype)||void 0===_a?void 0:_a.toJSON))return delete augmentedArray.prototype.toJSON,!0}}(),utils.log.warn("Prototype.js injected Array.prototype.toJSON. Deleting Array.prototype.toJSON to prevent double-stringify")),this.options.cookieName!==DEFAULT_OPTIONS.cookieName&&utils.log.warn("The cookieName option is deprecated. We will be ignoring it for newer cookies"),this.options.serverZoneBasedApi&&(this.options.apiEndpoint=getEventLogApi(this.options.serverZone)),this._refreshDynamicConfig(),this.options.apiKey=apiKey,this._storageSuffix="_"+apiKey+(this._instanceName===Constants.DEFAULT_INSTANCE?"":"_"+this._instanceName),this._storageSuffixV5=apiKey.slice(0,6),this._oldCookiename=this.options.cookieName+this._storageSuffix,this._unsentKey=this.options.unsentKey+this._storageSuffix,this._unsentIdentifyKey=this.options.unsentIdentifyKey+this._storageSuffix,this._cookieName=Constants.COOKIE_PREFIX+"_"+this._storageSuffixV5,this.cookieStorage=(new cookieStorage).getStorage(this.options.disableCookies),this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie}),this._metadataStorage=new MetadataStorage({storageKey:this._cookieName,disableCookies:this.options.disableCookies,expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie,storage:this.options.storage});var hasOldCookie=!!this.cookieStorage.get(this._oldCookiename),hasNewCookie=!!this._metadataStorage.load();this._useOldCookie=!hasNewCookie&&hasOldCookie&&!this.options.cookieForceUpgrade;var hasCookie=hasNewCookie||hasOldCookie;if(this.options.deferInitialization&&!hasCookie)return void this._deferInitialization(apiKey,opt_userId,opt_config,opt_callback);this.options.domain=this.cookieStorage.options().domain,"string"===type(this.options.logLevel)&&utils.setLogLevel(this.options.logLevel);var trackingOptions=_generateApiPropertiesTrackingConfig(this);this._apiPropertiesTrackingOptions=Object.keys(trackingOptions).length>0?{tracking_options:trackingOptions}:{},this.options.cookieForceUpgrade&&hasOldCookie&&(hasNewCookie||_upgradeCookieData(this),this.cookieStorage.remove(this._oldCookiename)),_loadCookieData(this),this._pendingReadStorage=!0;this.options.saveEvents&&(this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey).map((function(event){return{event}})).concat(this._unsentEvents),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey).map((function(event){return{event}})).concat(this._unsentIdentifys)),opt_config&&opt_config.onNewSessionStart&&this.onNewSessionStart(this.options.onNewSessionStart),function initFromStorage(storedDeviceId){opt_config&&opt_config.deviceId&&!utils.validateDeviceId(opt_config.deviceId)&&(utils.log.error('Invalid device ID rejected. Randomly generated UUID will be used instead of "'.concat(opt_config.deviceId,'"')),delete opt_config.deviceId),_this.options.deviceId=_this._getInitialDeviceId(opt_config&&opt_config.deviceId,storedDeviceId),_this.options.userId="string"===type(opt_userId)&&!utils.isEmptyString(opt_userId)&&opt_userId||"number"===type(opt_userId)&&opt_userId.toString()||_this.options.userId||null;var now=(new Date).getTime(),startNewSession=!_this._sessionId||!_this._lastEventTime||now-_this._lastEventTime>_this.options.sessionTimeout||_this.options.sessionId;startNewSession&&(_this.options.unsetParamsReferrerOnNewSession&&_this._unsetUTMParams(),_this._newSession=!0,_this._sessionId=_this.options.sessionId||now,_this.options.sessionId=void 0,_this.options.saveParamsReferrerOncePerSession&&_this._trackParamsAndReferrer()),_this.options.saveParamsReferrerOncePerSession||_this._trackParamsAndReferrer(),_this.options.saveEvents&&(_validateUnsentEventQueue(_this._unsentEvents),_validateUnsentEventQueue(_this._unsentIdentifys)),_this._lastEventTime=now,_saveCookieData(_this),_this._pendingReadStorage=!1,_this._sendEventsIfReady();for(var i=0;i<_this._onInitCallbacks.length;i++)_this._onInitCallbacks[i](_this);_this._onInitCallbacks=[],_this._isInitialized=!0,startNewSession&&_this._runNewSessionStartCallbacks()}(),this.runQueuedFunctions(),"function"===type(opt_callback)&&opt_callback(this);var onExitPage=this.options.onExitPage;if("function"===type(onExitPage)&&GlobalScope.addEventListener&&!this.pageHandlersAdded){this.pageHandlersAdded=!0;GlobalScope.addEventListener("pagehide",(function(){!function handleVisibilityChange(){var prevTransport=_this.options.transport;_this.setTransport(Constants.TRANSPORT_BEACON),onExitPage(),_this.setTransport(prevTransport)}()}),!1)}this._connector.eventBridge.setEventReceiver((function(event){_this._logEvent(event.eventType,event.eventProperties,event.userProperties)}));var editor=this._connector.identityStore.editIdentity();this.options.deviceId&&editor.setDeviceId(this.options.deviceId),this.options.userId&&editor.setUserId(this.options.userId),editor.commit()}catch(err){utils.log.error(err),opt_config&&"function"===type(opt_config.onError)&&opt_config.onError(err)}},AmplitudeClient.prototype._runNewSessionStartCallbacks=function(){for(var i=0;i<this._onNewSessionStartCallbacks.length;i++)this._onNewSessionStartCallbacks[i](this)},AmplitudeClient.prototype.deleteLowerLevelDomainCookies=function(){var host=utils.getHost(),cookieHost=this.options.domain&&"."===this.options.domain[0]?this.options.domain.slice(1):this.options.domain;if(cookieHost&&utils.isWebWorkerEnvironment()&&host!==cookieHost&&new RegExp(cookieHost+"$").test(host)){for(var hostParts=host.split("."),cookieHostParts=cookieHost.split("."),i=hostParts.length;i>cookieHostParts.length;--i){var deleteDomain=hostParts.slice(hostParts.length-i).join(".");baseCookie.set(this._cookieName,null,{domain:"."+deleteDomain})}baseCookie.set(this._cookieName,null,{})}},AmplitudeClient.prototype._getInitialDeviceId=function(configDeviceId,storedDeviceId){if(configDeviceId)return configDeviceId;if(this.options.deviceIdFromUrlParam){var deviceIdFromUrlParam=this._getDeviceIdFromUrlParam(this._getUrlParams());if(deviceIdFromUrlParam)return deviceIdFromUrlParam}return this.options.deviceId?this.options.deviceId:storedDeviceId||base64Id()};var _validateUnsentEventQueue=function _validateUnsentEventQueue(queue){for(var i=0;i<queue.length;i++){var userProperties=queue[i].event.user_properties,eventProperties=queue[i].event.event_properties,groups=queue[i].event.groups;queue[i].event.user_properties=utils.validateProperties(userProperties),queue[i].event.event_properties=utils.validateProperties(eventProperties),queue[i].event.groups=utils.validateGroups(groups)}};AmplitudeClient.prototype._trackParamsAndReferrer=function _trackParamsAndReferrer(){var utmProperties,referrerProperties,gclidProperties,fbclidProperties;if(this.options.includeUtm&&(utmProperties=this._initUtmData()),this.options.includeReferrer&&(referrerProperties=this._saveReferrer(this._getReferrer())),this.options.includeGclid&&(gclidProperties=this._saveGclid(this._getUrlParams())),this.options.includeFbclid&&(fbclidProperties=this._saveFbclid(this._getUrlParams())),this.options.logAttributionCapturedEvent){var attributionProperties=_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},utmProperties),referrerProperties),gclidProperties),fbclidProperties);Object.keys(attributionProperties).length>0&&this.logEvent(Constants.ATTRIBUTION_EVENT,attributionProperties)}};var _parseConfig=function _parseConfig(options,config){if("object"===type(config)){var freeFormObjectKeys=new Set(["headers"]),parseValidateAndLoad=function parseValidateAndLoad(key){if(Object.prototype.hasOwnProperty.call(options,key)){var inputValue=config[key],expectedType=type(options[key]);("transport"!==key||utils.validateTransport(inputValue))&&("sessionId"!==key||null===inputValue?utils.validateInput(inputValue,key+" option",expectedType)&&("boolean"===expectedType?options[key]=!!inputValue:"string"===expectedType&&!utils.isEmptyString(inputValue)||"number"===expectedType&&inputValue>0||"function"===expectedType?options[key]=inputValue:"object"===expectedType&&_parseConfig(options[key],inputValue)):options[key]=utils.validateSessionId(inputValue)?inputValue:null)}};for(var key in config)freeFormObjectKeys.has(key)?options[key]=_objectSpread2(_objectSpread2({},options[key]),config[key]):Object.prototype.hasOwnProperty.call(config,key)&&parseValidateAndLoad(key)}};AmplitudeClient.prototype.runQueuedFunctions=function(){var queue=this._q;this._q=[];for(var i=0;i<queue.length;i++){var fn=this[queue[i][0]];"function"===type(fn)&&fn.apply(this,queue[i].slice(1))}},AmplitudeClient.prototype._apiKeySet=function _apiKeySet(methodName){return!utils.isEmptyString(this.options.apiKey)||(utils.log.error("Invalid apiKey. Please set a valid apiKey with init() before calling "+methodName),!1)},AmplitudeClient.prototype._loadSavedUnsentEvents=function _loadSavedUnsentEvents(unsentKey){var savedUnsentEventsString=this._getFromStorage(localStorage$1,unsentKey),unsentEvents=this._parseSavedUnsentEventsString(savedUnsentEventsString,unsentKey);return this._setInStorage(localStorage$1,unsentKey,JSON.stringify(unsentEvents)),unsentEvents},AmplitudeClient.prototype._parseSavedUnsentEventsString=function _parseSavedUnsentEventsString(savedUnsentEventsString,unsentKey){if(utils.isEmptyString(savedUnsentEventsString))return[];if("string"===type(savedUnsentEventsString))try{var events=JSON.parse(savedUnsentEventsString);if("array"===type(events))return events}catch(e){}return utils.log.error("Unable to load "+unsentKey+" events. Restart with a new empty queue."),[]},AmplitudeClient.prototype.isNewSession=function isNewSession(){return this._newSession},AmplitudeClient.prototype.onInit=function onInit(callback){this._isInitialized?callback(this):this._onInitCallbacks.push(callback)},AmplitudeClient.prototype.onNewSessionStart=function onNewSessionStart(callback){this._onNewSessionStartCallbacks.push(callback)},AmplitudeClient.prototype.getSessionId=function getSessionId(){return this._sessionId},AmplitudeClient.prototype.nextEventId=function nextEventId(){return this._eventId++,this._eventId},AmplitudeClient.prototype.nextIdentifyId=function nextIdentifyId(){return this._identifyId++,this._identifyId},AmplitudeClient.prototype.nextSequenceNumber=function nextSequenceNumber(){return this._sequenceNumber++,this._sequenceNumber},AmplitudeClient.prototype._unsentCount=function _unsentCount(){return this._unsentEvents.length+this._unsentIdentifys.length},AmplitudeClient.prototype._sendEventsIfReady=function _sendEventsIfReady(){return 0!==this._unsentCount()&&(this.options.batchEvents?this._unsentCount()>=this.options.eventUploadThreshold||this.options.transport===Constants.TRANSPORT_BEACON?(this.sendEvents(),!0):(this._updateScheduled||(this._updateScheduled=!0,setTimeout(function(){this._updateScheduled=!1,this.sendEvents()}.bind(this),this.options.eventUploadPeriodMillis)),!1):(this.sendEvents(),!0))},AmplitudeClient.prototype.clearStorage=function clearStorage(){return this._metadataStorage.clear()},AmplitudeClient.prototype._getFromStorage=function _getFromStorage(storage,key){return storage.getItem(key+this._storageSuffix)},AmplitudeClient.prototype._setInStorage=function _setInStorage(storage,key,value){storage.setItem(key+this._storageSuffix,value)};var _loadCookieData=function _loadCookieData(scope){if(scope._useOldCookie){var cookieData=scope.cookieStorage.get(scope._oldCookiename);"object"!==type(cookieData)||_loadCookieDataProps(scope,cookieData)}else{var props=scope._metadataStorage.load();"object"===type(props)&&_loadCookieDataProps(scope,props)}},_upgradeCookieData=function _upgradeCookieData(scope){var cookieData=scope.cookieStorage.get(scope._oldCookiename);"object"===type(cookieData)&&(_loadCookieDataProps(scope,cookieData),_saveCookieData(scope))},_loadCookieDataProps=function _loadCookieDataProps(scope,cookieData){cookieData.deviceId&&(scope.options.deviceId=cookieData.deviceId),cookieData.userId&&(scope.options.userId=cookieData.userId),null!==cookieData.optOut&&void 0!==cookieData.optOut&&!1!==cookieData.optOut&&(scope.options.optOut=cookieData.optOut),cookieData.sessionId&&(scope._sessionId=parseInt(cookieData.sessionId,10)),cookieData.lastEventTime&&(scope._lastEventTime=parseInt(cookieData.lastEventTime,10)),cookieData.eventId&&(scope._eventId=parseInt(cookieData.eventId,10)),cookieData.identifyId&&(scope._identifyId=parseInt(cookieData.identifyId,10)),cookieData.sequenceNumber&&(scope._sequenceNumber=parseInt(cookieData.sequenceNumber,10))},_saveCookieData=function _saveCookieData(scope){var cookieData={deviceId:scope.options.deviceId,userId:scope.options.userId,optOut:scope.options.optOut,sessionId:scope._sessionId,lastEventTime:scope._lastEventTime,eventId:scope._eventId,identifyId:scope._identifyId,sequenceNumber:scope._sequenceNumber};scope._useOldCookie?scope.cookieStorage.set(scope.options.cookieName+scope._storageSuffix,cookieData):scope._metadataStorage.save(cookieData)};AmplitudeClient.prototype._initUtmData=function _initUtmData(queryParams,cookieParams){queryParams=queryParams||this._getUrlParams();var utmProperties=function getUtmData(rawCookie,query){var cookie=rawCookie?"?"+rawCookie.split(".").slice(-1)[0].replace(/\|/g,"&"):"",fetchParam=function fetchParam(queryName,query,cookieName,cookie){return utils.getQueryParam(queryName,query)||utils.getQueryParam(cookieName,cookie)},utmSource=fetchParam(Constants.UTM_SOURCE,query,"utmcsr",cookie),utmMedium=fetchParam(Constants.UTM_MEDIUM,query,"utmcmd",cookie),utmCampaign=fetchParam(Constants.UTM_CAMPAIGN,query,"utmccn",cookie),utmTerm=fetchParam(Constants.UTM_TERM,query,"utmctr",cookie),utmContent=fetchParam(Constants.UTM_CONTENT,query,"utmcct",cookie),utmData={},addIfNotNull=function addIfNotNull(key,value){utils.isEmptyString(value)||(utmData[key]=value)};return addIfNotNull(Constants.UTM_SOURCE,utmSource),addIfNotNull(Constants.UTM_MEDIUM,utmMedium),addIfNotNull(Constants.UTM_CAMPAIGN,utmCampaign),addIfNotNull(Constants.UTM_TERM,utmTerm),addIfNotNull(Constants.UTM_CONTENT,utmContent),utmData}(cookieParams=cookieParams||this.cookieStorage.get("__utmz"),queryParams);return _sendParamsReferrerUserProperties(this,utmProperties),utmProperties},AmplitudeClient.prototype._unsetUTMParams=function _unsetUTMParams(){var identify=new Identify;identify.unset(Constants.REFERRER),identify.unset(Constants.REFERRING_DOMAIN),identify.unset(Constants.UTM_SOURCE),identify.unset(Constants.UTM_MEDIUM),identify.unset(Constants.UTM_CAMPAIGN),identify.unset(Constants.UTM_TERM),identify.unset(Constants.UTM_CONTENT),this.identify(identify)};var _sendParamsReferrerUserProperties=function _sendParamsReferrerUserProperties(scope,userProperties){if("object"===type(userProperties)&&0!==Object.keys(userProperties).length){var identify=new Identify;for(var key in userProperties)Object.prototype.hasOwnProperty.call(userProperties,key)&&(identify.setOnce("initial_"+key,userProperties[key]),identify.set(key,userProperties[key]));scope.identify(identify)}};AmplitudeClient.prototype._getReferrer=function _getReferrer(){var urlRefer=this._getReferrerFromUrlParam(this._getUrlParams());return urlRefer||("undefined"!=typeof document?document.referrer:"")},AmplitudeClient.prototype._getUrlParams=function _getUrlParams(){return GlobalScope.location.search},AmplitudeClient.prototype._saveGclid=function _saveGclid(urlParams){var gclid=utils.getQueryParam("gclid",urlParams);if(!utils.isEmptyString(gclid)){var gclidProperties={gclid};return _sendParamsReferrerUserProperties(this,gclidProperties),gclidProperties}},AmplitudeClient.prototype._saveFbclid=function _saveFbclid(urlParams){var fbclid=utils.getQueryParam("fbclid",urlParams);if(!utils.isEmptyString(fbclid)){var fbclidProperties={fbclid};return _sendParamsReferrerUserProperties(this,fbclidProperties),fbclidProperties}},AmplitudeClient.prototype._getDeviceIdFromUrlParam=function _getDeviceIdFromUrlParam(urlParams){return utils.getQueryParam(Constants.AMP_DEVICE_ID_PARAM,urlParams)},AmplitudeClient.prototype._getReferrerFromUrlParam=function _getReferrerFromUrlParam(urlParams){return utils.getQueryParam(Constants.AMP_REFERRER_PARAM,urlParams)},AmplitudeClient.prototype._getReferringDomain=function _getReferringDomain(referrer){if(utils.isEmptyString(referrer))return null;var parts=referrer.split("/");return parts.length>=3?parts[2]:null},AmplitudeClient.prototype._saveReferrer=function _saveReferrer(referrer){if(!utils.isEmptyString(referrer)){var referrerInfo={referrer,referring_domain:this._getReferringDomain(referrer)};return _sendParamsReferrerUserProperties(this,referrerInfo),referrerInfo}},AmplitudeClient.prototype.saveEvents=function saveEvents(){try{var serializedUnsentEvents=JSON.stringify(this._unsentEvents.map((function(_ref){return _ref.event})));this._setInStorage(localStorage$1,this.options.unsentKey,serializedUnsentEvents)}catch(e){}try{var serializedIdentifys=JSON.stringify(this._unsentIdentifys.map((function(unsentIdentify){return unsentIdentify.event})));this._setInStorage(localStorage$1,this.options.unsentIdentifyKey,serializedIdentifys)}catch(e){}},AmplitudeClient.prototype.setDomain=function setDomain(domain){if(this._shouldDeferCall())return this._q.push(["setDomain"].concat(Array.prototype.slice.call(arguments,0)));if(utils.validateInput(domain,"domain","string"))try{this.cookieStorage.options({expirationDays:this.options.cookieExpiration,secure:this.options.secureCookie,domain,sameSite:this.options.sameSiteCookie}),this.options.domain=this.cookieStorage.options().domain,_loadCookieData(this),_saveCookieData(this)}catch(e){utils.log.error(e)}},AmplitudeClient.prototype.setUserId=function setUserId(userId){var startNewSession=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(utils.validateInput(startNewSession,"startNewSession","boolean")){if(this._shouldDeferCall())return this._q.push(["setUserId"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.userId=null!=userId&&""+userId||null,startNewSession&&(this.options.unsetParamsReferrerOnNewSession&&this._unsetUTMParams(),this._newSession=!0,this._sessionId=(new Date).getTime(),this._runNewSessionStartCallbacks(),this.options.saveParamsReferrerOncePerSession&&this._trackParamsAndReferrer()),_saveCookieData(this),this._connector&&this._connector.identityStore.editIdentity().setUserId(this.options.userId).commit()}catch(e){utils.log.error(e)}}},AmplitudeClient.prototype.setGroup=function(groupType,groupName){if(this._shouldDeferCall())return this._q.push(["setGroup"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("setGroup()")&&utils.validateInput(groupType,"groupType","string")&&!utils.isEmptyString(groupType)){var groups={};groups[groupType]=groupName;var identify=(new Identify).set(groupType,groupName);this._logEvent(Constants.IDENTIFY_EVENT,null,null,identify.userPropertiesOperations,groups,null,null,null)}},AmplitudeClient.prototype.setOptOut=function setOptOut(enable){if(this._shouldDeferCall())return this._q.push(["setOptOut"].concat(Array.prototype.slice.call(arguments,0)));if(utils.validateInput(enable,"enable","boolean"))try{this.options.optOut=enable,_saveCookieData(this)}catch(e){utils.log.error(e)}},AmplitudeClient.prototype.setSessionId=function setSessionId(sessionId){if(utils.validateInput(sessionId,"sessionId","number"))try{this._sessionId=sessionId,_saveCookieData(this)}catch(e){utils.log.error(e)}},AmplitudeClient.prototype.resetSessionId=function resetSessionId(){this.setSessionId((new Date).getTime())},AmplitudeClient.prototype.regenerateDeviceId=function regenerateDeviceId(){if(this._shouldDeferCall())return this._q.push(["regenerateDeviceId"].concat(Array.prototype.slice.call(arguments,0)));this.setDeviceId(base64Id())},AmplitudeClient.prototype.setDeviceId=function setDeviceId(deviceId){if(this._shouldDeferCall())return this._q.push(["setDeviceId"].concat(Array.prototype.slice.call(arguments,0)));if(utils.validateDeviceId(deviceId))try{utils.isEmptyString(deviceId)||(this.options.deviceId=""+deviceId,_saveCookieData(this),this._connector&&this._connector.identityStore.editIdentity().setDeviceId(this.options.deviceId).commit())}catch(e){utils.log.error(e)}},AmplitudeClient.prototype.setTransport=function setTransport(transport){if(this._shouldDeferCall())return this._q.push(["setTransport"].concat(Array.prototype.slice.call(arguments,0)));utils.validateTransport(transport)&&(this.options.transport=transport)},AmplitudeClient.prototype.setUserProperties=function setUserProperties(userProperties){if(this._shouldDeferCall())return this._q.push(["setUserProperties"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("setUserProperties()")&&utils.validateInput(userProperties,"userProperties","object")){var sanitized=utils.truncate(utils.validateProperties(userProperties));if(0!==Object.keys(sanitized).length){var identify=new Identify;for(var property in sanitized)Object.prototype.hasOwnProperty.call(sanitized,property)&&identify.set(property,sanitized[property]);this.identify(identify)}}},AmplitudeClient.prototype.clearUserProperties=function clearUserProperties(){if(this._shouldDeferCall())return this._q.push(["clearUserProperties"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("clearUserProperties()")){var identify=new Identify;identify.clearAll(),this.identify(identify)}};var _convertProxyObjectToRealObject=function _convertProxyObjectToRealObject(instance,proxy){for(var i=0;i<proxy._q.length;i++){var fn=instance[proxy._q[i][0]];"function"===type(fn)&&fn.apply(instance,proxy._q[i].slice(1))}return instance};AmplitudeClient.prototype.identify=function(identify_obj,opt_callback,opt_error_callback,outOfSession){if(this._shouldDeferCall())return this._q.push(["identify"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("identify()"))if("object"===type(identify_obj)&&Object.prototype.hasOwnProperty.call(identify_obj,"_q")&&(identify_obj=_convertProxyObjectToRealObject(new Identify,identify_obj)),identify_obj instanceof Identify){if(Object.keys(identify_obj.userPropertiesOperations).length>0)return this._logEvent(Constants.IDENTIFY_EVENT,null,null,identify_obj.userPropertiesOperations,null,null,null,opt_callback,opt_error_callback,outOfSession);_logErrorsWithCallbacks(opt_callback,opt_error_callback,0,"No request sent",{reason:"No user property operations"})}else utils.log.error("Invalid identify input type. Expected Identify object but saw "+type(identify_obj)),_logErrorsWithCallbacks(opt_callback,opt_error_callback,0,"No request sent",{reason:"Invalid identify input type"});else _logErrorsWithCallbacks(opt_callback,opt_error_callback,0,"No request sent",{reason:"API key is not set"})},AmplitudeClient.prototype.groupIdentify=function(group_type,group_name,identify_obj,opt_callback,opt_error_callback,outOfSession){if(this._shouldDeferCall())return this._q.push(["groupIdentify"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("groupIdentify()"))if(utils.validateInput(group_type,"group_type","string")&&!utils.isEmptyString(group_type))if(null!=group_name)if("object"===type(identify_obj)&&Object.prototype.hasOwnProperty.call(identify_obj,"_q")&&(identify_obj=_convertProxyObjectToRealObject(new Identify,identify_obj)),identify_obj instanceof Identify){if(Object.keys(identify_obj.userPropertiesOperations).length>0)return this._logEvent(Constants.GROUP_IDENTIFY_EVENT,null,null,null,_defineProperty({},group_type,group_name),identify_obj.userPropertiesOperations,null,opt_callback,opt_error_callback,outOfSession);_logErrorsWithCallbacks(opt_callback,opt_error_callback,0,"No request sent",{reason:"No group property operations"})}else utils.log.error("Invalid identify input type. Expected Identify object but saw "+type(identify_obj)),_logErrorsWithCallbacks(opt_callback,opt_error_callback,0,"No request sent",{reason:"Invalid identify input type"});else _logErrorsWithCallbacks(opt_callback,opt_error_callback,0,"No request sent",{reason:"Invalid group name"});else _logErrorsWithCallbacks(opt_callback,opt_error_callback,0,"No request sent",{reason:"Invalid group type"});else _logErrorsWithCallbacks(opt_callback,opt_error_callback,0,"No request sent",{reason:"API key is not set"})},AmplitudeClient.prototype.setVersionName=function setVersionName(versionName){if(this._shouldDeferCall())return this._q.push(["setVersionName"].concat(Array.prototype.slice.call(arguments,0)));utils.validateInput(versionName,"versionName","string")&&(this.options.versionName=versionName)},AmplitudeClient.prototype._logEvent=function _logEvent(eventType,eventProperties,apiProperties,userProperties,groups,groupProperties,timestamp,callback,errorCallback,outOfSession){if(_loadCookieData(this),eventType)if(this.options.optOut)_logErrorsWithCallbacks(callback,errorCallback,0,"No request sent",{reason:"optOut is set to true"});else try{var eventId;eventId=eventType===Constants.IDENTIFY_EVENT||eventType===Constants.GROUP_IDENTIFY_EVENT?this.nextIdentifyId():this.nextEventId();var sequenceNumber=this.nextSequenceNumber(),eventTime="number"===type(timestamp)?timestamp:(new Date).getTime();outOfSession?this._sessionId=-1:(!this._sessionId||!this._lastEventTime||eventTime-this._lastEventTime>this.options.sessionTimeout)&&(this._sessionId=eventTime,this._runNewSessionStartCallbacks()),this._lastEventTime=eventTime,_saveCookieData(this);var osName=this._ua.browser.name,osVersion=this._ua.browser.major,deviceModel=this._ua.device.model||this._ua.os.name,deviceVendor=this._ua.device.vendor;userProperties=userProperties||{};var trackingOptions=_objectSpread2({},this._apiPropertiesTrackingOptions);apiProperties=_objectSpread2(_objectSpread2({},apiProperties||{}),trackingOptions),eventProperties=eventProperties||{},groups=groups||{},groupProperties=groupProperties||{};var event={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:eventTime,event_id:eventId,session_id:this._sessionId||-1,event_type:eventType,version_name:this.options.versionName||null,platform:_shouldTrackField(this,"platform")?this.options.platform:null,os_name:_shouldTrackField(this,"os_name")&&osName||null,os_version:_shouldTrackField(this,"os_version")&&osVersion||null,device_model:_shouldTrackField(this,"device_model")&&deviceModel||null,device_manufacturer:_shouldTrackField(this,"device_manufacturer")&&deviceVendor||null,language:_shouldTrackField(this,"language")?this.options.language:null,api_properties:apiProperties,event_properties:utils.truncate(utils.validateProperties(eventProperties)),user_properties:utils.truncate(utils.validateProperties(userProperties)),uuid:uuid(),library:this.options.library,sequence_number:sequenceNumber,groups:utils.truncate(utils.validateGroups(groups)),group_properties:utils.truncate(utils.validateProperties(groupProperties)),user_agent:this._userAgent,partner_id:this.options.partnerId||null};return _isObservePlanSet(this)&&(event.plan={branch:this.options.plan.branch||void 0,source:this.options.plan.source||void 0,version:this.options.plan.version||void 0,versionId:this.options.plan.versionId||void 0}),_isIngestionMetadataSet(this)&&(event.ingestion_metadata={source_name:this.options.ingestionMetadata.sourceName||void 0,source_version:this.options.ingestionMetadata.sourceVersion||void 0}),eventType===Constants.IDENTIFY_EVENT||eventType===Constants.GROUP_IDENTIFY_EVENT?(this._unsentIdentifys.push({event,callback,errorCallback}),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push({event,callback,errorCallback}),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(),eventType===Constants.IDENTIFY_EVENT&&this._connector&&this._connector.identityStore.editIdentity().updateUserProperties(utils.truncate(utils.validateProperties(userProperties))).commit(),eventId}catch(e){utils.log.error(e)}else _logErrorsWithCallbacks(callback,errorCallback,0,"No request sent",{reason:"Missing eventType"})};var _isObservePlanSet=function _isObservePlanSet(scope){return scope.options.plan&&(scope.options.plan.source||scope.options.plan.branch||scope.options.plan.version||scope.options.plan.versionId)},_isIngestionMetadataSet=function _isIngestionMetadataSet(scope){return scope.options.ingestionMetadata&&(scope.options.ingestionMetadata.sourceName||scope.options.ingestionMetadata.sourceVersion)},_shouldTrackField=function _shouldTrackField(scope,field){return!!scope.options.trackingOptions[field]},_generateApiPropertiesTrackingConfig=function _generateApiPropertiesTrackingConfig(scope){for(var fields=["city","country","dma","ip_address","region"],config={},i=0;i<fields.length;i++){var field=fields[i];_shouldTrackField(scope,field)||(config[field]=!1)}return config};AmplitudeClient.prototype._limitEventsQueued=function _limitEventsQueued(queue){queue.length>this.options.savedMaxCount&&queue.splice(0,queue.length-this.options.savedMaxCount).forEach((function(event){_logErrorsWithCallbacks(event.callback,event.errorCallback,0,"No request sent",{reason:"Event dropped because options.savedMaxCount exceeded. User may be offline or have a content blocker"})}))},AmplitudeClient.prototype.logEvent=function logEvent(eventType,eventProperties,opt_callback,opt_error_callback){var outOfSession=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this._shouldDeferCall()?this._q.push(["logEvent"].concat(Array.prototype.slice.call(arguments,0))):this.logEventWithTimestamp(eventType,eventProperties,null,opt_callback,opt_error_callback,outOfSession)},AmplitudeClient.prototype.logEventWithTimestamp=function logEvent(eventType,eventProperties,timestamp,opt_callback,opt_error_callback){var outOfSession=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return this._shouldDeferCall()?this._q.push(["logEventWithTimestamp"].concat(Array.prototype.slice.call(arguments,0))):this._apiKeySet("logEvent()")?utils.validateInput(eventType,"eventType","string")?utils.isEmptyString(eventType)?(_logErrorsWithCallbacks(opt_callback,opt_error_callback,0,"No request sent",{reason:"Missing eventType"}),-1):(utils.validateInput(outOfSession,"outOfSession","boolean")||_logErrorsWithCallbacks(opt_callback,opt_error_callback,0,"No request sent",{reason:"Invalid outOfSession value"}),this._logEvent(eventType,eventProperties,null,null,null,null,timestamp,opt_callback,opt_error_callback,outOfSession)):(_logErrorsWithCallbacks(opt_callback,opt_error_callback,0,"No request sent",{reason:"Invalid type for eventType"}),-1):(_logErrorsWithCallbacks(opt_callback,opt_error_callback,0,"No request sent",{reason:"API key not set"}),-1)},AmplitudeClient.prototype.logEventWithGroups=function(eventType,eventProperties,groups,opt_callback,opt_error_callback){var outOfSession=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return this._shouldDeferCall()?this._q.push(["logEventWithGroups"].concat(Array.prototype.slice.call(arguments,0))):this._apiKeySet("logEventWithGroups()")?utils.validateInput(eventType,"eventType","string")?(utils.validateInput(outOfSession,"outOfSession","boolean")||_logErrorsWithCallbacks(event.callback,event.errorCallback,0,"No request sent",{reason:"Invalid outOfSession value"}),this._logEvent(eventType,eventProperties,null,null,groups,null,null,opt_callback,opt_error_callback,outOfSession)):(_logErrorsWithCallbacks(event.callback,event.errorCallback,0,"No request sent",{reason:"Invalid type for eventType"}),-1):(_logErrorsWithCallbacks(event.callback,event.errorCallback,0,"No request sent",{reason:"API key not set"}),-1)};var _isNumber=function _isNumber(n){return!isNaN(parseFloat(n))&&isFinite(n)},_logErrorsWithCallbacks=function _logErrorsWithCallbacks(opt_callback,opt_error_callback,status,response,details){"function"===type(opt_callback)&&opt_callback(status,response,details),"function"===type(opt_error_callback)&&opt_error_callback(status,response,details)};AmplitudeClient.prototype.logRevenueV2=function logRevenueV2(revenue_obj){if(this._shouldDeferCall())return this._q.push(["logRevenueV2"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("logRevenueV2()"))if("object"===type(revenue_obj)&&Object.prototype.hasOwnProperty.call(revenue_obj,"_q")&&(revenue_obj=_convertProxyObjectToRealObject(new Revenue,revenue_obj)),revenue_obj instanceof Revenue){if(revenue_obj&&revenue_obj._isValidRevenue())return this.logEvent(Constants.REVENUE_EVENT,revenue_obj._toJSONObject())}else utils.log.error("Invalid revenue input type. Expected Revenue object but saw "+type(revenue_obj))},AmplitudeClient.prototype.logRevenue=function logRevenue(price,quantity,product){return this._shouldDeferCall()?this._q.push(["logRevenue"].concat(Array.prototype.slice.call(arguments,0))):this._apiKeySet("logRevenue()")&&_isNumber(price)&&(void 0===quantity||_isNumber(quantity))?this._logEvent(Constants.REVENUE_EVENT,{},{productId:product,special:"revenue_amount",quantity:quantity||1,price},null,null,null,null,null):-1},AmplitudeClient.prototype._logErrorsOnEvents=function _logErrorsOnEvents(maxEventId,maxIdentifyId,status,response){for(var queues=["_unsentEvents","_unsentIdentifys"],j=0;j<queues.length;j++)for(var queue=queues[j],maxId="_unsentEvents"===queue?maxEventId:maxIdentifyId,i=0;i<this[queue].length;i++){var unsentEvent=this[queue][i];unsentEvent.event.event_id<=maxId&&unsentEvent.errorCallback&&unsentEvent.errorCallback(status,response)}},AmplitudeClient.prototype.removeEvents=function removeEvents(maxEventId,maxIdentifyId,status,response){_removeEvents(this,"_unsentEvents",maxEventId,status,response),_removeEvents(this,"_unsentIdentifys",maxIdentifyId,status,response)};var _removeEvents=function _removeEvents(scope,eventQueue,maxId,status,response){if(!(maxId<0)){for(var filteredEvents=[],i=0;i<scope[eventQueue].length;i++){var unsentEvent=scope[eventQueue][i];unsentEvent.event.event_id>maxId?filteredEvents.push(unsentEvent):unsentEvent.callback&&unsentEvent.callback(status,response)}scope[eventQueue]=filteredEvents}};AmplitudeClient.prototype.sendEvents=function sendEvents(){if(this._apiKeySet("sendEvents()")){if(this.options.optOut)this.removeEvents(1/0,1/0,0,"No request sent",{reason:"Opt out is set to true"});else if(0!==this._unsentCount()){if(this.options.transport!==Constants.TRANSPORT_BEACON){if(this._sending)return;this._sending=!0}var url=(this.options.forceHttps||"https:"===GlobalScope.location.protocol?"https":"http")+"://"+this.options.apiEndpoint,numEvents=Math.min(this._unsentCount(),this.options.uploadBatchSize),mergedEvents=this._mergeEventsAndIdentifys(numEvents),maxEventId=mergedEvents.maxEventId,maxIdentifyId=mergedEvents.maxIdentifyId,events=JSON.stringify(mergedEvents.eventsToSend.map((function(_ref2){return _ref2.event}))),uploadTime=(new Date).getTime(),data={client:this.options.apiKey,e:events,v:Constants.API_VERSION,upload_time:uploadTime,checksum:md5_default()(Constants.API_VERSION+this.options.apiKey+events+uploadTime)};if(this.options.transport!==Constants.TRANSPORT_BEACON||"undefined"==typeof navigator){var scope=this;try{new Request(url,data,this.options.headers).send((function(status,response){scope._sending=!1;try{200===status?(scope.removeEvents(maxEventId,maxIdentifyId,status,response),scope.options.saveEvents&&scope.saveEvents(),scope._sendEventsIfReady()):(scope._logErrorsOnEvents(maxEventId,maxIdentifyId,status,response),413===status&&(1===scope.options.uploadBatchSize&&scope.removeEvents(maxEventId,maxIdentifyId,status,response),scope.options.uploadBatchSize=Math.ceil(numEvents/2),scope.sendEvents()))}catch(e){}}))}catch(e){var response="Request failed to send";utils.log.error(response),scope._logErrorsOnEvents(maxEventId,maxIdentifyId,0,response),scope.removeEvents(maxEventId,maxIdentifyId,0,response,{reason:e.message})}}else{navigator.sendBeacon(url,new URLSearchParams(data))?(this.removeEvents(maxEventId,maxIdentifyId,200,"success"),this.options.saveEvents&&this.saveEvents()):this._logErrorsOnEvents(maxEventId,maxIdentifyId,0,"")}}}else this.removeEvents(1/0,1/0,0,"No request sent",{reason:"API key not set"})},AmplitudeClient.prototype._mergeEventsAndIdentifys=function _mergeEventsAndIdentifys(numEvents){for(var eventsToSend=[],eventIndex=0,maxEventId=-1,identifyIndex=0,maxIdentifyId=-1;eventsToSend.length<numEvents;){var unsentEvent=void 0,noIdentifys=identifyIndex>=this._unsentIdentifys.length,noEvents=eventIndex>=this._unsentEvents.length;if(noEvents&&noIdentifys){utils.log.error("Merging Events and Identifys, less events and identifys than expected");break}noIdentifys?maxEventId=(unsentEvent=this._unsentEvents[eventIndex++]).event.event_id:noEvents?maxIdentifyId=(unsentEvent=this._unsentIdentifys[identifyIndex++]).event.event_id:!("sequence_number"in this._unsentEvents[eventIndex].event)||this._unsentEvents[eventIndex].event.sequence_number<this._unsentIdentifys[identifyIndex].event.sequence_number?maxEventId=(unsentEvent=this._unsentEvents[eventIndex++]).event.event_id:maxIdentifyId=(unsentEvent=this._unsentIdentifys[identifyIndex++]).event.event_id,eventsToSend.push(unsentEvent)}return{eventsToSend,maxEventId,maxIdentifyId}},AmplitudeClient.prototype.setGlobalUserProperties=function setGlobalUserProperties(userProperties){this.setUserProperties(userProperties)},AmplitudeClient.prototype.__VERSION__=function getVersion(){return this.options.library.version},AmplitudeClient.prototype.setLibrary=function setLibrary(name,version){null!=name&&(this.options.library.name=name),null!=version&&(this.options.library.version=version)},AmplitudeClient.prototype._shouldDeferCall=function _shouldDeferCall(){return this._pendingReadStorage||this._initializationDeferred},AmplitudeClient.prototype._deferInitialization=function _deferInitialization(){this._initializationDeferred=!0,this._q.push(["init"].concat(Array.prototype.slice.call(arguments,0)))},AmplitudeClient.prototype.enableTracking=function enableTracking(){this._initializationDeferred=!1,_saveCookieData(this),this.runQueuedFunctions()},AmplitudeClient.prototype._refreshDynamicConfig=function _refreshDynamicConfig(){this.options.useDynamicConfig&&instance$1.refresh(this.options.serverZone,this.options.forceHttps,function(){this.options.apiEndpoint=instance$1.ingestionEndpoint}.bind(this))},AmplitudeClient.prototype.getDeviceId=function getDeviceId(){return this.options.deviceId},AmplitudeClient.prototype.getUserId=function getUserId(){return this.options.userId},AmplitudeClient.prototype.setMinTimeBetweenSessionsMillis=function setMinTimeBetweenSessionsMillis(timeInMillis){if(utils.validateInput(timeInMillis,"timeInMillis","number")){if(this._shouldDeferCall())return this._q.push(["setMinTimeBetweenSessionsMillis"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.sessionTimeout=timeInMillis}catch(e){utils.log.error(e)}}},AmplitudeClient.prototype.setEventUploadThreshold=function setEventUploadThreshold(eventUploadThreshold){if(utils.validateInput(eventUploadThreshold,"eventUploadThreshold","number")){if(this._shouldDeferCall())return this._q.push(["setEventUploadThreshold"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.eventUploadThreshold=eventUploadThreshold}catch(e){utils.log.error(e)}}},AmplitudeClient.prototype.setUseDynamicConfig=function setUseDynamicConfig(useDynamicConfig){if(utils.validateInput(useDynamicConfig,"useDynamicConfig","boolean")){if(this._shouldDeferCall())return this._q.push(["setUseDynamicConfig"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.useDynamicConfig=useDynamicConfig,this._refreshDynamicConfig()}catch(e){utils.log.error(e)}}},AmplitudeClient.prototype.setServerZone=function setServerZone(serverZone){var serverZoneBasedApi=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if((serverZone===AmplitudeServerZone.EU||serverZone===AmplitudeServerZone.US)&&utils.validateInput(serverZoneBasedApi,"serverZoneBasedApi","boolean")){if(this._shouldDeferCall())return this._q.push(["setServerZone"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.serverZone=serverZone,this.options.serverZoneBasedApi=serverZoneBasedApi,serverZoneBasedApi&&(this.options.apiEndpoint=getEventLogApi(this.options.serverZone))}catch(e){utils.log.error(e)}}},AmplitudeClient.prototype.setServerUrl=function setServerUrl(serverUrl){if(utils.validateInput(serverUrl,"serverUrl","string")){if(this._shouldDeferCall())return this._q.push(["setServerUrl"].concat(Array.prototype.slice.call(arguments,0)));try{this.options.apiEndpoint=serverUrl}catch(e){utils.log.error(e)}}};var Amplitude=function Amplitude(){this.options=_objectSpread2({},DEFAULT_OPTIONS),this._q=[],this._instances={}};Amplitude.prototype.Identify=Identify,Amplitude.prototype.Revenue=Revenue,Amplitude.prototype.getInstance=function getInstance(instance){instance=utils.isEmptyString(instance)?Constants.DEFAULT_INSTANCE:instance.toLowerCase();var client=this._instances[instance];return void 0===client&&(client=new AmplitudeClient(instance),this._instances[instance]=client),client},Amplitude.prototype.init=function init(apiKey,opt_userId,opt_config,opt_callback){this.getInstance().init(apiKey,opt_userId,opt_config,function(instance){this.options=instance.options,"function"===type(opt_callback)&&opt_callback(instance)}.bind(this))},Amplitude.prototype.isNewSession=function isNewSession(){return this.getInstance().isNewSession()},Amplitude.prototype.getSessionId=function getSessionId(){return this.getInstance().getSessionId()},Amplitude.prototype.nextEventId=function nextEventId(){return this.getInstance().nextEventId()},Amplitude.prototype.nextIdentifyId=function nextIdentifyId(){return this.getInstance().nextIdentifyId()},Amplitude.prototype.nextSequenceNumber=function nextSequenceNumber(){return this.getInstance().nextSequenceNumber()},Amplitude.prototype.saveEvents=function saveEvents(){this.getInstance().saveEvents()},Amplitude.prototype.setDomain=function setDomain(domain){this.getInstance().setDomain(domain)},Amplitude.prototype.setUserId=function setUserId(userId){this.getInstance().setUserId(userId)},Amplitude.prototype.setGroup=function(groupType,groupName){this.getInstance().setGroup(groupType,groupName)},Amplitude.prototype.setOptOut=function setOptOut(enable){this.getInstance().setOptOut(enable)},Amplitude.prototype.regenerateDeviceId=function regenerateDeviceId(){this.getInstance().regenerateDeviceId()},Amplitude.prototype.setDeviceId=function setDeviceId(deviceId){this.getInstance().setDeviceId(deviceId)},Amplitude.prototype.setUserProperties=function setUserProperties(userProperties){this.getInstance().setUserProperties(userProperties)},Amplitude.prototype.clearUserProperties=function clearUserProperties(){this.getInstance().clearUserProperties()},Amplitude.prototype.identify=function(identify_obj,opt_callback){this.getInstance().identify(identify_obj,opt_callback)},Amplitude.prototype.setVersionName=function setVersionName(versionName){this.getInstance().setVersionName(versionName)},Amplitude.prototype.logEvent=function logEvent(eventType,eventProperties,opt_callback){return this.getInstance().logEvent(eventType,eventProperties,opt_callback)},Amplitude.prototype.logEventWithGroups=function(eventType,eventProperties,groups,opt_callback){return this.getInstance().logEventWithGroups(eventType,eventProperties,groups,opt_callback)},Amplitude.prototype.logRevenueV2=function logRevenueV2(revenue_obj){return this.getInstance().logRevenueV2(revenue_obj)},Amplitude.prototype.logRevenue=function logRevenue(price,quantity,product){return this.getInstance().logRevenue(price,quantity,product)},Amplitude.prototype.removeEvents=function removeEvents(maxEventId,maxIdentifyId){this.getInstance().removeEvents(maxEventId,maxIdentifyId)},Amplitude.prototype.sendEvents=function sendEvents(callback){this.getInstance().sendEvents(callback)},Amplitude.prototype.setGlobalUserProperties=function setGlobalUserProperties(userProperties){this.getInstance().setUserProperties(userProperties)},Amplitude.prototype.__VERSION__="8.21.7";var old=void 0!==GlobalScope&&GlobalScope.amplitude||{},newInstance=new Amplitude;for(var instance in newInstance._q=old._q||[],old._iq)Object.prototype.hasOwnProperty.call(old._iq,instance)&&(newInstance.getInstance(instance)._q=old._iq[instance]._q||[])},"../../node_modules/.pnpm/blueimp-md5@2.19.0/node_modules/blueimp-md5/js/md5.js":function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;!function($){"use strict";function safeAdd(x,y){var lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}function md5cmn(q,a,b,x,s,t){return safeAdd(function bitRotateLeft(num,cnt){return num<<cnt|num>>>32-cnt}(safeAdd(safeAdd(a,q),safeAdd(x,t)),s),b)}function md5ff(a,b,c,d,x,s,t){return md5cmn(b&c|~b&d,a,b,x,s,t)}function md5gg(a,b,c,d,x,s,t){return md5cmn(b&d|c&~d,a,b,x,s,t)}function md5hh(a,b,c,d,x,s,t){return md5cmn(b^c^d,a,b,x,s,t)}function md5ii(a,b,c,d,x,s,t){return md5cmn(c^(b|~d),a,b,x,s,t)}function binlMD5(x,len){var i,olda,oldb,oldc,oldd;x[len>>5]|=128<<len%32,x[14+(len+64>>>9<<4)]=len;var a=1732584193,b=-271733879,c=-1732584194,d=271733878;for(i=0;i<x.length;i+=16)olda=a,oldb=b,oldc=c,oldd=d,a=md5ff(a,b,c,d,x[i],7,-680876936),d=md5ff(d,a,b,c,x[i+1],12,-389564586),c=md5ff(c,d,a,b,x[i+2],17,606105819),b=md5ff(b,c,d,a,x[i+3],22,-1044525330),a=md5ff(a,b,c,d,x[i+4],7,-176418897),d=md5ff(d,a,b,c,x[i+5],12,1200080426),c=md5ff(c,d,a,b,x[i+6],17,-1473231341),b=md5ff(b,c,d,a,x[i+7],22,-45705983),a=md5ff(a,b,c,d,x[i+8],7,1770035416),d=md5ff(d,a,b,c,x[i+9],12,-1958414417),c=md5ff(c,d,a,b,x[i+10],17,-42063),b=md5ff(b,c,d,a,x[i+11],22,-1990404162),a=md5ff(a,b,c,d,x[i+12],7,1804603682),d=md5ff(d,a,b,c,x[i+13],12,-40341101),c=md5ff(c,d,a,b,x[i+14],17,-1502002290),a=md5gg(a,b=md5ff(b,c,d,a,x[i+15],22,1236535329),c,d,x[i+1],5,-165796510),d=md5gg(d,a,b,c,x[i+6],9,-1069501632),c=md5gg(c,d,a,b,x[i+11],14,643717713),b=md5gg(b,c,d,a,x[i],20,-373897302),a=md5gg(a,b,c,d,x[i+5],5,-701558691),d=md5gg(d,a,b,c,x[i+10],9,38016083),c=md5gg(c,d,a,b,x[i+15],14,-660478335),b=md5gg(b,c,d,a,x[i+4],20,-405537848),a=md5gg(a,b,c,d,x[i+9],5,568446438),d=md5gg(d,a,b,c,x[i+14],9,-1019803690),c=md5gg(c,d,a,b,x[i+3],14,-187363961),b=md5gg(b,c,d,a,x[i+8],20,1163531501),a=md5gg(a,b,c,d,x[i+13],5,-1444681467),d=md5gg(d,a,b,c,x[i+2],9,-51403784),c=md5gg(c,d,a,b,x[i+7],14,1735328473),a=md5hh(a,b=md5gg(b,c,d,a,x[i+12],20,-1926607734),c,d,x[i+5],4,-378558),d=md5hh(d,a,b,c,x[i+8],11,-2022574463),c=md5hh(c,d,a,b,x[i+11],16,1839030562),b=md5hh(b,c,d,a,x[i+14],23,-35309556),a=md5hh(a,b,c,d,x[i+1],4,-1530992060),d=md5hh(d,a,b,c,x[i+4],11,1272893353),c=md5hh(c,d,a,b,x[i+7],16,-155497632),b=md5hh(b,c,d,a,x[i+10],23,-1094730640),a=md5hh(a,b,c,d,x[i+13],4,681279174),d=md5hh(d,a,b,c,x[i],11,-358537222),c=md5hh(c,d,a,b,x[i+3],16,-722521979),b=md5hh(b,c,d,a,x[i+6],23,76029189),a=md5hh(a,b,c,d,x[i+9],4,-640364487),d=md5hh(d,a,b,c,x[i+12],11,-421815835),c=md5hh(c,d,a,b,x[i+15],16,530742520),a=md5ii(a,b=md5hh(b,c,d,a,x[i+2],23,-995338651),c,d,x[i],6,-198630844),d=md5ii(d,a,b,c,x[i+7],10,1126891415),c=md5ii(c,d,a,b,x[i+14],15,-1416354905),b=md5ii(b,c,d,a,x[i+5],21,-57434055),a=md5ii(a,b,c,d,x[i+12],6,1700485571),d=md5ii(d,a,b,c,x[i+3],10,-1894986606),c=md5ii(c,d,a,b,x[i+10],15,-1051523),b=md5ii(b,c,d,a,x[i+1],21,-2054922799),a=md5ii(a,b,c,d,x[i+8],6,1873313359),d=md5ii(d,a,b,c,x[i+15],10,-30611744),c=md5ii(c,d,a,b,x[i+6],15,-1560198380),b=md5ii(b,c,d,a,x[i+13],21,1309151649),a=md5ii(a,b,c,d,x[i+4],6,-145523070),d=md5ii(d,a,b,c,x[i+11],10,-1120210379),c=md5ii(c,d,a,b,x[i+2],15,718787259),b=md5ii(b,c,d,a,x[i+9],21,-343485551),a=safeAdd(a,olda),b=safeAdd(b,oldb),c=safeAdd(c,oldc),d=safeAdd(d,oldd);return[a,b,c,d]}function binl2rstr(input){var i,output="",length32=32*input.length;for(i=0;i<length32;i+=8)output+=String.fromCharCode(input[i>>5]>>>i%32&255);return output}function rstr2binl(input){var i,output=[];for(output[(input.length>>2)-1]=void 0,i=0;i<output.length;i+=1)output[i]=0;var length8=8*input.length;for(i=0;i<length8;i+=8)output[i>>5]|=(255&input.charCodeAt(i/8))<<i%32;return output}function rstr2hex(input){var x,i,output="";for(i=0;i<input.length;i+=1)x=input.charCodeAt(i),output+="0123456789abcdef".charAt(x>>>4&15)+"0123456789abcdef".charAt(15&x);return output}function str2rstrUTF8(input){return unescape(encodeURIComponent(input))}function rawMD5(s){return function rstrMD5(s){return binl2rstr(binlMD5(rstr2binl(s),8*s.length))}(str2rstrUTF8(s))}function rawHMACMD5(k,d){return function rstrHMACMD5(key,data){var i,hash,bkey=rstr2binl(key),ipad=[],opad=[];for(ipad[15]=opad[15]=void 0,bkey.length>16&&(bkey=binlMD5(bkey,8*key.length)),i=0;i<16;i+=1)ipad[i]=909522486^bkey[i],opad[i]=1549556828^bkey[i];return hash=binlMD5(ipad.concat(rstr2binl(data)),512+8*data.length),binl2rstr(binlMD5(opad.concat(hash),640))}(str2rstrUTF8(k),str2rstrUTF8(d))}function md5(string,key,raw){return key?raw?rawHMACMD5(key,string):function hexHMACMD5(k,d){return rstr2hex(rawHMACMD5(k,d))}(key,string):raw?rawMD5(string):function hexMD5(s){return rstr2hex(rawMD5(s))}(string)}void 0===(__WEBPACK_AMD_DEFINE_RESULT__=function(){return md5}.call(exports,__webpack_require__,exports,module))||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)}()}}]);
//# sourceMappingURL=3583.770423bb.iframe.bundle.js.map