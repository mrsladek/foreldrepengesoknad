import{a as l,j as n}from"./jsx-runtime-670450c2.js";import{H as V,B as C,C as y,a as D,Y as o,g,D as O,G as q,J as $,d as i,K as Y,N as H,O as Q,m as G,b as J}from"./IntlProvider-9ec823ff.js";import{b as z,l as W,i as m,e as X}from"./globals-8d9ec4c4.js";import{B as a,u as Z}from"./useEngangsstønadContext-42711016.js";import{Q as ee,S as te,g as ne,o as se,s as re,U as ae}from"./stepConfig-6552199b.js";import{r as oe}from"./index-f1f749bf.js";import{a as le,A as w,i as A}from"./AttachmentList-15adc95d.js";import{g as r}from"./i18nUtils-2b2b3c89.js";import{f as c}from"./dateUtils-7fa54214.js";import{P as ie}from"./PageKeys-d7db1a78.js";const d=e=>l("div",{className:"textWithLabel",children:[e.label&&n(V,{size:"xsmall",level:"3",children:e.label}),Array.isArray(e.text)&&e.text.map((t,s)=>n(C,{children:t},`${t}-${s}`)),!Array.isArray(e.text)&&n(C,{children:e.text})]}),de=()=>{pe(window.LOGIN_URL+"?redirect="+window.location.origin)},pe=e=>{window.location.href=e},_=le.create({baseURL:window.REST_API_URL,withCredentials:!0});_.interceptors.request.use(e=>(e.withCredentials=!0,e.timeout=60*1e3,e));_.interceptors.response.use(e=>e,e=>{var t;return e.response&&e.response.status===401&&((t=e==null?void 0:e.config)!=null&&t.url)&&!e.config.url.includes("/soknad")&&de(),Promise.reject(e)});const me=()=>_.get("/personinfo"),ue=e=>_.post("/soknad",e,{headers:{"content-type":"application/json;"}}),ce={getPerson:me,sendSøknad:ue},h=({tittel:e,children:t})=>n(a,{children:n(y,{children:l(y.Item,{children:[n(y.Header,{children:n(V,{level:"2",size:"small",children:e})}),n(y.Content,{children:t})]})})});try{h.displayName="Oppsummeringspunkt",h.__docgenInfo={description:"",displayName:"Oppsummeringspunkt",props:{tittel:{defaultValue:null,description:"",name:"tittel",required:!0,type:{name:"string"}}}}}catch{}const ge=(e,t,s)=>t?`${e} ${t} ${s}`:`${e} ${s}`,b=({barn:e})=>{const t=D();let s;return e.antallBarn==="1"?s=r(t,"oppsummering.omBarnet.ettBarn"):e.antallBarn==="2"&&e.adopsjonAvEktefellesBarn===o.UNANSWERED?s=r(t,"oppsummering.omBarnet.tvillinger"):e.antallBarn==="2"&&e.adopsjonAvEktefellesBarn!==o.UNANSWERED?s=r(t,"oppsummering.omBarnet.toBarn"):s=r(t,"oppsummering.omBarnet.flereBarn",{antall:e.antallBarn}),l("div",{children:[n(a,{padBottom:"l",children:n(d,{label:r(t,"oppsummering.text.soknadenGjelder"),text:s})}),e.adopsjonAvEktefellesBarn!==o.UNANSWERED&&l("div",{children:[n(a,{padBottom:"l",children:n(d,{label:r(t,"oppsummering.text.medAdopsjonsdato"),text:c(e.adopsjonsdato)})}),l(a,{padBottom:"l",children:[n(g,{className:"textWithLabel__label",children:e.fødselsdatoer.length>1?r(t,"oppsummering.text.medFødselsdatoer"):r(t,"oppsummering.text.medFødselsdato")}),e.fødselsdatoer.map((p,u)=>n(a,{padBottom:"s",children:n(O,{children:c(e.fødselsdatoer[u])})},q()))]})]}),e.adopsjonAvEktefellesBarn!==o.UNANSWERED&&l(a,{padBottom:"l",className:"oppsummering__attachments",children:[n(g,{className:"textWithLabel__label",children:r(t,"oppsummering.text.vedlagtOmsorgsovertakelseBekreftelse")}),n(w,{attachments:e.omsorgsovertakelse.filter(p=>!A(p))})]}),e.erBarnetFødt===o.YES&&n(a,{padBottom:"l",children:n(d,{label:r(t,"oppsummering.text.medFødselsdato"),text:c(e.fødselsdatoer[0])})}),e.erBarnetFødt===o.NO&&e.termindato&&e.terminbekreftelsedato&&l("div",{children:[n(a,{padBottom:"l",children:n(d,{label:r(t,"oppsummering.text.medTermindato"),text:c(e.termindato)})}),l(a,{padBottom:"l",className:"oppsummering__attachments",children:[n(g,{className:"textWithLabel__label",children:r(t,"oppsummering.text.vedlagtTerminbekreftelse")}),n(w,{attachments:e.terminbekreftelse.filter(p=>!A(p))})]}),n(a,{padBottom:"l",children:n(d,{label:r(t,"oppsummering.text.somErDatert"),text:c(e.terminbekreftelsedato)})})]})]})};try{b.displayName="OmBarnetOppsummering",b.__docgenInfo={description:"",displayName:"OmBarnetOppsummering",props:{barn:{defaultValue:null,description:"",name:"barn",required:!0,type:{name:"OmBarnetFormData"}}}}}catch{}const N=({utenlandsoppholdListe:e})=>n("ul",{className:"landOppsummering",children:e.map(t=>l("div",{style:{display:"flex",justifyContent:"space-between"},children:[n(O,{children:$.getName(t.landkode,"nb")}),l(O,{children:[c(t.fom)," - ",c(t.tom)]})]},`${t.landkode}${t.fom}`))});try{N.displayName="LandOppsummering",N.__docgenInfo={description:"",displayName:"LandOppsummering",props:{utenlandsoppholdListe:{defaultValue:null,description:"",name:"utenlandsoppholdListe",required:!0,type:{name:"BostedUtland[]"}}}}}catch{}const M=(e,t,s)=>i(e).isBetween(i(t),i(s),"day","[]"),T=(e,t)=>t.utenlandsoppholdSiste12Mnd.some(s=>M(e,s.fom,s.tom))||t.utenlandsoppholdNeste12Mnd.some(s=>M(e,s.fom,s.tom)),S=({barn:e,informasjonOmUtenlandsopphold:t})=>{const s=D();return l(a,{children:[t.harBoddUtenforNorgeSiste12Mnd===o.NO?n(a,{padBottom:"l",children:n(d,{label:r(s,"oppsummering.text.boddSisteTolv"),text:"Norge"})}):l(a,{padBottom:"l",className:"textWithLabel",children:[n(g,{className:"textWithLabel__label",children:r(s,"oppsummering.text.boddSisteTolv")}),n(N,{utenlandsoppholdListe:t.utenlandsoppholdSiste12Mnd})]}),t.skalBoUtenforNorgeNeste12Mnd===o.NO?n(a,{padBottom:"l",children:n(d,{label:r(s,"oppsummering.text.neste12mnd"),text:r(s,"medlemmskap.radiobutton.boNorge")})}):l(a,{padBottom:"l",className:"textWithLabel",children:[n(g,{className:"textWithLabel__label",children:r(s,"oppsummering.text.neste12mnd")}),n(N,{utenlandsoppholdListe:t.utenlandsoppholdNeste12Mnd})]}),e.erBarnetFødt===o.NO&&n(a,{padBottom:"l",children:n(d,{label:r(s,"oppsummering.text.ogKommerPåFødselstidspunktet"),text:T(e.termindato,t)?r(s,"medlemmskap.radiobutton.vareUtlandet"):r(s,"medlemmskap.radiobutton.vareNorge")})}),e.erBarnetFødt===o.YES&&n(a,{padBottom:"l",children:n(d,{label:r(s,"oppsummering.text.varPåFødselstidspunktet"),text:T(e.fødselsdatoer[0],t)?r(s,"oppsummering.utenlandsopphold.iUtlandet"):r(s,"oppsummering.utenlandsopphold.iNorge")})})]})};try{S.displayName="UtenlandsoppholdOppsummering",S.__docgenInfo={description:"",displayName:"UtenlandsoppholdOppsummering",props:{barn:{defaultValue:null,description:"",name:"barn",required:!0,type:{name:"OmBarnetFormData"}},informasjonOmUtenlandsopphold:{defaultValue:null,description:"",name:"informasjonOmUtenlandsopphold",required:!0,type:{name:"UtenlandsoppholdFormData"}}}}}catch{}var L=(e=>(e.oppgittKorrekteOpplysninger="oppgittKorrekteOpplysninger",e))(L||{});const he={oppgittKorrekteOpplysninger:!1},x=Y(),fe={[L.oppgittKorrekteOpplysninger]:{isIncluded:()=>!0,isAnswered:({oppgittKorrekteOpplysninger:e})=>e===!0}},ke=ee(fe);i.extend(H);const ye=e=>Array.isArray(e)&&e.some(t=>t.filename),Ne=e=>e.filter(t=>!A(t)),K=e=>{const t=[];return Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(ye(e[s])?(t.push(...Ne(e[s])),delete e[s]):t.push(...K(e[s])))}),t},_e=e=>e.adopsjonAvEktefellesBarn!==o.UNANSWERED?{adopsjonAvEktefellesBarn:e.adopsjonAvEktefellesBarn===o.YES,søkerAdopsjonAlene:e.søkerAdopsjonAlene===o.YES,adopsjonsdato:i(e.adopsjonsdato).toDate(),antallBarn:parseInt(e.antallBarn,10),fødselsdatoer:e.fødselsdatoer.map(t=>i.utc(t).toDate())}:e.erBarnetFødt===o.YES?{antallBarn:parseInt(e.antallBarn,10),erBarnetFødt:!0,fødselsdatoer:[i.utc(e.fødselsdatoer[0]).toDate()]}:{antallBarn:parseInt(e.antallBarn,10),erBarnetFødt:!1,termindato:i.utc(e.termindato).toDate(),terminbekreftelseDato:i.utc(e.terminbekreftelsedato).toDate()},R=e=>e.map(t=>({land:t.landkode,tidsperiode:{fom:i.utc(t.fom).toDate(),tom:i.utc(t.tom).toDate()}})),Be=e=>({senereOpphold:R(e.utenlandsoppholdNeste12Mnd),tidligereOpphold:R(e.utenlandsoppholdSiste12Mnd),iNorgeNeste12Mnd:e.skalBoUtenforNorgeNeste12Mnd===o.YES,iNorgeSiste12Mnd:e.harBoddUtenforNorgeSiste12Mnd===o.YES}),ve=(e,t)=>{const{omBarnet:s,utenlandsopphold:p}=e.søknad,u=_e(s),f=Be(p);return{barn:u,type:"engangsstønad",erEndringssøknad:!1,informasjonOmUtenlandsopphold:f,søker:{språkkode:t},vedlegg:K(JSON.parse(JSON.stringify(e.søknad)))}};const F=({søkerNavn:e,søkerFnr:t})=>n("div",{children:n(a,{padBottom:"l",children:n(d,{label:e,text:t})})});try{F.displayName="OmDegOppsummering",F.__docgenInfo={description:"",displayName:"OmDegOppsummering",props:{søkerNavn:{defaultValue:null,description:"",name:"søkerNavn",required:!0,type:{name:"string"}},søkerFnr:{defaultValue:null,description:"",name:"søkerFnr",required:!0,type:{name:"string"}}}}}catch{}const E=({person:e,locale:t})=>{const s=D(),p=J("oppsummering"),{state:u,dispatch:f}=Z(),B=z(),[U,I]=oe.useState(!1);W("sidevisning",{app:"engangsstonadny",team:"foreldrepenger",pageKey:ie.Oppsummering});const P=async()=>{const v=ve(u,t);I(!0);try{ce.sendSøknad(v).then(k=>{f(X.setKvittering(k.data)),B("/kvittering"),I(!1)}),W("skjema fullført",{app:"engangsstonadny",team:"foreldrepenger"})}catch{B("/kvittering")}};return n(x.FormikWrapper,{initialValues:he,onSubmit:()=>P(),renderForm:({values:v})=>{const k=ke.getVisbility(v).areAllQuestionsAnswered();return n(te,{bannerTitle:m(s,"søknad.pageheading"),activeStepId:"oppsummering",pageTitle:m(s,"søknad.oppsummering"),stepTitle:m(s,"søknad.oppsummering"),backLinkHref:ne("oppsummering"),onCancel:()=>se(f,B),steps:re,kompakt:!0,children:l(x.Form,{includeButtons:!1,noButtonsContentRenderer:k?void 0:()=>n(ae,{children:m(s,"søknad.footer.spørsmålMåBesvares")}),children:[n(Q,{children:m(s,"oppsummering.text.lesNoye")}),l("div",{className:p.block,children:[n(h,{tittel:m(s,"søknad.omDeg"),children:n(F,{søkerNavn:ge(e.fornavn,e.mellomnavn,e.etternavn),søkerFnr:e.fnr})}),n(h,{tittel:m(s,"søknad.omBarnet"),children:n(b,{barn:u.søknad.omBarnet})}),n(h,{tittel:m(s,"søknad.utenlandsopphold"),children:n(S,{barn:u.søknad.omBarnet,informasjonOmUtenlandsopphold:u.søknad.utenlandsopphold})})]}),n(a,{margin:"xl",children:n(x.ConfirmationCheckbox,{name:L.oppgittKorrekteOpplysninger,label:"De opplysninger jeg har oppgitt er riktige og jeg har ikke holdt tilbake opplysninger som har betydning for min rett til engangsstønad."})}),k&&n(a,{margin:"xl",children:n("div",{className:p.element("sendSøknadKnapp"),children:n(G,{type:"submit",disabled:U,loading:U,children:m(s,"oppsummering.button.sendSøknad")})})})]})})}})},Ie=E;try{E.displayName="Oppsummering",E.__docgenInfo={description:"",displayName:"Oppsummering",props:{person:{defaultValue:null,description:"",name:"person",required:!0,type:{name:"Person"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'},{value:'"en"'}]}}}}}catch{}export{ce as A,Ie as O,_ as f};
//# sourceMappingURL=Oppsummering-cb111405.js.map
