import{j as d,a as U}from"./jsx-runtime-670450c2.js";import{R as G,S as J,U as ee,V as ne,Y as h,d as c,X as te,Z as P,_ as W,$ as Q,a0 as H,a as O,H as oe,a1 as k,K as de,a2 as ae,a3 as x,a4 as le,b as j,a5 as re,a6 as _,a7 as w,m as se}from"./IntlProvider-9ec823ff.js";import{U as m,i as a,b as ie,l as pe,j as M,e as ue}from"./globals-8d9ec4c4.js";import{B as v,u as me}from"./useEngangsstønadContext-42711016.js";import{Q as ce,S as fe,g as ge,o as he,s as ve,U as Ue}from"./stepConfig-6552199b.js";import{U as q}from"./UtvidetInformasjon-0a24479e.js";import{R as C}from"./index-f1f749bf.js";import{g as f}from"./i18nUtils-2b2b3c89.js";import{a as I}from"./dateUtils-7fa54214.js";import{F as ke}from"./message-5ccc2e00.js";import{P as ye}from"./PageKeys-d7db1a78.js";function be(e){var n=e.name,t=e.labels,o=e.listRenderer,i=e.formRenderer,l=e.sortFunc,r=e.onAfterChange,p=e.dialogWidth,s=e.shouldCloseOnOverlayClick,u=e.error,g=e.maxItems,$=e.useFastField,z=e.confirmDelete,T=e.validate,b=C.useContext(G),X=$?ee:ne;return C.createElement(X,{name:n,validate:T?function(F){return T(F,n)}:void 0},function(F){var N=F.field,E=F.form;return C.createElement(J,{labels:t,items:N.value,error:u||(b?b.getAndRenderFieldErrorMessage(N,E):void 0),maxItems:g,dialogWidth:p,shouldCloseOnOverlayClick:s,confirmDelete:z,onChange:function(y){var D=l?y.sort(l):y;E.setFieldValue(N.name,D),r&&r(D),b&&b.onAfterFieldValueSet()},formRenderer:i,listRenderer:function(y){var D=y.onEdit,Z=y.onDelete;return o({items:N.value,onDelete:Z,onEdit:D})}})})}const Fe={[m.harBoddUtenforNorgeSiste12Mnd]:{isAnswered:({harBoddUtenforNorgeSiste12Mnd:e})=>e!==h.UNANSWERED,isIncluded:()=>!0,visibilityFilter:({skalBoUtenforNorgeNeste12Mnd:e})=>e!==h.UNANSWERED},[m.utenlandsoppholdSiste12Mnd]:{isAnswered:({utenlandsoppholdSiste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({harBoddUtenforNorgeSiste12Mnd:e})=>e===h.YES},[m.skalBoUtenforNorgeNeste12Mnd]:{isAnswered:({skalBoUtenforNorgeNeste12Mnd:e})=>e!==h.UNANSWERED,isIncluded:()=>!0},[m.utenlandsoppholdNeste12Mnd]:{isAnswered:({utenlandsoppholdNeste12Mnd:e})=>e.length>0,isOptional:()=>!0,isIncluded:({skalBoUtenforNorgeNeste12Mnd:e})=>e===h.YES}},Ne=ce(Fe),De=e=>{const{fom:n,landkode:t,tom:o}=e;return n!==void 0&&t!==void 0&&o!==void 0};c.extend(te);const Me=(e,n,t)=>c(e).isBetween(n,t,"day","[]"),K=(e,n,t,o,i)=>{if(n===void 0)return i?a(e,"valideringsfeil.fraOgMedDato.gyldigDato"):a(e,"valideringsfeil.tilOgMedDato.gyldigDato");if(!Me(n,t,o))return a(e,"valideringsfeil.dateOutsideRange",{fom:I(t),tom:I(o)})},Be=(e,n,t,o,i)=>{const l=K(e,n,t,o,!0);if(l!==void 0)return l;if(i&&c(n).isAfter(i,"day"))return a(e,"valideringsfeil.utenlandsopphold.førTilDato")},Ie=(e,n,t,o,i)=>{const l=K(e,n,t,o,!1);if(l!==void 0)return l;if(i&&c(n).isBefore(i,"day"))return a(e,"valideringsfeil.utenlandsopphold.etterFraDato")},Y={validateToDate:Ie,validateFromDate:Be},Se=(e,n)=>{if(e.length===0)return a(n,"valideringsfeil.utenlandsopphold.neste12Måneder.ikkeRegistrert");const t=e.map(o=>({from:c(o.fom).toDate(),to:c(o.tom).toDate()}));if(P(t))return a(n,"valideringsfeil.utenlandsopphold.overlapp");if(W(t,{from:new Date,to:Q}))return a(n,"valideringsfeil.utenlandsoppholdUtenforPeriode")},Ce=(e,n)=>{if(e.length===0)return a(n,"valideringsfeil.utenlandsopphold.siste12Måneder.ikkeRegistrert");const t=e.map(o=>({from:c(o.fom).toDate(),to:c(o.tom).toDate()}));if(P(t))return a(n,"valideringsfeil.utenlandsopphold.overlapp");if(W(t,{from:H,to:new Date}))return a(n,"valideringsfeil.utenlandsoppholdUtenforPeriode")},B=de(),Ve=e=>({fom:e.fom,tom:e.tom,landkode:e.landkode}),A=({maxDate:e,minDate:n,bosted:t,onSubmit:o,onCancel:i,erFremtidigOpphold:l})=>{const r=O(),p=s=>{const u={...t,fom:s.fom,tom:s.tom,landkode:s.landkode};if(De(u))o(u);else throw new Error("BostedUtlandForm: Formvalues is not a valid BostedUtland on submit.")};return d(B.FormikWrapper,{initialValues:t?Ve(t):{},onSubmit:p,renderForm:({values:s})=>U(B.Form,{onCancel:i,children:[d(oe,{size:"medium",children:d(ke,{id:"utenlandsopphold.leggTilUtenlandsopphold.tittel"})}),d(v,{children:d(B.DateIntervalPicker,{legend:f(r,"utenlandsopphold.leggTilUtenlandsopphold.tidsrom"),fromDatepickerProps:{name:"fom",label:f(r,"utenlandsopphold.leggTilUtenlandsopphold.fraogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:n,invalidFormatError:"valideringsfeil.fraOgMedDato.gyldigDato",maxDate:k(s.tom)||e,validate:u=>Y.validateFromDate(r,k(u),n,e,k(s.tom))},toDatepickerProps:{name:"tom",label:f(r,"utenlandsopphold.leggTilUtenlandsopphold.tilogmed"),fullscreenOverlay:!0,placeholder:"dd.mm.åååå",minDate:k(s.fom)||n,maxDate:e,invalidFormatError:"valideringsfeil.tilOgMedDato.gyldigDato",validate:u=>Y.validateToDate(r,k(u),n,e,k(s.fom))}})}),d(v,{margin:"xl",children:d(B.CountrySelect,{name:"landkode",label:l?f(r,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandSkalDuBoI"):f(r,"utenlandsopphold.leggTilUtenlandsopphold.spørsmål.hvilketLandHarDuBoddI"),validate:u=>{if(u===""||!u)return l?a(r,"valideringsfeil.leggTilUtenlandsopphold.landDuSkalBoIPåkreved"):a(r,"valideringsfeil.leggTilUtenlandsopphold.landDuHarBoddIPåkrevd")},useAlpha3Code:!1})})]})})};try{A.displayName="BostedUtlandForm",A.__docgenInfo={description:"",displayName:"BostedUtlandForm",props:{minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},bosted:{defaultValue:null,description:"",name:"bosted",required:!1,type:{name:"BostedUtland"}},onSubmit:{defaultValue:null,description:"",name:"onSubmit",required:!0,type:{name:"(values: BostedUtland) => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const V=j("bostedUtlandList"),R=({bosteder:e,onDelete:n,onEdit:t})=>{const o=O();return d(ae,{getItemId:l=>l.id,getItemTitle:l=>x(l.landkode,o.locale),onDelete:n,onEdit:t,labelRenderer:l=>{const r=x(l.landkode,o.locale);return U("div",{className:V.element("label"),children:[U("span",{className:V.element("land"),children:[t&&d(le,{onClick:()=>t(l),children:r}),!t&&d("span",{children:r})]}),U("span",{className:V.element("dato"),children:[I(c(l.fom).toDate())," -"," ",I(c(l.tom).toDate())]})]})},items:e})};try{R.displayName="BostedUtlandList",R.__docgenInfo={description:"",displayName:"BostedUtlandList",props:{bosteder:{defaultValue:null,description:"",name:"bosteder",required:!0,type:{name:"BostedUtland[]"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"((opphold: BostedUtland) => void)"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"((opphold: BostedUtland) => void)"}}}}}catch{}function S({name:e,minDate:n,maxDate:t,validate:o,labels:i,erFremtidigOpphold:l}){return d(be,{name:e,labels:i,validate:o,dialogWidth:"narrow",sortFunc:re,formRenderer:({onSubmit:r,onCancel:p,item:s})=>d(A,{bosted:s,minDate:n,maxDate:t,onSubmit:r,onCancel:p,erFremtidigOpphold:l}),listRenderer:({items:r,onEdit:p,onDelete:s})=>d(R,{bosteder:r,onEdit:p,onDelete:s}),shouldCloseOnOverlayClick:!0})}try{S.displayName="BostedUtlandListAndDialog",S.__docgenInfo={description:"",displayName:"BostedUtlandListAndDialog",props:{name:{defaultValue:null,description:"",name:"name",required:!0,type:{name:"FieldNames"}},validate:{defaultValue:null,description:"",name:"validate",required:!1,type:{name:"any"}},minDate:{defaultValue:null,description:"",name:"minDate",required:!0,type:{name:"Date"}},maxDate:{defaultValue:null,description:"",name:"maxDate",required:!0,type:{name:"Date"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"ModalFormAndListLabels"}},erFremtidigOpphold:{defaultValue:null,description:"",name:"erFremtidigOpphold",required:!0,type:{name:"boolean"}}}}}catch{}const Ae=e=>{const{harBoddUtenforNorgeSiste12Mnd:n,skalBoUtenforNorgeNeste12Mnd:t,utenlandsoppholdNeste12Mnd:o,utenlandsoppholdSiste12Mnd:i}=e;return{harBoddUtenforNorgeSiste12Mnd:n,skalBoUtenforNorgeNeste12Mnd:t,utenlandsoppholdNeste12Mnd:t===h.YES?o:[],utenlandsoppholdSiste12Mnd:n===h.YES?i:[]}};const L=()=>{const e=O(),n=j("utenlandsopphold"),t=ie(),{state:o,dispatch:i}=me(),l=o.søknad.utenlandsopphold;pe("sidevisning",{app:"engangsstonadny",team:"foreldrepenger",pageKey:ye.Utenlandsopphold});const r=p=>{i(ue.setUtenlandsopphold({skalBoUtenforNorgeNeste12Mnd:p.skalBoUtenforNorgeNeste12Mnd,harBoddUtenforNorgeSiste12Mnd:p.harBoddUtenforNorgeSiste12Mnd,utenlandsoppholdNeste12Mnd:p.utenlandsoppholdNeste12Mnd||[],utenlandsoppholdSiste12Mnd:p.utenlandsoppholdSiste12Mnd||[]})),t("/soknad/oppsummering")};return d(M.FormikWrapper,{initialValues:l,onSubmit:p=>r(p),renderForm:({values:p})=>{const s=Ne.getVisbility(p),u=s.areAllQuestionsAnswered();return d(fe,{bannerTitle:f(e,"søknad.pageheading"),activeStepId:"utenlandsopphold",pageTitle:f(e,"søknad.utenlandsopphold"),stepTitle:f(e,"søknad.utenlandsopphold"),backLinkHref:ge("utenlandsopphold"),onCancel:()=>he(i,t),steps:ve,kompakt:!0,children:d(M.Form,{includeButtons:!1,includeValidationSummary:!0,cleanup:g=>Ae(g),noButtonsContentRenderer:u?void 0:()=>d(Ue,{children:a(e,"søknad.footer.spørsmålMåBesvares")}),children:U("div",{className:n.block,children:[s.isVisible(m.skalBoUtenforNorgeNeste12Mnd)&&U(v,{padBottom:"l",children:[d(M.YesOrNoQuestion,{legend:a(e,"utenlandsopphold.neste12Måneder.spørsmål"),name:m.skalBoUtenforNorgeNeste12Mnd,labels:{no:a(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddINorge"),yes:a(e,"utenlandsopphold.neste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:_}),d(q,{apneLabel:a(e,"utenlandsopphold.neste12MånederInfotekst.apneLabel"),children:a(e,"utenlandsopphold.neste12MånederInfotekst")}),s.isVisible(m.utenlandsoppholdNeste12Mnd)&&d(v,{padBottom:"l",children:d(S,{name:m.utenlandsoppholdNeste12Mnd,minDate:w,maxDate:Q,labels:{addLabel:a(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold neste 12 måneder"},erFremtidigOpphold:!0,validate:g=>Se(g,e)})})]}),s.isVisible(m.harBoddUtenforNorgeSiste12Mnd)&&U(v,{margin:"xl",children:[d(M.YesOrNoQuestion,{legend:a(e,"utenlandsopphold.siste12Måneder.spørsmål"),name:m.harBoddUtenforNorgeSiste12Mnd,labels:{no:a(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddINorge"),yes:a(e,"utenlandsopphold.siste12MånederInfotekst.radiobutton.boddIUtlandet")},validate:_}),d(q,{apneLabel:a(e,"utenlandsopphold.siste12MånederInfotekst.apneLabel"),children:a(e,"utenlandsopphold.siste12MånederInfotekst")}),s.isVisible(m.utenlandsoppholdSiste12Mnd)&&d(v,{padBottom:"xl",children:d(S,{minDate:H,maxDate:w,name:m.utenlandsoppholdSiste12Mnd,labels:{addLabel:a(e,"utenlandsopphold.knapp.leggTilLand"),modalTitle:"Utenlandsopphold siste 12 måneder"},erFremtidigOpphold:!1,validate:g=>Ce(g,e)})})]}),u&&d(v,{margin:"xl",textAlignCenter:!0,children:d(se,{type:"submit",children:f(e,"søknad.gåVidere")})})]})})})}})},We=L;try{L.displayName="Utenlandsopphold",L.__docgenInfo={description:"",displayName:"Utenlandsopphold",props:{}}}catch{}export{We as U};
//# sourceMappingURL=Utenlandsopphold-57fe95a1.js.map
