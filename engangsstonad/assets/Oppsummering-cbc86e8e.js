import{j as n,a as l}from"./jsx-runtime-670450c2.js";import{B as a,K as _,H as K,u as D,Y as o,O as p,k as g,Q as x,W as P,X as Y,i as d,f as i,Z as $,_ as Q,o as H,J as G,G as J,q as z,b as X}from"./IntlProvider-550dc297.js";import{r as Z}from"./index-f1f749bf.js";import{E as R,a as ee,A as W,i as A}from"./AttachmentList-4efce9ed.js";import{g as r}from"./i18nUtils-2b2b3c89.js";import{f as c}from"./dateUtils-af40d8b5.js";import{Q as te,g as ne,o as se,s as re,U as ae}from"./stepConfig-0844c37b.js";import{u as oe}from"./useEngangsstønadContext-8a0c18d9.js";import{l as C,b as le}from"./globals-6bd225cc.js";import{P as ie}from"./PageKeys-d7db1a78.js";const de=()=>{pe(R.LOGIN_URL+"?redirect="+window.location.origin)},pe=e=>{window.location.href=e},N=ee.create({baseURL:R.REST_API_URL,withCredentials:!0});N.interceptors.request.use(e=>(e.withCredentials=!0,e.timeout=60*1e3,e));N.interceptors.response.use(e=>e,e=>{var t;return e.response&&e.response.status===401&&((t=e==null?void 0:e.config)!=null&&t.url)&&!e.config.url.includes("/soknad")&&de(),Promise.reject(e)});const me=()=>N.get("/personinfo"),ue=e=>N.post("/soknad",e,{headers:{"content-type":"application/json;"}}),ce={getPerson:me,sendSøknad:ue},f=({tittel:e,children:t})=>n(a,{children:n(_,{children:l(_.Item,{children:[n(_.Header,{children:n(K,{level:"2",size:"small",children:e})}),n(_.Content,{children:t})]})})});try{f.displayName="Oppsummeringspunkt",f.__docgenInfo={description:"",displayName:"Oppsummeringspunkt",props:{tittel:{defaultValue:null,description:"",name:"tittel",required:!0,type:{name:"string"}}}}}catch{}const ge=(e,t,s)=>t?`${e} ${t} ${s}`:`${e} ${s}`,S=({barn:e})=>{const t=D();let s;return e.antallBarn==="1"?s=r(t,"oppsummering.omBarnet.ettBarn"):e.antallBarn==="2"&&e.adopsjonAvEktefellesBarn===o.UNANSWERED?s=r(t,"oppsummering.omBarnet.tvillinger"):e.antallBarn==="2"&&e.adopsjonAvEktefellesBarn!==o.UNANSWERED?s=r(t,"oppsummering.omBarnet.toBarn"):s=r(t,"oppsummering.omBarnet.flereBarn",{antall:e.antallBarn}),l("div",{children:[n(a,{padBottom:"l",children:n(p,{label:r(t,"oppsummering.text.soknadenGjelder"),text:s})}),e.adopsjonAvEktefellesBarn!==o.UNANSWERED&&l("div",{children:[n(a,{padBottom:"l",children:n(p,{label:r(t,"oppsummering.text.medAdopsjonsdato"),text:c(e.adopsjonsdato)})}),l(a,{padBottom:"l",children:[n(g,{className:"textWithLabel__label",children:e.fødselsdatoer.length>1?r(t,"oppsummering.text.medFødselsdatoer"):r(t,"oppsummering.text.medFødselsdato")}),e.fødselsdatoer.map((m,u)=>n(a,{padBottom:"s",children:n(x,{children:c(e.fødselsdatoer[u])})},P()))]})]}),e.adopsjonAvEktefellesBarn!==o.UNANSWERED&&l(a,{padBottom:"l",className:"oppsummering__attachments",children:[n(g,{className:"textWithLabel__label",children:r(t,"oppsummering.text.vedlagtOmsorgsovertakelseBekreftelse")}),n(W,{attachments:e.omsorgsovertakelse.filter(m=>!A(m))})]}),e.erBarnetFødt===o.YES&&n(a,{padBottom:"l",children:n(p,{label:r(t,"oppsummering.text.medFødselsdato"),text:c(e.fødselsdatoer[0])})}),e.erBarnetFødt===o.NO&&e.termindato&&e.terminbekreftelsedato&&l("div",{children:[n(a,{padBottom:"l",children:n(p,{label:r(t,"oppsummering.text.medTermindato"),text:c(e.termindato)})}),l(a,{padBottom:"l",className:"oppsummering__attachments",children:[n(g,{className:"textWithLabel__label",children:r(t,"oppsummering.text.vedlagtTerminbekreftelse")}),n(W,{attachments:e.terminbekreftelse.filter(m=>!A(m))})]}),n(a,{padBottom:"l",children:n(p,{label:r(t,"oppsummering.text.somErDatert"),text:c(e.terminbekreftelsedato)})})]})]})};try{S.displayName="OmBarnetOppsummering",S.__docgenInfo={description:"",displayName:"OmBarnetOppsummering",props:{barn:{defaultValue:null,description:"",name:"barn",required:!0,type:{name:"OmBarnetFormData"}}}}}catch{}const y=({utenlandsoppholdListe:e})=>n("ul",{className:"landOppsummering",children:e.map(t=>l("div",{style:{display:"flex",justifyContent:"space-between"},children:[n(x,{children:Y.getName(t.landkode,"nb")}),l(x,{children:[c(t.fom)," - ",c(t.tom)]})]},`${t.landkode}${t.fom}`))});try{y.displayName="LandOppsummering",y.__docgenInfo={description:"",displayName:"LandOppsummering",props:{utenlandsoppholdListe:{defaultValue:null,description:"",name:"utenlandsoppholdListe",required:!0,type:{name:"BostedUtland[]"}}}}}catch{}const M=(e,t,s)=>i(e).isBetween(i(t),i(s),"day","[]"),T=(e,t)=>t.utenlandsoppholdSiste12Mnd.some(s=>M(e,s.fom,s.tom))||t.utenlandsoppholdNeste12Mnd.some(s=>M(e,s.fom,s.tom)),b=({barn:e,informasjonOmUtenlandsopphold:t})=>{const s=D();return l(a,{children:[t.harBoddUtenforNorgeSiste12Mnd===o.NO?n(a,{padBottom:"l",children:n(p,{label:r(s,"oppsummering.text.boddSisteTolv"),text:d(s,"norge")})}):l(a,{padBottom:"l",className:"textWithLabel",children:[n(g,{className:"textWithLabel__label",children:r(s,"oppsummering.text.boddSisteTolv")}),n(y,{utenlandsoppholdListe:t.utenlandsoppholdSiste12Mnd})]}),t.skalBoUtenforNorgeNeste12Mnd===o.NO?n(a,{padBottom:"l",children:n(p,{label:r(s,"oppsummering.text.neste12mnd"),text:r(s,"medlemmskap.radiobutton.boNorge")})}):l(a,{padBottom:"l",className:"textWithLabel",children:[n(g,{className:"textWithLabel__label",children:r(s,"oppsummering.text.neste12mnd")}),n(y,{utenlandsoppholdListe:t.utenlandsoppholdNeste12Mnd})]}),e.erBarnetFødt===o.NO&&n(a,{padBottom:"l",children:n(p,{label:r(s,"oppsummering.text.ogKommerPåFødselstidspunktet"),text:T(e.termindato,t)?r(s,"medlemmskap.radiobutton.vareUtlandet"):r(s,"medlemmskap.radiobutton.vareNorge")})}),e.erBarnetFødt===o.YES&&n(a,{padBottom:"l",children:n(p,{label:r(s,"oppsummering.text.varPåFødselstidspunktet"),text:T(e.fødselsdatoer[0],t)?r(s,"oppsummering.utenlandsopphold.iUtlandet"):r(s,"oppsummering.utenlandsopphold.iNorge")})})]})};try{b.displayName="UtenlandsoppholdOppsummering",b.__docgenInfo={description:"",displayName:"UtenlandsoppholdOppsummering",props:{barn:{defaultValue:null,description:"",name:"barn",required:!0,type:{name:"OmBarnetFormData"}},informasjonOmUtenlandsopphold:{defaultValue:null,description:"",name:"informasjonOmUtenlandsopphold",required:!0,type:{name:"UtenlandsoppholdFormData"}}}}}catch{}var U=(e=>(e.oppgittKorrekteOpplysninger="oppgittKorrekteOpplysninger",e))(U||{});const fe={oppgittKorrekteOpplysninger:!1},O=$(),he={[U.oppgittKorrekteOpplysninger]:{isIncluded:()=>!0,isAnswered:({oppgittKorrekteOpplysninger:e})=>e===!0}},ke=te(he);i.extend(Q);const _e=e=>Array.isArray(e)&&e.some(t=>t.filename),ye=e=>e.filter(t=>!A(t)),V=e=>{const t=[];return Object.keys(e).forEach(s=>{typeof e[s]=="object"&&(_e(e[s])?(t.push(...ye(e[s])),delete e[s]):t.push(...V(e[s])))}),t},Ne=e=>e.adopsjonAvEktefellesBarn!==o.UNANSWERED?{adopsjonAvEktefellesBarn:e.adopsjonAvEktefellesBarn===o.YES,søkerAdopsjonAlene:e.søkerAdopsjonAlene===o.YES,adopsjonsdato:i(e.adopsjonsdato).toDate(),antallBarn:parseInt(e.antallBarn,10),fødselsdatoer:e.fødselsdatoer.map(t=>i.utc(t).toDate())}:e.erBarnetFødt===o.YES?{antallBarn:parseInt(e.antallBarn,10),erBarnetFødt:!0,fødselsdatoer:[i.utc(e.fødselsdatoer[0]).toDate()]}:{antallBarn:parseInt(e.antallBarn,10),erBarnetFødt:!1,termindato:i.utc(e.termindato).toDate(),terminbekreftelseDato:i.utc(e.terminbekreftelsedato).toDate()},w=e=>e.map(t=>({land:t.landkode,tidsperiode:{fom:i.utc(t.fom).toDate(),tom:i.utc(t.tom).toDate()}})),Be=e=>({senereOpphold:w(e.utenlandsoppholdNeste12Mnd),tidligereOpphold:w(e.utenlandsoppholdSiste12Mnd),iNorgeNeste12Mnd:e.skalBoUtenforNorgeNeste12Mnd===o.YES,iNorgeSiste12Mnd:e.harBoddUtenforNorgeSiste12Mnd===o.YES}),ve=(e,t)=>{const{omBarnet:s,utenlandsopphold:m}=e.søknad,u=Ne(s),h=Be(m);return{barn:u,type:"engangsstønad",erEndringssøknad:!1,informasjonOmUtenlandsopphold:h,søker:{språkkode:t},vedlegg:V(JSON.parse(JSON.stringify(e.søknad)))}};const E=({søkerNavn:e,søkerFnr:t})=>n("div",{children:n(a,{padBottom:"l",children:n(p,{label:e,text:t})})});try{E.displayName="OmDegOppsummering",E.__docgenInfo={description:"",displayName:"OmDegOppsummering",props:{søkerNavn:{defaultValue:null,description:"",name:"søkerNavn",required:!0,type:{name:"string"}},søkerFnr:{defaultValue:null,description:"",name:"søkerFnr",required:!0,type:{name:"string"}}}}}catch{}const F=({person:e,locale:t})=>{const s=D(),m=X("oppsummering"),{state:u,dispatch:h}=oe(),B=H(),[I,L]=Z.useState(!1);C("sidevisning",{app:"engangsstonadny",team:"foreldrepenger",pageKey:ie.Oppsummering});const q=async()=>{const v=ve(u,t);L(!0);try{ce.sendSøknad(v).then(k=>{h(le.setKvittering(k.data)),B("/kvittering"),L(!1)}),C("skjema fullført",{app:"engangsstonadny",team:"foreldrepenger"})}catch{B("/kvittering")}};return n(O.FormikWrapper,{initialValues:fe,onSubmit:()=>q(),renderForm:({values:v})=>{const k=ke.getVisbility(v).areAllQuestionsAnswered();return n(G,{bannerTitle:d(s,"søknad.pageheading"),activeStepId:"oppsummering",pageTitle:d(s,"søknad.oppsummering"),backLinkHref:ne("oppsummering"),onCancel:()=>se(h,B),steps:re,children:l(O.Form,{includeButtons:!1,noButtonsContentRenderer:k?void 0:()=>n(ae,{children:d(s,"søknad.footer.spørsmålMåBesvares")}),children:[n(a,{padBottom:"l",children:n(J,{children:d(s,"oppsummering.text.lesNoye")})}),l("div",{className:m.block,children:[n(f,{tittel:d(s,"søknad.omDeg"),children:n(E,{søkerNavn:ge(e.fornavn,e.mellomnavn,e.etternavn),søkerFnr:e.fnr})}),n(f,{tittel:d(s,"søknad.omBarnet"),children:n(S,{barn:u.søknad.omBarnet})}),n(f,{tittel:d(s,"søknad.utenlandsopphold"),children:n(b,{barn:u.søknad.omBarnet,informasjonOmUtenlandsopphold:u.søknad.utenlandsopphold})})]}),n(a,{margin:"xl",children:n(O.ConfirmationCheckbox,{name:U.oppgittKorrekteOpplysninger,label:d(s,"oppsummering.text.samtykke")})}),k&&n(a,{margin:"xl",children:n("div",{className:m.element("sendSøknadKnapp"),children:n(z,{type:"submit",disabled:I,loading:I,children:d(s,"oppsummering.button.sendSøknad")})})})]})})}})},Le=F;try{F.displayName="Oppsummering",F.__docgenInfo={description:"",displayName:"Oppsummering",props:{person:{defaultValue:null,description:"",name:"person",required:!0,type:{name:"Person"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"nb"'},{value:'"nn"'},{value:'"en"'}]}}}}}catch{}export{ce as A,Le as O,N as f};
//# sourceMappingURL=Oppsummering-cbc86e8e.js.map
